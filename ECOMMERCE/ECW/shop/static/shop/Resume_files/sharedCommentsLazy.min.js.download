(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[19],{1305:function(t,e,n){"use strict";n.r(e);var o=n(121),r=n(74),i=n(10),s=n(48),a=n(0),c=n(3),l=n(117),p=n(318),u=n(832),d=n(53),f=n(214),h=n(294),y=n(745),m=n(605),b=n(833),g=n(209),v=n(1),C=n(672),T=n(89),O=n(90),x=n(146),S=n(640),P=n(24),E=n(9);var k=n(380),w=n(425),A=n(19),I=n(12),R=n(1496),j=n(127),_=n(1574),D=n(710),N=n(85),M=n(65),B=n(31),L=n(11),H=n(36),F=n(71),U=Object(L.c)((function(t){return{labelContainer:Object(B.b)({display:"flex",color:H.a.GRAY_E,opacity:"100%",fontFamily:"inherit",fontSize:"12px",lineHeight:"1.3",justifyContent:"center",width:D.a,marginTop:"7px",marginBottom:"10px",minHeight:"20px"}),cardContainer:Object(B.b)({display:"flex",flexDirection:"column",width:D.a,cursor:"pointer",marginTop:"20px",marginRight:"8px",marginLeft:"8px",backgroundColor:"transparent",flexGrow:0,transition:"ease-in-out",transitionProperty:"margin-top,max-height,min-height",transitionDuration:"0.20s",minHeight:"70px",maxHeight:"70px",border:"1px solid transparent",selectors:{":hover":Object(B.b)({marginTop:"5px",minHeight:"85px",maxHeight:"85px"},F.k),":focus":Object(B.b)({color:"#333333",outline:"none",border:"1px dotted"},F.j)}}),ghostCardContainer:Object(B.b)({width:D.a,overflow:"hidden"}),svgStyle:Object(B.b)({width:D.a},t&&{transform:"scaleX(-1)"})}})),z=function(t){function e(e){var n=t.call(this,e)||this;return n.clickHandler=n.clickHandler.bind(n),n.keyDownHandler=n.keyDownHandler.bind(n),n}return Object(a.__extends)(e,t),e.prototype.clickHandler=function(t){this.props.onClick&&this.props.onClick(),t.stopPropagation()},e.prototype.keyDownHandler=function(t){Object(l.f)(t.key)===l.b.Enter&&(this.props.onClick&&this.props.onClick(),t.stopPropagation())},e.prototype.render=function(){var t=n(1613),e=Object(N.a)(),o=U(e);return v.createElement("div",{"aria-label":this.props.accessibilityLabel,id:M.y(this.props.id),className:o.cardContainer,role:"button",onClick:this.clickHandler,onKeyDown:this.keyDownHandler,tabIndex:0},v.createElement("span",{className:o.labelContainer},this.props.ghostCommentString),v.createElement("span",{className:o.ghostCardContainer},v.createElement(t,{className:o.svgStyle})))},e}(v.PureComponent),K=n(1508),V=n(1488),q=n(1565),W=n(157),G=n(442),Y=n(1509),Q=n(72),J=n(1279),$=n(148),X={cardTabbingMode:K.a.ExpandedCardOrFirstCardTabbable,postTabbingMode:K.b.ExpandedCardRootPostTabbable},Z=function(t){function e(e){var n=t.call(this,e)||this;return n.onPaneResize=function(t){Object(c.i)().assertConditionTag(t.length<=1,"Unexpected number of elements: "+t.length,592232640),t.forEach((function(t){t.target===n.paneRootRef&&(n.props.focusedCommentInfo&&n.prevContentRect&&n.prevContentRect.height!==t.contentRect.height&&n.scrollToThreadById(n.props.focusedCommentInfo.focusedComment.selectedCardId),n.prevContentRect=t.contentRect)}))},n.onRenderCell=function(t,e){return n.renderCommentThread(e||0,t,{accessibilityPositionInSet:void 0!==e?e+1:void 0,accessibilitySetSize:n.state.allRenderableItemThreads.length})},n.onCardLayout=void 0,n.onRenderPage=n.onRenderPage.bind(n),n.scrollToThreadById=n.scrollToThreadById.bind(n),n.closePaneButtonClickHandler=n.closePaneButtonClickHandler.bind(n),n.closePaneButtonKeyDownHandler=n.closePaneButtonKeyDownHandler.bind(n),n.onReceiveListRef=n.onReceiveListRef.bind(n),n.paneFocusHandler=n.paneFocusHandler.bind(n),n.setPaneRootDivRef=n.setPaneRootDivRef.bind(n),n.newCommentButtonClickHandler=n.newCommentButtonClickHandler.bind(n),n.newCommentButtonKeyDownHandler=n.newCommentButtonKeyDownHandler.bind(n),n.getMentionableCommentEditorProps=Object(k.a)(n.getMentionableCommentEditorProps.bind(n)),n.getAuthToken=n.getAuthToken.bind(n),n.styles=Object(D.b)(),n.state=n.getInitialState(e),n.resizeObserver=new C.a(n.onPaneResize),n}return Object(a.__extends)(e,t),e.prototype.onReceiveListRef=function(t){this.listRef=t},e.prototype.isPaneEmpty=function(){var t=this.props.nextPopulatedContextDetails===x.a.NoComments;return t&&Object(c.i)().assertConditionTag(!this.props.dataItems.length,"CommentData length should be 0 if NextPopulatedContextDetails is NoComments.",595182560),t&&!this.props.dataItems.length&&!this.props.createdCommentLie},e.prototype.scrollToThreadById=function(t){var e=this;if(this.listRef){var n=this.state.allRenderableItemThreads,o=Math.max(n.findIndex((function(e){return Q.h(e).commentId===t})),0);this.listRef.scrollToIndex(o,(function(t){return e.getCardScrollHeight(t,n)}))}},e.prototype.paneFocusHandler=function(t){t.target===this.paneRootRef&&this.props.focusManager.focusCommentPaneCommand(this.props.componentTree)},e.prototype.setPaneRootDivRef=function(t){this.paneRootRef=t},e.prototype.closePaneButtonClickHandler=function(t){this.closePane(),t.stopPropagation()},e.prototype.closePaneButtonKeyDownHandler=function(t){Object(l.f)(t.key)===l.b.Enter&&(this.closePane(),t.preventDefault(),t.stopPropagation())},e.prototype.newCommentButtonClickHandler=function(t){this.startNewCommentSession(),t.stopPropagation()},e.prototype.newCommentButtonKeyDownHandler=function(t){Object(l.f)(t.key)===l.b.Enter&&(this.startNewCommentSession(),t.stopPropagation())},e.prototype.getGhostCommentProps=function(){var t=G.g(this.props.localizationAPI,this.props.nextPopulatedContextDetails);return{id:M.z(),onClick:this.onGhostCommentClicked,ghostCommentString:t,accessibilityLabel:t}},e.prototype.onContextChanged=function(){},e.prototype.getAuthToken=function(){return this.props.peopleAPI.getAuthToken(S.a.Loki)},e.prototype.renderCommentPaneHeader=function(){return v.createElement("div",{className:this.styles.paneHeader},v.createElement("div",{className:this.styles.paneTitle},this.props.localizationAPI.getString(18)),v.createElement(u.a,{content:this.props.localizationAPI.getString(19),directionalHint:d.DirectionalHint.leftCenter,tooltipProps:J.a},this.renderCloseButton()))},e.prototype.renderCloseButton=function(){return v.createElement(f.a,{id:M.l(),styles:this.styles.iconClosePane,onClick:this.closePaneButtonClickHandler,onKeyDown:this.closePaneButtonKeyDownHandler,iconProps:{iconName:E.ab()?"CancelGlyph_TaskPane":"CancelGlyph"},title:void 0,ariaLabel:this.props.localizationAPI.getString(20),tabIndex:0})},e.prototype.isNewCommentButtonDisabled=function(){return E.E()&&!this.props.modelCapabilities.newThread||!Object(w.a)(this.props.focusedCommentInfo?this.props.focusedCommentInfo.focusedComment:void 0,this.props.createdCommentLie)},e.prototype.renderNewCommentButtonWrapper=function(){return!E.C()||this.props.readOnly?null:v.createElement("div",{className:this.styles.newCommentButtonContainer},v.createElement(u.a,{content:this.props.localizationAPI.getString(177),directionalHint:d.DirectionalHint.leftCenter,tooltipProps:J.a},this.renderNewCommentButton()))},e.prototype.renderNewCommentButton=function(){var t=this.isNewCommentButtonDisabled();return v.createElement(h.a,{id:M.C(),styles:this.styles.newCommentButton,text:this.props.localizationAPI.getString(91),ariaLabel:this.props.localizationAPI.getString(92),iconProps:{iconName:"NewComment"},onClick:this.newCommentButtonClickHandler,onKeyDown:this.newCommentButtonKeyDownHandler,disabled:t,allowDisabledFocus:!0,tabIndex:t?-1:0})},e.prototype.renderEmptyPaneMessage=function(){return v.createElement("div",{className:this.styles.emptyPaneMessage,id:M.z(),"aria-label":this.props.localizationAPI.getString(13),tabIndex:0},this.props.localizationAPI.getString(13))},e.prototype.onRenderPage=function(t,e){if(Object(A.D)(this.props.modelCapabilities,this.props.virtualized)&&t.page.items){var n=function(t,e){var n,o,r=[];try{for(var i=Object(a.__values)(t),s=i.next();!s.done;s=i.next()){var c=e(s.value);void 0!==c&&r.push(c)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return r}(t.page.items,(function(t){if(Object($.a)(t[0]))return Object(T.h)(t[0].commentModel);Object(c.i)().assertConditionTag(!1,"First item in thread is not a comment model!",595632604)}));n.length&&this.onRequestLoadThreads(n)}return e?e(t):null},e.prototype.getCreateCommentInitialHeight=function(){return 0},e.prototype.getKeyboardingOptions=function(){return X},e.prototype.componentDidUpdate=function(e,n){var o=e.focusedCommentInfo?e.focusedCommentInfo.focusedComment.selectedCardId:void 0,r=this.props.focusedCommentInfo?this.props.focusedCommentInfo.focusedComment.selectedCardId:void 0,i=o!==r,s=Object(_.b)(e),a=Object(_.b)(this.props);i?r&&this.scrollToThreadById(r):!this.props.focusedCommentInfo&&s!==a&&a&&this.scrollToThreadById(a),!this.listRef||this.props.focusedCommentInfo===e.focusedCommentInfo&&this.props.cardViewStates===e.cardViewStates&&this.props.postViewStates===e.postViewStates&&this.props.highlightedCommentId===e.highlightedCommentId&&this.props.atMentionState===e.atMentionState&&this.props.modelCapabilities===e.modelCapabilities&&this.props.readOnly===e.readOnly&&this.props.draftState===e.draftState||this.listRef.forceUpdate(),t.prototype.componentDidUpdate.call(this,e,n)},e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this.paneRootRef&&this.resizeObserver.observe(this.paneRootRef)},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this.resizeObserver&&this.resizeObserver.disconnect(),this.prevContentRect=void 0},e.prototype.UNSAFE_componentWillReceiveProps=function(t){var e=this.getUpdatedItemThreads(t);this.setState({allRenderableItemThreads:e})},e.prototype.getCardScrollHeight=function(t,e){return Object(c.i)().assertConditionTag(void 0!==e[t],"No comment thread in the given index: '"+t+"'. Thread length: '"+e.length+"'",595182561),e[t]&&1===e[t].length?160:e[t]&&2===e[t].length?206:235},e.prototype.getChildContext=function(){return{getComponent:this.props.componentTree.getComponent,getComponentById:this.props.componentTree.getComponentById,isEventTarget:this.props.componentTree.isEventTarget,isFocusWithin:this.props.componentTree.isFocusWithin,isFocusWithinAny:this.props.componentTree.isFocusWithinAny,isFocusWithinPane:this.props.componentTree.isFocusWithinPane,isFocusOn:this.props.componentTree.isFocusOn,getCurrentlyFocused:this.props.componentTree.getCurrentlyFocused,renderContextType:this.props.componentTree.renderContextType,contextIdentifier:this.props.componentTree.contextIdentifier}},e.prototype.getCommentCardOptions_deprecated=function(t){return{highlightCard:this.props.highlightedCommentId&&this.props.highlightedCommentId===t||Object(_.b)(this.props)===t,restrictActionControls:this.props.focusedCommentInfo&&Object(I.i)(this.props.focusedCommentInfo.focusedComment.focusDetails),preventDefaultKeyDownBehavior:void 0}},e.prototype.getCommentPostOptions_deprecated=function(t,e){var n=this.getPostRestrictActionControls_deprecated(t,e),o=void 0!==this.props.focusedCommentInfo?this.props.focusedCommentInfo.focusedComment:void 0,r=e||t,i=Object(Y.a)(r,o);return{restrictActionControls:n,showFullComment:i===R.a.Expanded,collapsed:i===R.a.Collapsed,preventDefaultKeyDownBehavior:void 0}},e.prototype.onGetUserContacts=function(t,e,n){return W.r({filter:t,limit:e,searchGraph:n,dispatchProps:this.props})},e.prototype.onCloseCanceled=function(){t.prototype.onCloseCanceled.call(this);var e=document.getElementById(M.x());e&&e.focus()},e.prototype.invokeModalDialog=function(t,e,n){var o=Object(c.i)().createActivityObject("InvokeModalDialog",this.props.telemetryVisitor,c.a.None);switch(o.addDataField(P.a.ModalDialogMode,t,c.c.SystemMetadata),t){case j.a.ClosePaneDraft:var r,i=G.d(this.props.localizationAPI),s=new Promise((function(t){r=t}));return this.props.requestModalConfirmation({renderContextType:this.props.componentTree.renderContextType,trackback:c.h.reserveTag(595928218),telemetryVisitor:this.props.telemetryVisitor},(function(){return r(e())}),(function(){return r(n())}),i),o.successTag(595182562),s;default:return Object(c.i)().assertConditionTag(!1,"ModalDialogMode "+t+" not implemented for web",595182563),o.failTag(595182592,-2130957557),Promise.resolve(O.a.Unhandled)}},e.prototype.getMentionableCommentEditorProps=function(t,e,n){if(Object(q.a)(t,e))return{onMentionCreated:this.onMentionCreated,onMentioneesStillInDraftUpdated:this.onMentioneesStillInDraftUpdated,onCurrentMentionsUpdated_deprecated:this.onCurrentMentionsUpdated_deprecated,getAuthToken:this.getAuthToken,peoplePickerProps:{onGetUserContacts:this.onGetUserContacts,pickerLocalizationDetails:E.y()?void 0:G.i(this.props.localizationAPI),preventDismissOnScroll:E.b()},suggestionsDetails:n}},e.prototype.onAtMentionCapabilityStateChange=function(){},e.prototype.getContentsPreventDefaultKeyDownBehavior=function(){},e.prototype.getContentExtraPaddingLeft=function(){},e.prototype.getContentExtraPaddingRight=function(){},e.prototype.getAvailableScreenHeight=function(){},e.prototype.getMaxDraftHeight=function(){},e.prototype.getCommentCardStyle=function(){},e.prototype.getContentBackgroundColor=function(t,e){},e.prototype.getPinnedCardIndex=function(){},e.prototype.getComponentTree=function(){return this.props.componentTree},e.prototype.render=function(){var t=this.paneContainerKeyDownHandler.onKeyDown,e=null;return e=this.isReadyToRender()?this.isPaneEmpty()?this.renderEmptyPaneMessage():v.createElement("div",{"data-is-scrollable":"true",id:M.m(),className:this.styles.listContainer,onKeyDown:this.commentContentsKeyDownHandler.onKeyDown},v.createElement(m.a,{ref:this.onReceiveListRef,className:this.styles.commentList,items:this.state.allRenderableItemThreads,role:"tree",onRenderPage:this.onRenderPage,onRenderCell:this.onRenderCell,"aria-label":this.props.localizationAPI.getString(32),getKey:this.getListItemKey}),this.shouldShowGhostComment()?v.createElement(z,Object(a.__assign)({},this.getGhostCommentProps())):void 0):v.createElement(p.a,{delay:F.f},v.createElement(b.a,{size:g.a.large,className:this.styles.spinnerStyles})),v.createElement(y.a,{className:this.styles.focusTrapZone,isClickableOutsideFocusTrap:!0,ignoreExternalFocusing:!0,forceFocusInsideTrap:!1,disableFirstFocus:!0},v.createElement("div",{ref:this.setPaneRootDivRef,id:M.x(),"aria-label":this.props.localizationAPI.getString(31),className:this.styles.paneContainer,onKeyDown:t,tabIndex:-1,style:D.c,onFocus:this.paneFocusHandler},this.renderCommentPaneHeader(),this.renderNewCommentButtonWrapper(),e))},e.childContextTypes=Object(a.__assign)({},V.a),e}(_.a),tt=n(413);function et(){var t=i.y(),e=i.w();return function(n){var o=i.f(n),a={cardViewStates:i.d(n),dataItems:t(n),taskState:n.taskState,personaIconPropertiesMap:i.p(n),createdCommentLie:i.h(n),nextPopulatedContextDetails:o.nextPopulatedContextDetails,pendingCommentLoad:i.o(n),postViewStates:i.q(n),componentTree:s.c(n),commentThreadCountsContextDetails:o.commentThreadCounts,virtualized:i.u(n),focusedThreadIdBeforeCommentSession:i.k(n),readOnly:i.m(n),highlightedCommentId:i.l(n),lastContextChangeIncrement:o.lastContextChangeIncrement,initializationStatus:n.paneState.initializationStatus,focusTypeAfterContextChange:n.paneState.focusTypeAfterContextChange,atMentionState:i.a(n),draftState:i.i(n),capabilities:i.c(n),authToken:i.b(n),modelCapabilities:i.n(n),focusedCommentInfo:e(n),suggestionsDetails:i.s(n),foldableLayoutState:s.d(n).foldableLayoutState},c=i.t(n);if(c){var l=i.e(n).filter(r.a).findIndex((function(t){return t.commentId===c}));l>-1&&(a.topVisibleThread={cardId:c,index:l})}return a}}function nt(t){return void 0===t&&(t=et),Object(o.connect)(t,tt.b,void 0,{withRef:!0})}n.d(e,"makeMapStateToProps",(function(){return et})),n.d(e,"createCommentPaneConnector",(function(){return nt})),n.d(e,"connectCommentPane",(function(){return ot})),n.d(e,"CommentPaneContainer",(function(){return rt}));var ot=nt(),rt=ot(Z);e.default=rt},1360:function(t,e,n){"use strict";n.r(e);var o=n(0),r=n(1),i=n(121),s=n(770),a=n(1305),c=n(178),l=n(3),p=n(90),u=n(92),d=n(269),f=n(127),h=n(18),y=n(1574),m=n(1508),b=n(301),g=n(9),v=n(30),C=n(12),T=n(373),O=n(602),x=n(114),S=function(t){function e(e){var n=t.call(this,e)||this;return n.pendingActionReason=x.a.None,n.pendingAction=void 0,n.onCardLayout=void 0,n.onMockUIAction=n.onMockUIAction.bind(n),n.state=Object(o.__assign)({actionHistory:[]},n.getInitialState(e)),n}return Object(o.__extends)(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this.registrationToken=this.props.mockUIDriver.onMockUIAction.subscribe(this.onMockUIAction)},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this.registrationToken.unsubscribe()},e.prototype.componentDidUpdate=function(e,n){t.prototype.componentDidUpdate.call(this,e,n),!(this.props.focusedCommentInfo&&Object(C.i)(this.props.focusedCommentInfo.focusedComment.focusDetails))&&this.pendingActionReason===x.a.NeedNotDrafting&&this.pendingAction&&(this.pendingAction(),this.pendingAction=void 0,this.pendingActionReason=x.a.None);var o=this.props.focusedCommentInfo&&this.props.focusedCommentInfo.focusedComment.focusDetails.editingSession===C.a.Active,r=e.focusedCommentInfo&&e.focusedCommentInfo.focusedComment.focusDetails.editingSession===C.a.Active;o&&!r&&this.pendingActionReason===x.a.NeedDrafting&&this.pendingAction&&(this.pendingAction(),this.pendingAction=void 0,this.pendingActionReason=x.a.None)},e.prototype.onDrafting=function(t){this.props.focusedCommentInfo&&this.props.focusedCommentInfo.focusedComment.focusDetails.editingSession===C.a.Active?t():(this.pendingAction=t,this.pendingActionReason=x.a.NeedDrafting)},e.prototype.onNotDrafting=function(t){this.props.focusedCommentInfo&&Object(C.i)(this.props.focusedCommentInfo.focusedComment.focusDetails)?(this.pendingAction=t,this.pendingActionReason=x.a.NeedNotDrafting):t()},e.prototype.runAction=function(t,e,n){var r=this,i={action:t,pendingState:e};this.setState({actionHistory:Object(o.__spread)(this.state.actionHistory,[i])},(function(){var t=function(){n();var t=r.state.actionHistory.indexOf(i);if(t<0)Object(l.i)().assertConditionTag(!1,"Entry doesnt exist in history",592229778);else{var e=r.state.actionHistory.slice();e.splice(t,1,{action:e[t].action,pendingState:x.a.None}),r.setState({actionHistory:e})}};switch(e){case x.a.NeedDrafting:return r.onDrafting(t);case x.a.NeedNotDrafting:return r.onNotDrafting(t);case x.a.None:return n()}}))},e.prototype.onMockUIAction=function(t){var e=this;if(!g.p())if(this.pendingAction)Object(l.i)().assertConditionTag(!1,"Action is already pending",592229779);else switch(t.actionType){case u.a.CancelCreateThread:u.b(t)?this.runAction(t,x.a.NeedDrafting,(function(){return e.commentCardCallbackProps.onCancel(new T.a(Object(b.b)(e.props.createdCommentLie)))})):Object(l.i)().assertConditionTag(!1,"Invalid action - is JS and native out of sync?",592229780);break;case u.a.CancelEditSession:u.c(t)?this.runAction(t,x.a.NeedDrafting,(function(){return e.commentPostCallbackProps.onCancel(new O.a(t.commentId))})):Object(l.i)().assertConditionTag(!1,"Invalid action - is JS and native out of sync?",592229781);break;case u.a.CancelReplySession:u.d(t)?this.runAction(t,x.a.NeedDrafting,(function(){return e.commentCardCallbackProps.onCancel(new T.a(t.threadId))})):Object(l.i)().assertConditionTag(!1,"Invalid action - is JS and native out of sync?",592229782);break;case u.a.ClickGhostCard:u.e(t)?this.runAction(t,x.a.NeedNotDrafting,(function(){return e.onGhostCommentClicked()})):Object(l.i)().assertConditionTag(!1,"Invalid action - is JS and native out of sync?",592229783);break;case u.a.ClosePane:u.f(t)?this.runAction(t,x.a.NeedNotDrafting,(function(){return e.closePane()})):Object(l.i)().assertConditionTag(!1,"Invalid action - is JS and native out of sync?",592229784);break;case u.a.CreateThread:u.g(t)?this.runAction(t,x.a.NeedDrafting,(function(){return e.commentCardCallbackProps.onPost(new T.a(Object(b.b)(e.props.createdCommentLie),t.content))})):Object(l.i)().assertConditionTag(!1,"Invalid action - is JS and native out of sync?",592229785);break;case u.a.DeleteComment:u.h(t)?this.runAction(t,x.a.NeedNotDrafting,(function(){return e.commentPostCallbackProps.onDelete(t.commentId)})):Object(l.i)().assertConditionTag(!1,"Invalid action - is JS and native out of sync?",592229786);break;case u.a.DeleteThread:u.i(t)?this.runAction(t,x.a.NeedNotDrafting,(function(){return e.cardContextualMenuCallbackProps.onDeleteThread(t.threadId)})):Object(l.i)().assertConditionTag(!1,"Invalid action - is JS and native out of sync?",592229787);break;case u.a.PostEdit:if(u.j(t)){var n=new O.a(t.commentId);n.setContents(t.content),this.runAction(t,x.a.NeedDrafting,(function(){return e.commentPostCallbackProps.onCommit(n)}))}else Object(l.i)().assertConditionTag(!1,"Invalid action - is JS and native out of sync?",592229788);break;case u.a.PostReply:u.k(t)?this.runAction(t,x.a.NeedDrafting,(function(){return e.commentCardCallbackProps.onPost(new T.a(t.threadId,t.content))})):Object(l.i)().assertConditionTag(!1,"Invalid action - is JS and native out of sync?",592229789);break;case u.a.ReopenThread:u.l(t)?this.runAction(t,x.a.NeedNotDrafting,(function(){return e.cardContextualMenuCallbackProps.onReopenThread(t.threadId)})):Object(l.i)().assertConditionTag(!1,"Invalid action - is JS and native out of sync?",592229790);break;case u.a.ResolveThread:u.m(t)?this.runAction(t,x.a.NeedNotDrafting,(function(){return e.cardContextualMenuCallbackProps.onResolveThread(t.threadId)})):Object(l.i)().assertConditionTag(!1,"Invalid action - is JS and native out of sync?",592229791);break;case u.a.SelectComment:u.n(t)?this.runAction(t,x.a.NeedNotDrafting,(function(){return e.onRenderableItemSelect(new O.a(t.commentId))})):Object(l.i)().assertConditionTag(!1,"Invalid action - is JS and native out of sync?",592229792);break;case u.a.StartEditSession:u.o(t)?this.runAction(t,x.a.NeedNotDrafting,(function(){return e.commentPostCallbackProps.onEdit(t.commentId)})):Object(l.i)().assertConditionTag(!1,"Invalid action - is JS and native out of sync?",592229793);break;case u.a.StartReplySession:u.p(t)?this.runAction(t,x.a.NeedNotDrafting,(function(){return e.commentCardCallbackProps.onEditorFocus(new T.a(t.threadId))})):Object(l.i)().assertConditionTag(!1,"Invalid action - is JS and native out of sync?",592229794);break;default:Object(l.i)().assertConditionTag(!1,"Unknown MockUIActionType",592229795)}},e.prototype.getMentionableCommentEditorProps=function(t,e){},e.prototype.getCommentCardOptions_deprecated=function(t){return{highlightCard:!1,preventDefaultKeyDownBehavior:void 0}},e.prototype.getCommentPostOptions_deprecated=function(t,e){return{preventDefaultKeyDownBehavior:void 0}},e.prototype.onContextChanged=function(){this.props.initializationStatus===d.a.NotInitialized&&this.props.initializeView(this.props.componentTree)},e.prototype.getAuthToken=function(){},e.prototype.invokeModalDialog=function(t,e,n){var o={renderContextType:this.props.componentTree.renderContextType,trackback:l.f,telemetryVisitor:this.props.telemetryVisitor};switch(t){case f.a.CancelNewDraft:case f.a.CancelReplyDraft:return this.props.discardDraftAsync(o,v.a.SharedComments,!1);case f.a.DeleteThread:return this.props.focusedCommentInfo&&this.props.requestDeleteThread(o,this.props.focusedCommentInfo.focusedComment.selectedCardId),Promise.resolve(p.a.Handled);case f.a.ClosePaneDraft:return this.closePane(),Promise.resolve(p.a.Handled);default:return Object(l.i)().assertConditionTag(!1,"Unknown ModalDialogMode",592229824),Promise.resolve(p.a.Unhandled)}},e.prototype.getCreateCommentInitialHeight=function(){return 0},e.prototype.onGetUserContacts=function(t,e,n){return Promise.resolve([])},e.prototype.getKeyboardingOptions=function(){return{cardTabbingMode:m.a.AllCardsTabbable,postTabbingMode:m.b.AllPostsTabbable}},e.prototype.getComponentTree=function(){return this.props.componentTree},e.prototype.showDiscardDialog=function(){return Promise.resolve(!1)},e.prototype.onAtMentionCapabilityStateChange=function(){},e.prototype.isNewCommentButtonDisabled=function(){return!1},e.prototype.getContentsPreventDefaultKeyDownBehavior=function(){},e.prototype.getContentExtraPaddingLeft=function(){},e.prototype.getContentExtraPaddingRight=function(){},e.prototype.getAvailableScreenHeight=function(){},e.prototype.getMaxDraftHeight=function(){},e.prototype.getContentBackgroundColor=function(t,e){},e.prototype.getCommentCardStyle=function(){},e.prototype.getPinnedCardIndex=function(){},e}(y.a),P={focus:function(){},blur:function(){}},E={isFocusOn:function(){return!1},isFocusWithin:function(){return!1},isEventTarget:function(){return!1},isFocusWithinAny:function(){return!1},isFocusWithinPane:function(){return!1},getComponent:function(){return P},getComponentById:function(){return P},getCurrentlyFocused:function(){return[P]},renderContextType:h.a.FullPane,contextIdentifier:c.a};var k=Object(a.createCommentPaneConnector)((function(){var t=Object(a.makeMapStateToProps)();return function(e){var n=t(e);return n.componentTree=E,n}}))(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.render=function(){return r.createElement("div",null)},e}(S)),w=n(339),A=n(825),I=n(175),R=n(826),j=n(711),_=n(405),D=function(t){function e(e){var n=t.call(this,e)||this;n._useMock=!1,n._hostRef=r.createRef(),n._correlationId_deprecated=Object(w.a)();var o=n.props.getCommentAPI();return n._useMock=n.props.useMockCommentPane,n._useMock&&(n._mockUIDriver=new s.a(e.apiContext)),n._commentManager=new A.a({apiContext:n.props.apiContext,viewProvider:n.props.viewContainerAPI,commentAPI:o,peopleAPI:n.props.peopleAPI,localizationAPI:n.props.localizationAPI,themeAPI:n.props.themeAPI,initializationReason:n.props.initializationReason,commentStore:Object(j.a)(o,n.props.viewContainerAPI,Object(_.b)(n.props.viewContainerAPI.getViewContainer(),!0,n.props.localizationAPI.getLocaleInfo().appLocale,n.props.apiContext),I.a.getTelemetryVisitor(n.props.apiContext),n.props.contentNavigationAPI,n.props.localizationAPI),viewStrategyFactory:new R.a,initializeImmediately:!0,mockUIDriver:void 0}),n}return Object(o.__extends)(e,t),e.prototype.teardownManager=function(){this._commentManager.teardown()},e.prototype.componentWillUnmount=function(){this.teardownManager()},e.prototype.getWrappedPaneInstance=function(){return this._hostRef.current&&this._hostRef.current.getWrappedInstance()},e.prototype.render=function(){var t={ref:this._hostRef,commentAPI:this.props.getCommentAPI(),peopleAPI:this.props.peopleAPI,localizationAPI:this.props.localizationAPI,focusManager:this._commentManager.getFocusManager(),selectionManager:this._commentManager.getSelectionManager(),initializationReason:this.props.initializationReason,correlationId:I.a.getCorrelationId(this.props.apiContext)||this._correlationId_deprecated,registerComponentUIActionListener:this._commentManager.registerComponentUIActionListener,unregisterComponentUIActionListener:this._commentManager.unregisterComponentUIActionListener,registerComponentInterruptableCommandListener:this._commentManager.registerInterruptableCommandListener,unregisterComponentInterruptableCommandListener:this._commentManager.unregisterComponentInterruptableCommandListener,refreshAtMentionAuthToken:this._commentManager.refreshAtMentionAuthToken,resource:{id:"CommentPane"},telemetryVisitor:I.a.getTelemetryVisitor(this.props.apiContext),onInitialRender:this._commentManager.onInitialRender};return this._useMock?r.createElement(i.Provider,{store:this._commentManager.getCommentStore()},r.createElement(k,Object(o.__assign)({},t,{mockUIDriver:this._mockUIDriver}))):r.createElement(i.Provider,{store:this._commentManager.getCommentStore()},r.createElement(a.CommentPaneContainer,Object(o.__assign)({},t)))},e}(r.Component);e.default=D},1361:function(t,e,n){"use strict";n.r(e);var o=n(3),r=n(25),i=n(121),s=n(14),a=n(10),c=n(536),l=n(1573),p=n(18),u=n(145),d=n(0),f=n(56),h=n(1),y=n(9),m=n(380),b=n(19),g=n(1576),v=n(21),C=function(){throw new v.a("Not implemented",-2130957557)},T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(d.__extends)(e,t),e.prototype.render=function(){return this.props.children},e}(h.Component),O=function(t){function e(e){var n=t.call(this,e)||this;return n.onQueueLoadThread=function(t){Object(b.D)(n.props.modelCapabilities,n.props.virtualized_deprecated)&&!t.isDraftThread&&t.isResourceAvailable&&t.queueLoadThread(t.threadId,{renderContextType:t.componentTree.renderContextType,telemetryVisitor:t.telemetryVisitor,trackback:o.h.reserveTag(592580928)})},n.getUpdatedResource=Object(m.a)((function(t,e){return Object(d.__assign)(Object(d.__assign)({},t),{id:e})})),n.state={keyIter:0},e.isResourceAvailable&&n.onQueueLoadThread(e),n.props.themeAPI.registerForThemeChange((function(){n.setState((function(t,e){return{keyIter:t.keyIter+1}}))})),n}return Object(d.__extends)(e,t),e.prototype.UNSAFE_componentWillUpdate=function(t){!this.props.isResourceAvailable&&t.isResourceAvailable&&this.onQueueLoadThread(t)},e.prototype.render=function(){if(!this.props.isResourceAvailable)return null;if(!this.props.isExtensionEnabled){if(f.a)return h.createElement(C,{textStylePolyester:"MediumBold"},"Debug Error: This comment card's extension is disabled.");if(y.P())return null}var t=this.getUpdatedResource(this.props.resource,this.props.threadId);return h.createElement(T,{api:this.props.themeAPI},h.createElement(g.a,{key:t.id+":"+this.state.keyIter.toString(),commentAPI:this.props.commentAPI,focusManager:this.props.focusManager,localizationAPI:this.props.localizationAPI,peopleAPI:this.props.peopleAPI,resource:t,telemetryVisitor:this.props.telemetryVisitor,componentRef:this.props.componentRef,componentTree:this.props.componentTree,maximumDimensions:this.props.maximumDimensions,onInitialRender:this.props.onInitialRender,setComponentRef:this.props.setComponentRef,isVirtualized:this.props.isVirtualized}))},e}(h.PureComponent);n.d(e,"makeMapStateToProps",(function(){return x})),n.d(e,"mapDispatchToProps",(function(){return S})),n.d(e,"HostableCommentCardRendererContainer",(function(){return P}));var x=function(){var t=l.e(),e=l.c(),n=l.m(a.h,t,e),i=l.a(),s=l.g(),d=l.d(n,i),f=l.n(d);return function(t,e){Object(o.i)().assertConditionTag(Object(u.a)(e.componentTree.renderContextType),"Invalid RenderContextType for HostableComponent received. Defaulting to Integrated RenderMode.",593822914);var i=n(t,e),l=i.thread.length?i.thread[0].commentId:e.resource.id,d=e.componentTree.renderContextType===p.a.DiscreteIntegrated?{renderMode:r.d.Integrated}:{renderMode:r.d.Isolated,threadId:l},h=c.b(t,d);return{isResourceAvailable:f(t,e),virtualized_deprecated:a.u(t),modelCapabilities:a.n(t),isDraftThread:s(t,e),isExtensionEnabled:h,threadId:l}}};function S(t,e){return{queueLoadThread:function(e,n){t(s.x(n,{threadIds:[e]}))},queueLoadThread_deprecated:function(n){t(s.x(n,{threadIds:[e.resource.id]}))}}}var P=Object(i.connect)(x,S)(O)},1479:function(t,e,n){"use strict";var o=n(1563),r="object"==typeof self&&self&&self.Object===Object&&self,i=o.a||r||Function("return this")();e.a=i},1481:function(t,e,n){"use strict";var o;!function(t){t[t.New=0]="New",t[t.Normal=1]="Normal",t[t.Editing=2]="Editing",t[t.ReadOnly=3]="ReadOnly",t[t.PendingDraft=4]="PendingDraft",t[t.PendingEdit=5]="PendingEdit",t[t.EditPreCommitPending=6]="EditPreCommitPending",t[t.Resolved=7]="Resolved",t[t.LowFidelityWarningEdit=8]="LowFidelityWarningEdit",t[t.LowFidelityWarningDelete=9]="LowFidelityWarningDelete",t[t.Error=10]="Error"}(o||(o={})),e.a=o},1488:function(t,e,n){"use strict";var o=n(0),r=n(94),i={renderContextType:r.number.isRequired},s={isFocusWithinPane:r.func.isRequired,isFocusWithinAny:r.func.isRequired,isFocusOn:r.func.isRequired,isFocusWithin:r.func.isRequired,getCurrentlyFocused:r.func.isRequired};n.d(e,"a",(function(){return a}));var a=Object(o.__assign)(Object(o.__assign)(Object(o.__assign)({},s),i),{contextIdentifier:r.string.isRequired,getComponent:r.func.isRequired,getComponentById:r.func.isRequired,isEventTarget:r.func.isRequired})},1496:function(t,e,n){"use strict";var o;!function(t){t[t.Collapsed=0]="Collapsed",t[t.Expanded=1]="Expanded"}(o||(o={})),e.a=o},1507:function(t,e,n){"use strict";var o;!function(t){t[t.Default=0]="Default",t[t.Disabled=1]="Disabled",t[t.ReadOnly=2]="ReadOnly"}(o||(o={})),e.a=o},1508:function(t,e,n){"use strict";var o,r;n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r})),function(t){t[t.AllCardsTabbable=0]="AllCardsTabbable",t[t.ExpandedCardTabbable=1]="ExpandedCardTabbable",t[t.ExpandedCardOrFirstCardTabbable=2]="ExpandedCardOrFirstCardTabbable",t[t.SelectedCardTabbable=3]="SelectedCardTabbable"}(o||(o={})),function(t){t[t.AllPostsTabbable=0]="AllPostsTabbable",t[t.ExpandedCardPostsTabbable=1]="ExpandedCardPostsTabbable",t[t.ExpandedCardRootPostTabbable=2]="ExpandedCardRootPostTabbable",t[t.SelectedPostTabbable=3]="SelectedPostTabbable"}(r||(r={}))},1509:function(t,e,n){"use strict";var o,r=n(0),i=n(3),s=n(1),a=n(186),c=n(102),l=n(21),p=n(9),u=n(19),d=n(129),f=n(293),h=n(12),y=n(180),m=n(1496),b=n(389),g=n(147),v=n(1481),C=n(18),T=n(1507),O=n(117),x=n(85),S=n(318),P=n(294),E=n(53),k=n(745),w=n(833),A=n(209),I=n(11),R=n(187),j=n(24),_=n(78);!function(t){t[t.RootPost=0]="RootPost",t[t.ReplyPost=1]="ReplyPost",t[t.ViewMoreRepliesButton=2]="ViewMoreRepliesButton"}(o||(o={}));var D,N=o;!function(t){t[t.Editing=0]="Editing",t[t.Disabled=1]="Disabled",t[t.ReadOnly=2]="ReadOnly"}(D||(D={}));var M,B=D;function L(t){return void 0!==t[0].text}!function(t){t[t.CardContextMenuItem=0]="CardContextMenuItem",t[t.ActionBarItem=1]="ActionBarItem"}(M||(M={}));var H,F=n(380),U=n(650);!function(t){t[t.Post=0]="Post",t[t.Card=1]="Card"}(H||(H={}));var z=n(442),K=n(31),V=n(1284),q=n(36),W={display:"flex",overflow:"hidden",marginBottom:"5px",flexDirection:"row",flexShrink:0,color:q.a.WARNING_RED,fontSize:"11px",outline:"none",wordBreak:"break-word"},G=Object(I.c)((function(){return{card:Object(K.b)(W,{marginLeft:V.e+10,marginRight:V.e+10}),post:Object(K.b)(W,{marginLeft:"3px",marginRight:"3px"})}})),Y=s.memo((function(t){var e=z.e(t.localizationAPI,t.draftWarningState.type),n=G(),o=t.target===H.Card?n.card:n.post;return s.createElement("div",{"aria-label":e,className:o,id:t.id},e)})),Q=n(65),J=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.getNewCandidateTaskAssignees=Object(F.a)((function(t,e){var n=Object(c.b)(t);return e?Object(c.k)(n,e):n})),o.notifyRenderedOnce=Object(U.a)((function(){o.props.onCardRendered&&o.props.onCardRendered(o.props)})),o.getId=o.getId.bind(o),o.onTaskAssigneeUpdated=o.onTaskAssigneeUpdated.bind(o),o}return Object(r.__extends)(e,t),e.prototype.componentDidMount=function(){if(this.props.onCardMounted(this.props),this.props.displayMode===b.a.Draft||this.props.displayMode===b.a.DraftPreCommitPending){var t=Object(i.i)().createActivityObject("DraftCardMount",Object(i.j)(i.g.ReviewedAsNotNecessary),i.a.None);t.addDataField(j.a.CommentId,this.props.id,i.c.SystemMetadata),p.z()&&t.addDataField(j.a.RenderContextType,this.context.renderContextType,i.c.SystemMetadata),t.addDataField(j.a.CardDisplayMode,this.props.displayMode,i.c.SystemMetadata),t.successTag(594605575)}},e.prototype.componentWillUnmount=function(){if(this.props.displayMode===b.a.Draft||this.props.displayMode===b.a.DraftPreCommitPending){var t=Object(i.i)().createActivityObject("DraftCardUnmount",Object(i.j)(i.g.ReviewedAsNotNecessary),i.a.None);t.addDataField(j.a.CommentId,this.props.id,i.c.SystemMetadata),p.z()&&t.addDataField(j.a.RenderContextType,this.context.renderContextType,i.c.SystemMetadata),t.addDataField(j.a.CardDisplayMode,this.props.displayMode,i.c.SystemMetadata),t.successTag(594605576)}},e.prototype.getId=function(){return this.props.id},e.prototype.isActiveReply=function(){return this.props.displayMode===b.a.Reply||this.props.displayMode===b.a.ReplyPreCommitPending},e.prototype.isActiveDraft=function(){return this.props.displayMode===b.a.Draft||this.props.displayMode===b.a.DraftPreCommitPending},e.prototype.onTaskAssigneeUpdated=function(t){this.props.onSelectedTaskAssigneeUpdated(t)},e.prototype.getTaskAssignerProps=function(){var t;if(p.b()&&p.F())if(this.props.selectedTaskAssignee&&Object(c.h)(this.props.selectedTaskAssignee))Object(i.i)().assertConditionTag(!1,"selectedTaskAssignee should not be of type IUser when NewTaskAssignee flight is on",593805763);else{var e=this.isActiveReply()&&!this.props.taskHeaderProps;if((!e||p.c())&&this.props.currentMentionees){var n=e||this.isActiveDraft(),o=z.n(this.props.localizationAPI,n),r=this.getNewCandidateTaskAssignees(this.props.currentMentionees,null===(t=this.props.taskHeaderProps)||void 0===t?void 0:t.assignees),s=this.props.localizationAPI.getString(128);if(r&&0!==Object.keys(r).length)return{renderContextType:this.context.renderContextType,id:this.props.id,label:o,candidateAssignees:r,isNewThread:this.isActiveDraft(),selectedAssignee:this.props.selectedTaskAssignee,onSelectedTaskAssigneeUpdated:this.onTaskAssigneeUpdated,pickerAriaLabel:s,assignerTooltip:this.props.localizationAPI.getString(182),preventDefaultKeyDownBehavior:this.props.preventDefaultKeyDownBehavior,isTabbable:this.props.isTabbable}}}},e.prototype.renderDraftWarning=function(){var t=this.props.draftWarningState;return p.D()&&t?s.createElement(Y,{key:"draftWarning",draftWarningState:t,localizationAPI:this.props.localizationAPI,renderContextType:this.context.renderContextType,target:H.Card,id:Object(Q.s)({id:this.props.id,renderContextType:this.context.renderContextType})}):null},e.prototype.onCardSaveDraft=function(t){var e;!this.props.onSaveDraft||this.props.displayMode!==b.a.Draft&&this.props.displayMode!==b.a.Reply||(p.S()&&t?this.props.onSaveDraft(this.getId(),t):this.props.onSaveDraft_deprecated(this,null===(e=t)||void 0===e?void 0:e.getContentsAsync()))},e}(s.PureComponent),$=n(832),X=n(214),Z=n(823),tt=n(732),et=n(668),nt=n(669),ot=n(1282),rt=n(1279),it=n(561),st=n(71),at=Object(I.c)((function(){return{iconContextMenuAnchor:{menuIconDisabled:{color:q.a.GRAY_C},menuIcon:{color:q.a.GRAY_F,margin:0,width:"16px"},menuIconPressed:{color:q.a.GRAY_J},menuIconHovered:Object(K.b)({color:q.a.GRAY_J},st.k),rootPressed:{color:q.a.GRAY_J},rootHovered:Object(K.b)({color:st.b.BUTTON_HOVER},st.k),rootFocused:Object(K.b)({color:q.a.GRAY_H,outline:"none",border:"1px solid",borderColor:it.a.gray110},st.j),root:{flexShrink:0,height:"10px",width:"20px",minWidth:"20px",border:"1px solid transparent",padding:0,margin:0,color:q.a.GRAY_E,selectors:{".ms-Fabric--isFocusVisible &:focus::after":st.l,".ms-Button-flexContainer":{position:"relative"}}}},menuItem:Object(K.b)({overflow:"hidden",margin:0,padding:0}),contextMenu:Object(K.b)({minWidth:30,maxWidth:172,paddingTop:"6px",paddingBottom:"6px",margin:0,overflow:"hidden",selectors:{".ms-FocusZone.ms-ContextualMenu.is-open":Object(K.b)({display:"flex",alignContent:"flex-end",alignItems:"flex-end",justifyContent:"flex-end",minWidth:30})}}),calloutStyle:{root:{borderColor:q.a.COMMENTS_GRAY,boxShadow:st.a.LEVEL2}}}})),ct=Object(I.c)((function(){return{root:{margin:"3px",padding:0,paddingLeft:"7px",paddingRight:"7px",border:"1px transparent",color:q.a.GRAY_E,backgroundColor:"transparent",cursor:"pointer",height:"unset",boxSizing:"border-box",textAlign:"left",minWidth:"30px",maxWidth:166,width:"95%"},rootHovered:st.k,rootFocused:st.j,textContainer:{flexGrow:0,flexShrink:0},flexContainer:{justifyContent:"flex-start"},label:{fontSize:"12px",fontWeight:"600",textAlign:"left",fontFamily:"inherit",lineHeight:"20px",maxWidth:122,margin:0,marginLeft:"5px",marginRight:"10px",padding:0,border:0}}}));function lt(t){t&&t.focus()}var pt=s.memo((function(t){var e=ct();return s.createElement(P.a,{componentRef:t.data?lt:void 0,id:t.id,iconProps:{iconName:t.iconName,style:{width:12,height:12,marginTop:"-4px"}},key:t.key,role:"menuitem",ariaLabel:""+t.name,styles:e,"data-is-focusable":!0,onKeyDown:t.onKeyDown,onClick:function(e){t.onClick&&t.onClick(e),t.dismissMenu(e)}},t.name)})),ut=s.memo((function(t){var e=Object(r.__read)(s.useState([]),2),n=e[0],o=e[1],i=at();return s.createElement($.a,{content:t.title,tooltipProps:rt.a},function(t,e,n,o){var r=tt.a.useCallback(dt,t,n,o);return s.createElement(X.a,{id:t.id,ariaLabel:t.ariaLabel,styles:e.iconContextMenuAnchor,onMenuClick:r,menuProps:{ariaLabel:t.ariaLabel,className:e.contextMenu,directionalHint:E.DirectionalHint.bottomRightEdge,gapSpace:2,isBeakVisible:!1,shouldFocusOnMount:!1,calloutProps:{preventDismissOnScroll:!1,styles:e.calloutStyle,finalHeight:1},items:n},menuIconProps:{iconName:Object(ot.a)(7),style:{width:16}},tabIndex:t.tabIndex})}(t,i,n,o))}));function dt(t,e,n,o,r){var i;o.length<1&&r(function(t,e,n,o,r){var i=[];if(o===M.CardContextMenuItem&&r&&r.length>0)return i=r.map((function(o,i){return{id:Q.p({id:t,renderContextType:n},o.id||o.text),key:o.id||o.text,iconName:Object(ot.a)(o.icon),name:o.text,data:0===i,className:e.menuItem,onClick:function(e){return ft(t,o,e)},onKeyDown:function(e){return function(t,e,n,o,r,i){if(Object(nt.b)(i.key)===et.a.ArrowDown&&0===r){var s=n.id||n.text||"MissingKey",a=document.getElementById(Q.p({id:t,renderContextType:o},s));if(i.target===a&&e&&e.length>1){var c=e[1].id||e[1].text,l=document.getElementById(Q.p({id:t,renderContextType:o},c));l&&(l.focus(),i.preventDefault(),i.stopPropagation())}}else Object(nt.b)(i.key)===et.a.Tab&&(i.preventDefault(),i.stopPropagation())}(t,r,o,n,i,e)},onRender:ht}}));if(o===M.ActionBarItem&&r&&r.length>0)return i=r.map((function(o,i){return{id:Q.a({id:t,renderContextType:n},i),key:o.text,iconName:Object(ot.a)(o.icon),name:o.text,data:0===i,className:e.menuItem,onClick:function(e){return ft(t,o,e)},onKeyDown:function(e){return function(t,e,n,o){if(Object(nt.b)(o.key)===et.a.ArrowDown){var r=document.getElementById(Q.a({id:t,renderContextType:n},0));if(o.target===r&&e&&e.length>1){var i=document.getElementById(Q.a({id:t,renderContextType:n},1));i&&(i.focus(),o.preventDefault(),o.stopPropagation())}}else Object(nt.b)(o.key)===et.a.Tab&&(o.preventDefault(),o.stopPropagation())}(t,r,n,e)},onRender:ht}}));return i}(n.parentId,at(),n.renderContextType,n.itemType,n.menuItems)),null===(i=n.onMenuClick)||void 0===i||i.apply(void 0)}function ft(t,e,n){e.onClick(t),n&&n.stopPropagation()}var ht=Object(I.c)((function(t,e){var n=Object(r.__assign)(Object(r.__assign)({},t),{dismissMenu:e});return s.createElement(pt,Object(r.__assign)({},n))})),yt=ut,mt=n(1488),bt={color:q.a.GRAY_H2,fontWeight:"600",alignSelf:"baseline",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",marginLeft:"3px",userSelect:"text",fontFamily:st.g+", "+st.h+", "+st.i+", Arial, Verdana, sans-serif",marginBottom:"1px",fontSize:"14px",lineHeight:"18px",flex:"4 1 auto"},gt=Object(I.c)((function(){return{author:Object(K.b)(bt),authorResolvedPost:Object(K.b)(bt,{color:q.a.GRAY_E}),header:Object(K.b)({display:"flex",direction:"inherit",overflow:"hidden",flexDirection:"row",flexWrap:"nowrap"})}}));var vt,Ct=Object(I.c)((function(t,e){return Object(i.i)().assertConditionTag(!!t.localizationAPI,"LocalizationAPI must be present when rendering context menu",595710280),{id:Q.G({id:t.parentId,renderContextType:e}),parentId:t.parentId,title:t.localizationAPI?t.localizationAPI.getString(123):"",ariaLabel:t.localizationAPI?t.localizationAPI.getString(123):"",onMenuClick:Tt(t),tabIndex:t.isTabbable?0:-1,renderContextType:e,menuItems:t.actionBarItems,itemType:M.ActionBarItem}}),5),Tt=Object(I.c)((function(t){return function(e){t.trySelectPost(),e&&Object(O.f)(e.key)===O.b.ArrowDown&&e.preventDefault()}})),Ot=s.memo((function(t){var e=gt(),n=t.resolved?e.authorResolvedPost:e.author;return s.createElement("div",{className:e.header},s.createElement("div",{className:n},t.authorName),function(t){return!t.contextMenuProps||0===t.contextMenuProps.menuItems.length&&0===t.contextMenuProps.actionBarItems.length?null:s.createElement(yt,Object(r.__assign)({},Ct(t.contextMenuProps,t.renderContextType)))}(t))})),xt=n(22),St=n(508),Pt={fontFamily:"inherit",justifyContent:"center"},Et=Object(I.c)((function(){return{persona:Object(K.b)(Pt),personaResolved:Object(K.b)(Pt),personaRootContainer:Object(K.b)({margin:8,marginLeft:6,position:"absolute",left:"-15px"}),personaContainer:Object(K.b)({margin:6,marginLeft:9,marginRight:3})}})),kt=s.memo((function(t){var e={text:t.authorName,coinSize:20,initialsColor:t.resolved?q.a.FLUENT_RESOLVED:t.authorColor||xt.a.purple,hidePersonaDetails:!0},n=Et();return s.createElement("div",{className:t.isParent?n.personaRootContainer:n.personaContainer,style:t.opacity?{opacity:t.opacity}:void 0},s.createElement(St.a,Object(r.__assign)({},e,{className:t.resolved?n.personaResolved:n.persona})))})),wt=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.styles=void 0,o.cancelDraftButtonKeyDownHandler=o.cancelDraftButtonKeyDownHandler.bind(o),o.cancelDraftButtonClickHandler=o.cancelDraftButtonClickHandler.bind(o),o.styles=Object(Z.b)(),o}return Object(r.__extends)(e,t),e.prototype.cancelDraftButtonClickHandler=function(t){this.props.onCancelDraft(),t.stopPropagation()},e.prototype.cancelDraftButtonKeyDownHandler=function(t){Object(O.f)(t.key)!==O.b.Enter&&Object(O.f)(t.key)!==O.b.Escape||(this.props.onCancelDraft(),t.stopPropagation(),t.preventDefault())},e.prototype.renderDraftCancelButton=function(){return s.createElement($.a,{content:this.props.localizationAPI.getString(15),tooltipProps:rt.a},this.renderDraftCancelButtonInternal())},e.prototype.renderDraftCancelButtonInternal=function(){return s.createElement("div",{className:this.styles.cancelDraftContainer},s.createElement(X.a,{id:Q.r({id:this.props.id,renderContextType:this.context.renderContextType}),styles:this.styles.cancelDraftButton,disabled:!1,onClick:this.cancelDraftButtonClickHandler,onKeyDown:this.cancelDraftButtonKeyDownHandler,iconProps:{iconName:"CancelGlyph"},ariaLabel:this.props.localizationAPI.getString(46)}))},e.prototype.renderRootPersona=function(){if(0===this.props.rootAuthorOpacity)return null;var t={authorName:Object(c.g)(this.props.author),resolved:this.props.isResolvedCard,isParent:!0,authorColor:this.props.authorColor,authorImageURL:this.props.authorImageURL,opacity:this.props.rootAuthorOpacity};return s.createElement(kt,Object(r.__assign)({},t))},e.prototype.renderRootAuthor=function(){if(0===this.props.rootAuthorOpacity)return null;var t={authorName:Object(c.g)(this.props.author),resolved:this.props.isResolvedCard,renderContextType:this.context.renderContextType};return s.createElement("div",{className:this.styles.headerAuthorContainer,style:{opacity:this.props.rootAuthorOpacity}},s.createElement(Ot,Object(r.__assign)({},t)))},e.prototype.render=function(){var t=this,e=[];if(this.props.isDraftCard){var n=Q.r({id:this.props.id,renderContextType:this.context.renderContextType});e.push({element:this.renderDraftCancelButton(),visibility:!0,key:n})}else{if(this.props.anchorText){var o=Q.b({id:this.props.id,renderContextType:this.context.renderContextType});e.push({element:s.createElement("div",{id:o,className:this.styles.anchor},this.props.anchorText),visibility:!0,key:o})}this.props.contextMenuProps&&e.push({element:s.createElement(yt,Object(r.__assign)({},this.props.contextMenuProps)),visibility:!this.props.hideContextMenu,key:this.props.contextMenuProps.id})}var i=e.map((function(e){return s.createElement("div",{key:e.key,className:e.visibility?t.styles.headerItem:t.styles.hiddenHeaderItem},e.element)})),a=1===this.props.rootAuthorOpacity?void 0:{boxShadow:"0px 2px 4px 0px rgba(0, 0, 0, "+.13*(1-this.props.rootAuthorOpacity)+")"};return s.createElement("div",{className:this.styles.headerContainer,style:a},this.renderRootPersona(),this.renderRootAuthor(),i.length?s.createElement("div",{className:this.props.isDraftCard?this.styles.headerRightCornerDraft:this.styles.headerRightCorner},i):void 0)},e.contextTypes=Object(r.__assign)({},mt.a),e}(s.PureComponent);function At(t){var e=t;return void 0!==e.onMentionCreated&&void 0!==e.onMentioneesStillInDraftUpdated&&void 0!==e.peoplePickerProps}!function(t){t[t.ReadOnlyComment=0]="ReadOnlyComment",t[t.DisabledComment=1]="DisabledComment",t[t.DisabledEditor=2]="DisabledEditor"}(vt||(vt={}));var It,Rt,jt=n(5),_t=Object(I.c)((function(){var t;return{selectors:{":focus":{outline:"none"},"& .ql-editor":{boxSizing:"border-box",whiteSpace:"pre-wrap",height:"100%",outline:"none",overflow:"hidden",padding:"0",tabSize:"4",wordWrap:"break-word",userSelect:"text"},"& .ql-clipboard":{left:"-100000px",position:"absolute",top:"50%",height:"1px",userSelect:"text",overflowY:"hidden"},"& .ql-editor p":{margin:0,padding:0,userSelect:"text"},"& .ql-editor em, u, strong, span, a":{userSelect:"text"},"& .ql-editor.ql-blank::before":{color:q.a.GRAY_E,content:"attr(data-placeholder)",fontStyle:"normal",fontFamily:"inherit",fontSize:"12px",marginLeft:p.L()?"1px":void 0,pointerEvents:"none",position:"absolute"},"& .ql-color-blue":{color:"blue",textDecoration:"none",selectors:(t={},t[jt.l]={textDecoration:"underline"},t)}}}})),Dt={boxSizing:"border-box",flexGrow:"1",overflowY:"hidden",position:"relative",margin:0,padding:2,fontFamily:"inherit",fontSize:12,fontWeight:"normal",lineHeight:1.5.toString(),cursor:"text",color:"#333333"},Nt={maxHeight:96,overflowY:"auto",selectors:{"::-webkit-scrollbar":{width:0}}},Mt=Object(K.b)(Dt,Nt,{"-ms-overflow-style":"none","scrollbar-width":"none"}),Bt={paddingBottom:"5px"},Lt={minHeight:22,padding:10,paddingTop:"2px",paddingBottom:"4px",borderRadius:st.d},Ht={pointerEvents:"none",cursor:"default",color:q.a.GRAY_E};!function(t){t[t.lineHeight=18]="lineHeight",t[t.maxHeight=4*t.lineHeight+4]="maxHeight",t[t.verticalOffset=t.maxHeight-t.lineHeight-2]="verticalOffset"}(Rt||(Rt={}));var Ft={},Ut=Rt.maxHeight-.75*Rt.lineHeight+"px",zt={maxHeight:Rt.maxHeight},Kt={position:"absolute",left:0,top:Rt.verticalOffset,right:0,bottom:0,backgroundImage:"linear-gradient(rgba(255,255,255,0) 0%, white)",visibility:"hidden",selectors:(It={},It[jt.l]={visibility:"hidden !important"},It)},Vt=Object(I.c)((function(){var t,e={backgroundColor:it.a.gray20,borderRadius:"2px",boxDecorationBreak:"clone",color:it.a.gray180,cursor:"default",fontFamily:'"Segoe UI", "Segoe UI Web", Arial, Verdana, sans-serif',fontSize:"12px",fontWeight:"500",padding:"1px 3px",pointerEvents:"none",textDecoration:"none",selectors:(t={},t[jt.l]={textDecoration:"underline"},t)},n=Object(K.b)(e,{"-webkit-box-decoration-break":"clone"});return{selectors:{"& .atmention":n,"& .current-user > .atmention":Object(K.b)(n,{color:p.k()?Object(R.a)().shade10:Object(R.a)().primary,backgroundColor:p.k()?Object(R.a)().tint40:void 0,fontWeight:"600"})}}})),qt=Object(I.c)((function(){return{selectors:{"& .hyperlink":{wordBreak:"break-all"}}}})),Wt={selectors:{":focus":{outline:"none"}}},Gt=Object(I.c)((function(t,e){var n={};n=t?Lt:Bt;var o=e?Mt:Dt;return{EditorContainerEditing:Object(K.b)(o,n,_t(),Vt(),qt()),EditorContainerFullContent:Object(K.b)(o,Ft,_t(),Vt(),qt()),EditorContainerTruncated:Object(K.b)(o,Ft,zt,_t(),Vt(),qt()),EditorDisabled:Object(K.b)(o,Ht,_t(),Vt(),qt()),EditorPlaceholder:Object(K.b)(o,Ht,Lt,_t(),Vt(),qt()),InnerEditorDisableFocusOutline:Object(K.b)(Wt),EditorTruncationOverlay:Object(K.b)(Kt,Wt)}})),Yt=n(667),Qt=n(1612),Jt=n.n(Qt),$t=Jt.a.import("delta"),Xt=Jt.a.import("parchment"),Zt=Jt.a.import("blots/inline"),te=(Jt.a.import("formats/link"),Jt.a.import("modules/clipboard")),ee=Jt.a,ne=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.create=function(n){var o=t.create.call(this,n);return p.m()?o.setAttribute("class","atmention"):(o.setAttribute("class","ql-color-blue"),o.setAttribute("style","pointer-events: none; cursor: default;")),o.setAttribute(e.getDataAttributeName(),n),o.setAttribute("tabIndex","-1"),o.setAttribute("disabled","disabled"),o.setAttribute("spellcheck","false"),o},e.formats=function(t){return t.getAttribute(e.getDataAttributeName())||void 0},e.prototype.format=function(n,o){"atmention"===n&&o?this.domNode.setAttribute(e.getDataAttributeName(),o):t.prototype.format.call(this,n,o)},e.prototype.formats=function(){var n=t.prototype.formats.call(this);return n.atmention=e.formats(this.domNode),n},e.getDataAttributeName=function(){return"data-"+e.blotName},e.blotName="atmention",e.tagName="A",e}(Zt),oe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.create=function(n){var o=JSON.parse(n),r=!!o.editable;delete o.editable;var i=JSON.stringify(o),s=t.create.call(this,i);return s.setAttribute(e.getDataAttributeName(),i),s.setAttribute("href",o.url),s.setAttribute("contenteditable",r),s.setAttribute("class",e.blotName),s.setAttribute("className",e.className),s.setAttribute("target","_blank"),s.setAttribute("title",o.url),s.setAttribute("tabindex","-1"),s.addEventListener("click",e.onHyperlinkClicked),s},e.onHyperlinkClicked=function(t){he(t)&&Object(i.i)().createActivityObject("DraftHyperlinkClicked",Object(i.j)(i.g.GlobalAPI),i.a.OnSuccess).successTag(593064396)},e.formats=function(t){var e=t.getAttribute(this.getDataAttributeName());if(e)return e;var n=t.href;return n?JSON.stringify({url:n,editable:!0}):void 0},e.prototype.format=function(n,o){n===e.blotName&&o?this.domNode.setAttribute(e.getDataAttributeName(),o):t.prototype.format.call(this,n,o)},e.prototype.formats=function(){var n=t.prototype.formats.call(this);return n[e.blotName]=e.formats(this.domNode),n},e.getDataAttributeName=function(){return"data-hyperlink"},e.blotName="hyperlink",e.tagName="a",e.className="hyperlink",e}(Zt);function re(t,e){var n,o,r;if(null===(r=null===(o=null===(n=e)||void 0===n?void 0:n.ops[0])||void 0===o?void 0:o.attributes)||void 0===r?void 0:r.atmention)return e;var s=oe.formats(t);return s&&t.text?(Object(i.i)().createActivityObject("HyperlinkPasted",Object(i.j)(i.g.GlobalAPI),i.a.OnSuccess).successTag(593035296),new $t([{insert:t.text,attributes:{hyperlink:s}}])):e}var ie=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.isAtmentionSupported=n.isAtmentionSupported,o.removeAtFormat=o.removeAtFormat.bind(o),o.pasteMentionHandler=o.pasteMentionHandler.bind(o),o}return Object(r.__extends)(e,t),e.prototype.removeAtFormat=function(t,e){this.quill.formatText(t,e,"optional",!1),this.quill.formatText(t,e,"atmention",!1)},e.prototype.pasteMentionHandler=function(){var t=window.getSelection(),e=t&&t.anchorNode?t.anchorNode.parentNode:null,n=t&&t.focusNode?t.focusNode.parentNode:null,o={startBlot:Xt.find(e),endBlot:e===n?void 0:Xt.find(n)};return o.startBlot&&"atmention"===o.startBlot.statics.blotName&&this.removeAtFormat(o.startBlot.offset(this.quill.scroll),o.startBlot.length()),o.endBlot&&"atmention"===o.endBlot.statics.blotName&&this.removeAtFormat(o.endBlot.offset(this.quill.scroll),o.endBlot.length()),!0},e.prototype.onPaste=function(t){var n=this;if(!t.defaultPrevented&&this.quill.isEnabled())try{e.pasteOperationInProgress=!0,this.pasteMentionHandler();var o=this.quill.getSelection(),r=(new $t).retain(o.index),s=this.quill.scrollingContainer.scrollTop;this.container.focus();var a=document.createRange(),c=window.getSelection();a.setStart(this.container,0),a.collapse(!0),c&&(Object(i.i)().assertConditionTag(!!c,"Expected a selection!",595854800),c.removeAllRanges(),c.addRange(a)),this.quill.selection.update("silent"),setTimeout((function(){try{r=r.concat(n.convert()).delete(o.length),r=n.isAtmentionSupported?new $t(r.map((function(t){return t.insert&&(t.attributes&&t.attributes.optional&&delete t.attributes.optional,!t.attributes||!t.attributes.atmention||ge(JSON.parse(t.attributes.atmention).fullName,t.insert.slice(1))&&"UnknownEmail"!==JSON.parse(t.attributes.atmention).email||delete t.attributes.atmention),t}))):new $t(r.map((function(t){return t.insert&&t.attributes&&delete t.attributes.atmention,t}))),n.quill.updateContents(r,"user"),n.quill.setSelection(r.length()-o.length,"silent"),n.quill.scrollingContainer.scrollTop=s,n.quill.focus()}catch(t){Object(i.i)().assertConditionTag(!1,"CommentClipboard paste delta scrubbing failed.",593035297)}finally{e.pasteOperationInProgress=!1}}),1)}catch(t){Object(i.i)().assertConditionTag(!1,"CommentClipboard preparation for paste failed.",593035298),e.pasteOperationInProgress=!1}},e.pasteOperationInProgress=!1,e}(te),se=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.create=function(n){var o=t.create.call(this,n);if(o.setAttribute(e.getDataAttributeName(),n),p.m()){var r="string"==typeof n?JSON.parse(n):n;r.atmention&&r.atmention.isCurrentUser&&o.setAttribute("class","current-user")}return o},e.formats=function(t){return t.getAttribute(e.getDataAttributeName())||void 0},e.prototype.format=function(n,o){"optional"===n&&o?this.domNode.setAttribute(e.getDataAttributeName(),o):t.prototype.format.call(this,n,o)},e.prototype.formats=function(){var n=t.prototype.formats.call(this);return n.optional=e.formats(this.domNode),n},e.getDataAttributeName=function(){return"data-"+e.blotName},e.blotName="optional",e.tagName="SPAN",e}(Zt),ae=n(165);p.d()&&ee.register(oe),ee.register(ne),ee.register(se),ee.register("modules/clipboard",ie,!0);var ce=Object(F.a)((function(){var t=[];return p.d()&&t.push("hyperlink"),t.push("atmention","optional"),p.R()&&t.push("bold","italic","underline","strike"),t})),le=function(){function t(t){var e=document.createElement("div");e.id=t,e.style.display="none",document.body.appendChild(e),this.quillInstance=new ee("#"+t,{formats:ce(),modules:{clipboard:{isAtmentionSupported:!0}}})}return t.prototype.getQuill=function(){return this.quillInstance},t}();function pe(t){var e=Yt.b?Object(i.i)().createActivityObject("GetQuillFromOfficeDelta",Object(i.j)(i.g.GlobalAPI),i.a.None):void 0,n=JSON.parse(t),o={},r=p.R(),s=n.ops.map((function(t){if(void 0!==t.insert){var n={};if(n.insert=t.insert,t.attributes){if(n.attributes=t.attributes,n.attributes.atmention&&(n.attributes.atmention=JSON.stringify(t.attributes.atmention)),n.attributes.link&&p.d()&&(n.attributes.hyperlink=JSON.stringify({url:t.attributes.link}),delete n.attributes.link),p.d()||delete n.attributes.link,n.attributes.weight){if(r&&!n.attributes.atmention){var o=parseInt(n.attributes.weight,10);Object(i.i)().assertConditionTag(o>=700,"weight attribute less than 700.",591192854),n.attributes.bold=o>=700}else Object(i.i)().assertConditionTag(r,"Weight attribute present when rich text feature gate is off",591192855);delete n.attributes.weight}n.attributes.strikethrough&&(r&&!n.attributes.atmention?n.attributes.strike=n.attributes.strikethrough:Object(i.i)().assertConditionTag(r,"strikethrough attribute present when rich text feature gate is off",591192856),delete n.attributes.strikethrough),n.attributes.italic&&n.attributes.atmention&&delete n.attributes.italic,n.attributes.underline&&n.attributes.atmention&&delete n.attributes.underline}return t.optional&&(n.attributes||(n.attributes={}),n.attributes.optional=JSON.stringify(t.optional)),n}e&&e.failTag(595194440,-2130957543),Object(i.i)().assertConditionTag(!1,"Translation Error: op in office delta is not insert",i.h.reserveTag(595194441))}));return e&&e.successTag(595194442),s.length?(o.ops=s,JSON.stringify(o)):JSON.stringify(new $t)}var ue=void 0;function de(t,e,n,o){var r=(ue||((ue=new le("CommentsDisplayTextTranslationQuill").getQuill()).disable(),ue.root.setAttribute("role","textbox"),ue.root.setAttribute("aria-readonly","true")),ue);if(n){var s=pe(n);r.setContents(JSON.parse(s),"api")}var a=r.root.cloneNode(!0);a.addEventListener("click",fe),r.setText(""),a?(e.firstChild?e.replaceChild(a,e.firstChild):e.appendChild(a),e.firstElementChild&&(e.firstElementChild.setAttribute("id",t),void 0!==o&&e.firstElementChild.setAttribute("aria-label",o))):Object(i.i)().assertConditionTag(!1,"Clone of Quill root node should be defined",595658959)}function fe(t){he(t)&&Object(i.i)().createActivityObject("PostedHyperlinkClicked",Object(i.j)(i.g.GlobalAPI),i.a.OnSuccess).successTag(593064397)}function he(t){return t.target.tagName===oe.tagName&&t.target.className===oe.className&&"false"===t.target.contentEditable}function ye(t,e,n,o){var s,a="#"+Object(Q.u)(t.id);if(function(t,e,n,o){var r=t.root;if(!r)return void Object(i.i)().assertConditionTag(!1,"root element on Quill is undefined",595891799);r.spellcheck=p.T(),t.history.options.delay=500,r.id=e,r.setAttribute("aria-haspopup","true"),r.setAttribute("role","textbox"),r.setAttribute("aria-readonly","false"),o&&r.setAttribute("aria-describedby",o);n&&r.setAttribute("aria-label",n);var s=t.clipboard&&t.clipboard.container;s&&s.setAttribute("aria-hidden","true")}(s=t.placeholder?new ee(a,{placeholder:t.placeholder,formats:ce(),scrollingContainer:o,modules:Object(r.__assign)(Object(r.__assign)({},e),{clipboard:{isAtmentionSupported:At(t),matchers:p.d()?[["a",re]]:void 0}})}):new ee(a,{formats:ce(),scrollingContainer:o,modules:Object(r.__assign)(Object(r.__assign)({},e),{clipboard:{isAtmentionSupported:At(t),matchers:p.d()?[["a",re]]:void 0}})}),t.id,t.accessibilityLabel,t.accessibilityDescribedBy),t.defaultValue){var c=pe(t.defaultValue);s.setContents(JSON.parse(c),"api")}s.enable();var l=s.getLength();return s.setSelection(l-1,0),s.on("text-change",(function(t,e,o){n(t,e,o),p.d()&&function(t,e){if(2===e.ops.length&&e.ops[1].insert&&e.ops[1].attributes&&e.ops[1].attributes.hyperlink){var n=window.getSelection(),o=n&&n.anchorNode?n.anchorNode.parentNode:null;if(!o)return;var r=Xt.find(o);if(!r)return;be(t,r.offset(t.scroll),r.length())}if(2===e.ops.length&&e.ops[0].retain&&(u=e.ops[1].insert,/\s/.test(u))){var i=e.ops[0].retain,s=t.getText().substr(0,i).match(/https?:\/\/[^\s]+[\s]*$/);if(!s)return;var a=s[0],c=s[0].trimRight(),l=[];i>a.length&&l.push({retain:i-a.length});var p={url:c,editable:!0};l.push({retain:c.length,attributes:{hyperlink:JSON.stringify(p)}}),1===l.length&&l[0].retain?be(t,0,l[0].retain):2===l.length&&l[0].retain&&l[1].retain&&be(t,l[0].retain,l[1].retain),t.updateContents(new $t(l))}var u}(s,t)})),s}function me(t,e){if(t&&p.d())for(var n=t.getElementsByClassName(oe.className),o=0;o<n.length;o++)n[o].setAttribute("contenteditable",e?"false":"true")}function be(t,e,n){t.formatText(e,n,oe.blotName,!1)}function ge(t,e){var n=e.trim().split(" "),o=t.trim().split(" ");return n.every((function(t){return o.indexOf(t)>=0}))}function ve(t){var e=!1;return t.forEach((function(t){e=!!t.delete&&t.delete.valueOf()>1})),e}function Ce(t,e){var n=document.getElementById(t);n&&(n.setAttribute("data-placeholder",e),p.cb()&&n.setAttribute("aria-placeholder",e))}function Te(t){var e=new Map;t&&t.ops&&t.ops.forEach((function(t){if(t.attributes){var n=void 0;if("string"==typeof t.attributes.atmention)try{n=JSON.parse(t.attributes.atmention)}catch(t){return void Object(i.i)().assertConditionTag(!1,"Failed to parse atmention attributes",595194448)}else n=t.attributes.atmention;n&&e.set(n.email,{UserId:n.email,Provider:ae.b,DisplayName:n.fullName})}}));var n=[];return e.forEach((function(t){return n.push(t)})),n}function Oe(t){var e=new Set;return t&&t.ops&&t.ops.forEach((function(t){if(t.attributes){var n=void 0;if("string"==typeof t.attributes.atmention)try{n=JSON.parse(t.attributes.atmention)}catch(t){return void Object(i.i)().assertConditionTag(!1,"Failed to parse atmention attributes",594921041)}else n=t.attributes.atmention;n&&e.add(n.email)}})),e}var xe=function(t){function e(e){var n=t.call(this,e)||this;return n.isRestoreInProgress=!1,n.keyboardBindings={tab:{key:O.c.Tab,handler:function(){return n.tabKeyHandler()}},shiftTab:{key:O.c.Tab,shiftKey:!0,handler:function(){return n.tabKeyHandler()}},enter:{key:O.c.Enter,handler:function(){return n.enterNewline(!1)}},back:{key:O.c.Backspace,handler:function(){return n.deleteHandler(!1)}},delete:{key:O.c.Delete,handler:function(){return n.deleteHandler(!0)}},commitWithCtrl:{key:O.c.Enter,shortKey:!0,handler:function(){return n.handleCommitKeys()}},newlineWithShift:{key:O.c.Enter,shiftKey:!0,handler:function(){return n.enterNewline(!0)}}},n.onFocusHandler=n.onFocusHandler.bind(n),n.onKeyDownHandler=n.onKeyDownHandler.bind(n),n.onKeyUpHandler=n.onKeyUpHandler.bind(n),n.onKeyPressHandler=n.onKeyPressHandler.bind(n),n.onTextChangedHandler=n.onTextChangedHandler.bind(n),n.deleteHandler=n.deleteHandler.bind(n),n.removeAtFormat=n.removeAtFormat.bind(n),n.tabKeyHandler=n.tabKeyHandler.bind(n),n.onBlurHandler=n.onBlurHandler.bind(n),n.setEditorRef=n.setEditorRef.bind(n),n.enterNewline=n.enterNewline.bind(n),n.handleCommitKeys=n.handleCommitKeys.bind(n),n.handleEscapeKeys=n.handleEscapeKeys.bind(n),n}return Object(r.__extends)(e,t),e.prototype.componentDidUpdate=function(t,e){var n=document.getElementById(Object(Q.u)(this.props.id));if(n){var o=n.getElementsByClassName("ql-editor")[0];o?(this.props.accessibilityLabel&&o.setAttribute("aria-label",this.props.accessibilityLabel.toString()),this.props.accessibilityDescribedBy&&o.setAttribute("aria-describedby",this.props.accessibilityDescribedBy.toString()),o.setAttribute("aria-readonly","false")):Object(i.i)().assertConditionTag(!1,"quillEditorDiv missing in CommentEditor",593367200)}this.props.initialDraftContent&&this.props.initialDraftContent!==t.initialDraftContent&&this.restoreDraftIfExists();var r=this.props.placeholder;r&&t.placeholder!==r&&Ce(this.props.id,r)},e.prototype.componentDidMount=function(){var t,e;null===(e=(t=this.props).onMount)||void 0===e||e.call(t),this.initializeQuill(),this.restoreDraftIfExists(),this.props.componentRef(this),me(this.editorRef,!1)},e.prototype.componentWillUnmount=function(){var t,e;null===(e=(t=this.props).onUnmount)||void 0===e||e.call(t)},e.prototype.onTextChangedHandler=function(t,e,n){var o,r,i=this;if("user"===n&&!this.myQuill.history.ignoreChange)if(ve(t)){var s=this.myQuill.getContents(),a=0;s.forEach((function(t){t.attributes&&t.attributes.atmention&&(ge(JSON.parse(t.attributes.atmention).fullName,t.insert.slice(1))||i.removeAtFormat(a,t.insert.length)),a+=t.insert.length}))}else{var c=window.getSelection(),l=c&&c.anchorNode?c.anchorNode.parentNode:null,u=Xt.find(l);setTimeout((function(){var e=i.myQuill.getSelection();if(u&&"atmention"===u.statics.blotName){var n=u.offset(i.myQuill.scroll);if(e.index===n+1)i.removeAtFormat(n,1);else if(e.index<n+u.length()&&e.index>n)i.removeAtFormat(n,u.length());else if(e.index===n+u.length()){t.filter((function(t){return"string"==typeof t.insert})).length&&i.removeAtFormat(e.index-1,1)}}}),0)}if(this.props.onTextChange&&this.props.onTextChange(this.myQuill.getText()),p.mb()){var d=this.isEditorEmpty();this.props.isDraftEmpty!==d&&(null===(r=(o=this.props).onDraftEmptinessChanged)||void 0===r||r.call(o,d))}},e.prototype.restoreDraftIfExists=function(){var t=this,e=this.props.initialDraftContent;if(e){this.isRestoreInProgress=!0;var n=e.editorCursorPosition,o=e.editorContent;n||(Object(i.i)().assertConditionTag(!1,"Cursor position promise should be defined on Web, defaulting to resolve(undefined).",593367201),n=Promise.resolve(void 0)),Promise.all([o,n]).then((function(e){var n=Object(r.__read)(e,2),o=n[0],i=n[1];o&&(t.setContents(o,i),t.isRestoreInProgress=!1)})).catch((function(t){Object(l.b)(t)?Object(i.i)().assertConditionTag(!1,t.message,593367202):Object(i.i)().assertConditionTag(!1,"Unknown error in restoreDraftIfExists "+t,593367203)}))}},e.prototype.setEditorRef=function(t){this.editorRef=t},e.prototype.removeAtFormat=function(t,e){try{this.myQuill.formatText(t,e,{optional:!1,atmention:!1})}catch(t){"NotFoundError"===t.message&&(Object(i.i)().assertConditionTag(!1,"Error removing At Format",591988067),this.clear())}},e.prototype.getChunkBoundaryForDelete=function(t,e,n,o){var r=this.myQuill.getText(n.index,1),i=this.myQuill.getText(n.index-1,1),s=this.myQuill.getText(n.index,n.length),a=-1,c=-1,l=0===n.length,p=l&&" "===i,u=l&&" "===r||!this.myQuill.getFormat(n.index,1).atmention;if(""!==s&&n.index+n.length<=t+e.length||!u&&!p){if(""!==s&&s.indexOf(" ")>=0)return;return a=e.lastIndexOf(" ",n.index-t-1),c=e.indexOf(" ",n.index-t),{chunkStart:a<0?c<0?t:t+1:a+t,chunkEnd:c<0?t+e.length-1:a<0?c+t:c+t-1}}if(l){if(u)return o?(c=e.indexOf(" ",n.index-t+1),{chunkStart:n.index,chunkEnd:c<0?t+e.length-1:c+t}):(a=e.lastIndexOf(" ",n.index-t-1),c=e.indexOf(" ",n.index-t),{chunkStart:a<0?c<0?t:t+1:a+t,chunkEnd:a<0&&" "===r?n.index:n.index-1});if(p)return o?(c=e.indexOf(" ",n.index-t),{chunkStart:n.index-1,chunkEnd:c<0?t+e.length-1:c+t}):{chunkStart:(a=e.lastIndexOf(" ",n.index-t-2))<0?t+1:a+t+1,chunkEnd:n.index-1}}},e.prototype.deleteHandler=function(t){var e=window.getSelection(),n=e&&e.anchorNode?e.anchorNode.parentNode:null,o=e&&e.focusNode?e.focusNode.parentNode:null,r={startBlot:Xt.find(n),endBlot:n===o?void 0:Xt.find(o)},i=e&&e.anchorNode?Xt.find(e.anchorNode.previousSibling):null;if(i&&"atmention"===i.statics.blotName&&e&&0===e.anchorOffset&&(r.startBlot=i),p.d()&&r.startBlot&&r.startBlot.statics.blotName===oe.blotName){if(e&&"Caret"===e.type&&e.anchorNode&&e.anchorNode.textContent&&e.anchorOffset===e.anchorNode.textContent.length){var s=this.myQuill.getSelection();if(!s)return!0;var a=e.anchorNode.textContent.length,c=s.index;return this.myQuill.formatText(c-a,a,{optional:!1,hyperlink:!1}),!1}be(this.myQuill,r.startBlot.offset(this.myQuill.scroll),r.startBlot.length()),r.endBlot&&r.endBlot.statics.blotName===oe.blotName&&be(this.myQuill,r.endBlot.offset(this.myQuill.scroll),r.endBlot.length())}if(r.startBlot){if(r.endBlot)return"atmention"===r.startBlot.statics.blotName&&this.removeAtFormat(r.startBlot.offset(this.myQuill.scroll),r.startBlot.length()),"atmention"===r.endBlot.statics.blotName&&this.removeAtFormat(r.endBlot.offset(this.myQuill.scroll),r.endBlot.length()),!0;var l=r.startBlot.offset(this.myQuill.scroll),u=this.myQuill.getSelection(),d=this.myQuill.getText(l,r.startBlot.length());if("atmention"!==r.startBlot.statics.blotName&&0===u.length&&t&&this.myQuill.getFormat(u.index,1).atmention){var f=this.myQuill.getFormat(u.index+1).atmention.fullName;f&&this.removeAtFormat(u.index,f.length+1)}if("atmention"===r.startBlot.statics.blotName){if(u.index===l)return 0===u.length&&!t||(this.removeAtFormat(r.startBlot.offset(this.myQuill.scroll),r.startBlot.length()),!0);var h=this.getChunkBoundaryForDelete(l,d,u,t);if(h)return h.chunkStart>h.chunkEnd||(this.myQuill.deleteText(h.chunkStart,h.chunkEnd-h.chunkStart+1),!1);this.removeAtFormat(l,r.startBlot.length())}}return!0},e.prototype.tabKeyHandler=function(){return!1},e.prototype.getQuillScrollingContainer=function(){return this.props.isHeightBounded?"#"+Object(Q.v)(this.props.id):this.props.scrollingContainerId?"#"+this.props.scrollingContainerId:void 0},e.prototype.initializeQuill=function(){var t={keyboard:{bindings:this.keyboardBindings}};this.myQuill=ye(this.props,t,this.onTextChangedHandler,this.getQuillScrollingContainer())},e.prototype.onKeyUpHandler=function(t){Object(O.f)(t.key)===O.b.Control&&me(this.editorRef,!1)},e.prototype.onKeyDownHandler=function(t){Object(O.f)(t.key)===O.b.Control&&me(this.editorRef,!0),Object(O.f)(t.key)===O.b.Escape&&this.handleEscapeKeys()&&t.stopPropagation(),this.props.onKeyDown&&this.props.onKeyDown(t)},e.prototype.onKeyPressHandler=function(t){},e.prototype.enterNewline=function(t){var e=this;if(!this.myQuill)return Object(i.i)().assertConditionTag(!1,"this.myQuill should always be defined if in keyboard handler",593367232),!1;var n=function(){return e.myQuill.insertText(e.myQuill.getSelection().index,"\n"),!1},o=window.getSelection(),r=o&&o.anchorNode?o.anchorNode.parentNode:null,s=Xt.find(r);if(s&&"atmention"===s.statics.blotName){var a=s.offset(this.myQuill.scroll),c=this.myQuill.getSelection();return c.index===a||c.index===a+s.length()||this.removeAtFormat(s.offset(this.myQuill.scroll),s.length()),n()}return!t||n()},e.prototype.handleCommitKeys=function(){this.props.onCommitRequested&&!this.isEditorEmpty()&&this.props.onCommitRequested()},e.prototype.handleEscapeKeys=function(){return!!this.props.onEscapeRequested&&(this.props.onEscapeRequested(),!0)},e.prototype.onFocusHandler=function(t){if(this.editorRef){var e=document.activeElement;this.editorRef.contains(e)&&this.editorRef!==e||this.focus(),this.props.onFocus&&this.props.onFocus(),t.stopPropagation()}},e.prototype.onBlurHandler=function(t){var e=t.relatedTarget||document.activeElement;if(this.props.onEditorBlur&&!ie.pasteOperationInProgress&&e!==this.editorRef&&t.target!==this.editorRef){var n=this.isEditorEmpty();e&&n?this.props.onEditorBlur(!n,e.id):this.props.onEditorBlur(!n,void 0)}},e.prototype.getEditorClass=function(){return Gt(this.props.useReplyBoxStyling,this.props.isHeightBounded).EditorContainerEditing},e.prototype.isEditorEmpty=function(){return!(!this.myQuill||!this.myQuill.editor.isBlank())},e.prototype.setContents=function(t,e){if(this.myQuill){var n=pe(t),o=JSON.parse(n);this.myQuill.setContents(o);var r=void 0!==e?e:this.myQuill.getLength();this.myQuill.setSelection(r,0,"api")}},e.prototype.getContentsAsync=function(){var t=this;return this.isRestoreInProgress&&this.props.initialDraftContent?this.props.initialDraftContent.editorContent:new Promise((function(e,n){if(t.myQuill){var o=t.myQuill.getContents();e((r=JSON.stringify(o),s=Yt.b?Object(i.i)().createActivityObject("GetOfficeDeltaFromQuill",Object(i.j)(i.g.GlobalAPI),i.a.None):void 0,a={},(c=JSON.parse(r).ops.map((function(t){if(void 0!==t.insert){var e={};return e.insert=t.insert,t.attributes&&(t.attributes.optional&&("string"==typeof t.attributes.optional?e.optional=JSON.parse(t.attributes.optional):e.optional=t.attributes.optional),e.attributes={},t.attributes.atmention&&("string"==typeof t.attributes.atmention?e.attributes.atmention=JSON.parse(t.attributes.atmention):e.attributes.atmention=t.attributes.atmention),p.d()&&t.attributes.hyperlink&&("string"==typeof t.attributes.hyperlink?e.attributes.link=JSON.parse(t.attributes.hyperlink).url:e.attributes.link=t.attributes.hyperlink.url),p.R()&&!t.attributes.atmention&&(t.attributes.bold&&(e.attributes.weight=700),t.attributes.strike&&(e.attributes.strikethrough=t.attributes.strike),t.attributes.italic&&(e.attributes.italic=t.attributes.italic),t.attributes.underline&&(e.attributes.underline=t.attributes.underline))),e}s&&s.failTag(595194443,-2130957544),Object(i.i)().assertConditionTag(!1,"Translation Error: op in quill delta is not insert",i.h.reserveTag(595194444))}))).length?(a.ops=c,s&&s.successTag(595194445),JSON.stringify(a)):(s&&s.failTag(595194446,-2130957544),Object(i.i)().assertConditionTag(!1,"Translation Error: Quill Delta should never have an empty operation",i.h.reserveTag(595194447)),JSON.stringify(new $t))))}else n(new l.a(_.h,-2130957550));var r,s,a,c}))},e.prototype.getCursorPositionAsync=function(){var t=this;return this.isRestoreInProgress&&this.props.initialDraftContent?this.props.initialDraftContent.editorCursorPosition||Promise.resolve(void 0):new Promise((function(e,n){var o=t.myQuill?t.myQuill.getSelection():void 0;e(o?o.index:void 0)}))},e.prototype.clear=function(){var t;null===(t=this.myQuill)||void 0===t||t.setText("")},e.prototype.blur=function(){var t;null===(t=this.myQuill)||void 0===t||t.blur()},e.prototype.focus=function(){var t;null===(t=this.myQuill)||void 0===t||t.focus()},e.prototype.setSelection=function(t,e){var n;null===(n=this.myQuill)||void 0===n||n.setSelection(t,e)},e.prototype.getDisplayMode=function(){return this.props.displayMode},e.prototype.renderAdditionalEditorContent=function(){},e.prototype.render=function(){var t=this.getEditorClass(),e=Gt();return s.createElement("div",{className:t,id:Object(Q.v)(this.props.id)},s.createElement("div",{tabIndex:-1,ref:this.setEditorRef,className:e.InnerEditorDisableFocusOutline,id:Object(Q.u)(this.props.id),onKeyDown:this.onKeyDownHandler,onKeyUp:this.onKeyUpHandler,onKeyPress:this.onKeyPressHandler,onFocus:this.onFocusHandler,onBlur:this.onBlurHandler}),this.renderAdditionalEditorContent())},e}(s.PureComponent),Se=xe,Pe=n(396),Ee=function(t){function e(e){var n=t.call(this,e)||this;return n.state={error:null},n.setContentRef=n.setContentRef.bind(n),n.setTruncationRef=n.setTruncationRef.bind(n),n.styles=Gt(),n}return Object(r.__extends)(e,t),e.prototype.componentDidMount=function(){this.tryUpdateComponent()},e.prototype.componentDidUpdate=function(t,e){this.tryUpdateComponent(t)},e.prototype.tryUpdateComponent=function(t){var e=this;requestAnimationFrame((function(){if(p.m())try{e.updateComponent(t)}catch(t){e.setState({error:t})}else e.updateComponent(t)}))},e.prototype.updateComponent=function(t){this.contentRef&&(t&&this.props.content===t.content?this.props.showFullContent!==t.showFullContent&&this.updateTruncationUI():(de(this.props.id,this.contentRef,this.props.content,this.props.viewerMode===vt.DisabledEditor?void 0:this.props.accessibilityLabel),this.updateTruncationUI()),!this.props.placeholder||t&&t.placeholder===this.props.placeholder||Ce(this.props.id,this.props.placeholder))},e.prototype.setContentRef=function(t){this.contentRef=t},e.prototype.setTruncationRef=function(t){this.truncationRef=t},e.prototype.updateTruncationUI=function(){if(this.props.viewerMode!==vt.DisabledEditor)if(this.contentRef){var t=!this.props.showFullContent&&!!this.truncationRef&&(this.props.content&&Object(Pe.d)(this.props.content).length>100||this.contentRef.offsetHeight>Rt.maxHeight);this.contentRef.style.maxHeight=t?Ut:"none",this.truncationRef&&(this.truncationRef.style.visibility=t?"visible":"hidden")}else Object(i.i)().assertConditionTag(!1,"contentRef should be defined",595658961)},e.prototype.getEditorClass=function(){return this.props.viewerMode===vt.DisabledEditor?this.styles.EditorPlaceholder:this.props.viewerMode===vt.DisabledComment?this.styles.EditorDisabled:this.props.showFullContent?this.styles.EditorContainerFullContent:this.styles.EditorContainerTruncated},e.prototype.renderTruncationOverlay=function(t){return this.props.viewerMode===vt.DisabledEditor||!1!==this.props.showFullContent?null:s.createElement("div",{id:Object(Q.S)(t),className:Gt().EditorTruncationOverlay,ref:this.setTruncationRef})},e.prototype.render=function(){if(this.state.error&&p.m())throw this.state.error;var t=this.getEditorClass();return s.createElement("div",{className:t,id:Object(Q.v)(this.props.id)},s.createElement("div",{ref:this.setContentRef,className:this.styles.InnerEditorDisableFocusOutline,id:Object(Q.u)(this.props.id)}),this.renderTruncationOverlay(this.props.id))},e}(s.PureComponent),ke=n(56),we=n(454),Ae=n(349),Ie=n(640),Re=n(415),je=n(317);var _e,De,Ne,Me,Be=n(124),Le=n(133),He=((_e={})[Be.a.Android]="Android",_e[Be.a.Mac]="Mac",_e[Be.a.Web]="Web",_e[Be.a.Windows]="Win32",_e[Be.a.iOS]="iOS",_e),Fe=((De={})[Be.a.Android]="OfficeAndroid",De[Be.a.Mac]=void 0,De[Be.a.Web]="OfficeWebApps",De[Be.a.Windows]=void 0,De[Be.a.iOS]="OfficeiOS",De),Ue=void 0,ze=function(t){function e(e){var n=t.call(this,e)||this;return n.configureLPP=function(t){try{if(t&&!Ue){var e=(o=Object(i.i)(),s=o.getMetadata(),{clientType:Fe[Object(Le.a)()],hostAppName:s.appName,hostAppPlatform:He[Object(Le.a)()],hostAppRing:s.releaseAudienceGroup||s.ring||s.releaseAudience,hostAppVersion:s.appVersion});t.initializeLivePersonaPicker("ACCOUNT_IDENTIFIER",Object(r.__assign)(Object(r.__assign)({},e),{clientCorrelationId:Object(i.i)().getMetadata().sessionId,refreshAuthToken:n.refreshAuthToken,getHostAppSuggestions:n.enableOfflineModeForTesting()?Re.b:void 0,offline:n.enableOfflineModeForTesting()}))}Ue=t.getLivePersonaPickerContainer("ACCOUNT_IDENTIFIER")}catch(t){Object(i.i)().assertConditionTag(!1,"Unknown error in configureLPP",595637921)}var o,s},n.renderLivePersonaPicker=function(){return Ue?s.createElement(Ue,{inputId:n.props.target?n.props.target:"",strings:n.state.peoplePickerStrings,isOpen:n.props.inAtMentionMode,maxHeight:400,maxWidth:250,onSuggestionSelected:n.props.onSuggestionSelected,onShow:n.props.onShow,onDismiss:n.props.onDismiss,componentRef:n.onPeoplePickerRef}):null},n.renderBasicMentionsPicker=function(){return Object(i.i)().assertConditionTag(!!n.props.peoplePickerProps.pickerLocalizationDetails&&function(t){return void 0!==t.searchDirectory}(n.props.peoplePickerProps.pickerLocalizationDetails),"Expected ILocalizationProps, not LPP string props",595932128),n.state.peoplePicker?s.createElement(n.state.peoplePicker.BasicMentions,{ref:n.onPeoplePickerRef,onReplaceText:n.props.replaceText,target:n.props.target?"#"+n.props.target:"",maxMenuHeight:400,onGetMoreResults:n.onGetMoreResults,onGetPicture:n.onGetPicture,automationID:Q.B(n.props.target),onShow:n.props.onShow,onDismiss:n.props.onDismiss,debugMode:!1,localizationProps:n.props.peoplePickerProps.pickerLocalizationDetails,onGetCandidates:n.onGetCandidates,clientTelemetry:Object(i.i)(),preventDismissOnScroll:n.props.peoplePickerProps.preventDismissOnScroll}):null},n.onGetCandidates=n.onGetCandidates.bind(n),n.onGetMoreResults=n.onGetMoreResults.bind(n),n.onGetPicture=n.onGetPicture.bind(n),n.onPeoplePickerRef=n.onPeoplePickerRef.bind(n),n.refreshAuthToken=n.refreshAuthToken.bind(n),n.state={peoplePickerStrings:{loading:"Loading...",error:"Can't search right now.",allResults:"All results",limitedResults:"Top results",emptyResults:"No suggestions found.",useThisAddress:"Use this address",atMentionsModePlaceholderText:"Type @ to mention a person",pickerModePlaceholderText:"Enter a name or email address",suggestionsAnnouncement:"Number of suggestions found: ",selectedSuggestionAccessibilityLabel:"Suggestion",selectedSuggestionNumberAccessibilityLabel:"of"}},n}return Object(r.__extends)(e,t),e.prototype.componentDidMount=function(){var t=this;Object(je.a)().then((function(e){t.setState({peoplePicker:e})})).catch((function(t){Object(l.b)(t)?Object(i.i)().assertConditionTag(!1,t.message,595632143):Object(i.i)().assertConditionTag(!1,"Unknown error in componentDidMount when calling delayLoadAtMentionComponents "+t,595632144)})),p.y()&&!Ue&&Object(je.b)().then((function(e){t.configureLPP(e),e.getLivePersonaPickerStrings(Object(Ae.a)().getLocaleInfo().appLocale).then((function(e){t.setState({peoplePickerStrings:e})})).catch((function(t){Object(i.i)().assertConditionTag(!1,"failed to fetch LPP strings for locale: "+Object(Ae.a)().getLocaleInfo().appLocale,595637531)})),t.setState({lppImports:e})})).catch((function(t){Object(l.b)(t)?Object(i.i)().assertConditionTag(!1,t.message,591155841):Object(i.i)().assertConditionTag(!1,"Unknown error in componentDidMount when calling delayLoadLPP "+t,591155842)}))},e.prototype.enableOfflineModeForTesting=function(){var t=Object(i.i)().getMetadata();return ke.a||Yt.b||!(!t.ring||!t.dataCenter||"-4"!==t.ring||"DC2"!==t.dataCenter)},e.prototype.refreshAuthToken=function(t){return this.props.getAuthToken?this.props.getAuthToken(Ie.a.Loki):(Object(i.i)().assertConditionTag(!1,"getAuthToken cannot be undefined",595637532),Promise.resolve(""))},e.prototype.getContacts=function(t,e,n){var o=Object(i.i)().createActivityObject("OnGetCandidatesEvent",Object(i.j)(i.g.ReviewedAsNotNecessary),i.a.None);return o.addDataField(j.a.NumberOfCandidatesRequested,e,i.c.SystemMetadata),o.addDataField(j.a.SearchGraph,n,i.c.SystemMetadata),this.props.peoplePickerProps.onGetUserContacts(t,e,n).then((function(t){return o.addDataField(j.a.NumberOfCandidatesReceived,t.length,i.c.SystemMetadata),o.successTag(595194449),t}),(function(t){return o.failTag(595194450,-2130957538),Promise.reject(t)}))},e.prototype.onGetCandidates=function(t,e){return this.getContacts(t,e,!1)},e.prototype.onGetMoreResults=function(t,e){return this.getContacts(t,e,!0)},e.prototype.onPeoplePickerRef=function(t){this.peoplePickerRef=t},e.prototype.onMentionsTextChanged=function(t,e){this.peoplePickerRef&&(p.y()?e?this.props.onDismiss():this.peoplePickerRef.onQueryChanged(t):this.peoplePickerRef.setInputText(t,e))},e.prototype.onMentionsKeyDownHandler=function(t){if(this.peoplePickerRef){if(!p.y())return void this.peoplePickerRef.onKeyDown(t);if(Object(i.i)().assertConditionTag(!!this.state.peoplePicker,"peoplepicker did not lazy-load correctly",595632416),t&&t.keyCode&&this.props.inAtMentionMode&&this.state.lppImports){var e=this.state.lppImports.keyboardEventKeyCodeToCustomKey[t.keyCode];void 0!==e&&this.peoplePickerRef.onCustomKeyPressed(e)}}},e.prototype.onGetPicture=function(){return""},e.prototype.render=function(){return p.y()?this.renderLivePersonaPicker():this.renderBasicMentionsPicker()},e}(s.PureComponent),Ke=ee.import("delta"),Ve=function(t){function e(e){var n=t.call(this,e)||this;return n.startIndexOfMention=0,n.mentionableKeyboardBindings=Object(r.__assign)(Object(r.__assign)({},n.keyboardBindings),{enter:{key:O.c.Enter,handler:function(){return n.enterNewline(!1)}}}),n.exitAtMentionMode=n.exitAtMentionMode.bind(n),n.insertMentionText=n.insertMentionText.bind(n),n.onSuggestionSelected=n.onSuggestionSelected.bind(n),n.onKeyDownHandler=n.onKeyDownHandler.bind(n),n.onKeyPressHandler=n.onKeyPressHandler.bind(n),n.onTextChangedHandler=n.onTextChangedHandler.bind(n),n.onMentionHostRef=n.onMentionHostRef.bind(n),n.enterAtMentionMode=n.enterAtMentionMode.bind(n),n.onShowHandler=n.onShowHandler.bind(n),n.enterNewline=n.enterNewline.bind(n),n.state={inAtMentionMode:!1,mentionQueryString:""},n}return Object(r.__extends)(e,t),e.prototype.enterNewline=function(e){return!this.state.inAtMentionMode&&t.prototype.enterNewline.call(this,e)},e.prototype.handleEscapeKeys=function(){return!this.state.inAtMentionMode&&t.prototype.handleEscapeKeys.call(this)},e.prototype.componentWillUnmount=function(){var t,e;null===(e=(t=this.props).onUnmount)||void 0===e||e.call(t)},e.prototype.componentDidUpdate=function(e,n){n.inAtMentionMode&&!this.state.inAtMentionMode&&this.AtMentionRef&&this.AtMentionRef.onMentionsTextChanged("",!0),t.prototype.componentDidUpdate.call(this,e,n)},e.prototype.onMentionHostRef=function(t){this.AtMentionRef=t},e.prototype.updateCurrentMentions_deprecated=function(t,e){var n=Te(e),o=Te(e.compose(t));Object(c.a)(n,o)||this.props.onCurrentMentionsUpdated_deprecated(o)},e.prototype.updateCurrentMentions=function(t,e){var n=Oe(e),o=Oe(e.compose(t));Object(c.m)(n,o)&&this.props.onMentioneesStillInDraftUpdated(o)},e.prototype.onTextChangedHandler=function(e,n,o){if(this.state.inAtMentionMode&&this.AtMentionRef){var r=this.getMentionText();p.y()?r.length>0&&this.state.mentionQueryString!==r&&(r.split(" ").length>3?(this.AtMentionRef.onMentionsTextChanged("",!0),this.setState({mentionQueryString:""})):(this.setState({mentionQueryString:r}),this.AtMentionRef.onMentionsTextChanged(r.substr(1),!1))):this.AtMentionRef.onMentionsTextChanged(r,!1)}p.u()||t.prototype.onTextChangedHandler.call(this,e,n,o),this.props.displayMode===B.Editing&&p.b()&&(function(t){var e=!1;return t.forEach((function(t){e||(e=t.insert&&t.attributes&&t.attributes.atmention)})),e}(e)||ve(e)||function(t){var e=!1;return t.forEach((function(t){e||(e=!!t.retain&&!!t.attributes&&null===t.attributes.atmention)})),e}(e))&&(p.F()?this.updateCurrentMentions(e,n):this.updateCurrentMentions_deprecated(e,n)),p.u()&&t.prototype.onTextChangedHandler.call(this,e,n,o)},e.prototype.initializeQuill=function(){var t={keyboard:{bindings:this.mentionableKeyboardBindings}};this.myQuill=ye(this.props,t,this.onTextChangedHandler,this.getQuillScrollingContainer())},e.prototype.onKeyPressHandler=function(t){var e=this.myQuill.getSelection();if(e){if(String.fromCharCode(t.which)!==ae.a)return;var n=this.myQuill.getText(e.index-1,1),o=/\s/.test(n),r=/\n/.test(n),i=""===n;(0===e.index||o||r||i)&&(this.enterAtMentionMode(!1),this.startIndexOfMention=e.index)}},e.prototype.onKeyDownHandler=function(e){var n=this.myQuill.getSelection();if(n)if(Object(O.f)(e.key)===O.b.Backspace&&this.state.inAtMentionMode){var o=n.index;(o>0&&this.startIndexOfMention===o-1||this.startIndexOfMention===o)&&this.exitAtMentionMode()}else if(Object(O.f)(e.key)===O.b.Delete&&this.state.inAtMentionMode){n.index===this.startIndexOfMention&&this.exitAtMentionMode()}this.AtMentionRef&&this.AtMentionRef.onMentionsKeyDownHandler(e),t.prototype.onKeyDownHandler.call(this,e)},e.prototype.getMentionText=function(){var t=0;this.myQuill.getSelection()&&(t=this.myQuill.getSelection().index),t<this.startIndexOfMention&&Object(ke.e)("selection moved before @ when inAtMentionMode: "+this.state.inAtMentionMode+"\n      selectionIndex "+t+" startIndexOfMention "+this.startIndexOfMention);var e=1;return e=t>this.startIndexOfMention?t-this.startIndexOfMention:t===this.startIndexOfMention?1:this.myQuill.getLength(),this.myQuill.getText(this.startIndexOfMention,e)},e.prototype.exitAtMentionMode=function(){this.setState({inAtMentionMode:!1}),this.updateAriaAttributes(!1)},e.prototype.enterAtMentionMode=function(t){var e=this;this.setState({inAtMentionMode:!0}),t&&setTimeout((function(){return e.updateAriaAttributes(!0)}))},e.prototype.onShowHandler=function(){this.enterAtMentionMode(!0)},e.prototype.updateAriaAttributes=function(t){if(this.editorRef){var e=document.getElementById(this.props.id);if(e){if(e.hasAttribute("aria-controls")&&!t)e.removeAttribute("aria-controls");else if(t&&(e.setAttribute("aria-controls",Q.B(this.props.id)),e.parentElement)){var n=this.myQuill.getSelection();e.parentElement.focus(),n&&this.myQuill.setSelection(n.index,0)}}else Object(i.i)().assertConditionTag(!e,"Trying to use Quill div when not mounted in DOM",595162049)}},e.prototype.insertMentionText=function(t,e,n){this.exitAtMentionMode(),this.props.onMentionCreated(n);var o=Object(c.e)(n),r=Object(c.f)(n),i=Pe.b.Resolved,s=(new Ke).retain(this.startIndexOfMention).delete(t).insert("@"+e,{atmention:JSON.stringify(Object(Pe.c)(o,r,i))}).insert(" ");this.myQuill.updateContents(s,"api");var a=this.startIndexOfMention+e.length+2;this.myQuill.setSelection(a,0),Object(we.b)(e)},e.prototype.onSuggestionSelected=function(t){this.insertMentionText(this.state.mentionQueryString.length,t.Name,t)},e.prototype.renderAdditionalEditorContent=function(){return this.props.displayMode===B.Editing?s.createElement(ze,{ref:this.onMentionHostRef,replaceText:this.insertMentionText,onSuggestionSelected:this.onSuggestionSelected,target:this.props.id,onShow:this.onShowHandler,onDismiss:this.exitAtMentionMode,peoplePickerProps:this.props.peoplePickerProps,inAtMentionMode:this.state.inAtMentionMode,getAuthToken:this.props.getAuthToken}):void 0},e}(xe),qe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.render=function(){if(this.props.displayMode!==B.Editing){var t={id:this.props.id,accessibilityLabel:this.props.accessibilityLabel,showFullContent:this.props.showFullComment,content:this.props.defaultValue,placeholder:this.props.placeholder,viewerMode:this.props.useReplyBoxStyling?vt.DisabledEditor:this.props.displayMode===B.Disabled?vt.DisabledComment:vt.ReadOnlyComment};return s.createElement(Ee,Object(r.__assign)({},t))}return this.props.supportsAtMentions&&At(this.props)?s.createElement(Ve,Object(r.__assign)({},this.props)):s.createElement(Se,Object(r.__assign)({},this.props))},e}(s.PureComponent),We=n(177),Ge=Object(I.c)((function(){return{container:Object(K.b)({display:"flex",direction:"inherit",overflow:"hidden",flexDirection:"row",flexWrap:"nowrap",margin:0,border:0,position:"relative"}),body:Object(K.b)({fontFamily:"inherit",color:We.b.TASK_BORDER,fontWeight:"normal",fontSize:"12px",lineHeight:16,marginLeft:"3px",userSelect:"text",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),icon:Object(K.b)({color:We.b.TASK_BORDER,fontSize:"12px",lineHeight:16,marginRight:"3px",height:16,width:12,minWidth:12})}})),Ye=Object(K.b)(st.k,{selectors:(Ne={},Ne[jt.l]={backgroundColor:"WindowText"},Ne)}),Qe=Object(K.b)({backgroundColor:"#006BFF",borderRadius:"50%",borderWidth:2,borderColor:"white",height:6,width:6,position:"absolute"},Ye),Je=Object(I.c)((function(t){return{blueDotOnReply:Object(K.b)(Qe,{left:27,top:36+(t?16:0)}),blueDotOnRoot:Object(K.b)(Qe,{left:6,top:9+(t?16:0)}),blueDotOnViewMoreRepliesButton:Object(K.b)(Qe,{left:5,top:11})}})),$e=s.memo((function(t){var e=Je(t.hasTaskHeader),n="";switch(t.dotType){case N.RootPost:n=e.blueDotOnRoot;break;case N.ReplyPost:n=e.blueDotOnReply;break;case N.ViewMoreRepliesButton:n=e.blueDotOnViewMoreRepliesButton;break;default:Object(i.i)().assertConditionTag(!1,"Unable to retrieve style for dot type specified",591677127)}return s.createElement("span",{className:n})})),Xe={selectors:(Me={},Me[jt.l]={opacity:0},Me)},Ze=Object(K.b)({fill:q.a.GRAY_C},Xe),tn=Object(I.c)((function(){var t;return{root:{background:"#FFFFFF",maxHeight:"24px",width:"37px",minWidth:"37px",margin:7,marginLeft:0,padding:0,borderRadius:st.d,border:"1px solid ",borderColor:q.a.GRAY_C,position:"relative",verticalAlign:"top",selectors:(t={".ms-Fabric--isFocusVisible &:focus::after":st.l,".ms-Button-flexContainer":{position:"relative"},".reopenThreadIconArrow":Object(K.b)({fill:"#505050"},Xe),".reopenThreadIconBubble":Object(K.b)({fill:"#1E8BCD"},Xe),".reopenThreadIconShading":Object(K.b)({fill:"#FAFAFA"},Xe)},t[jt.l]={selectors:{".OfficeIconColors_HighContrast":{fill:"ButtonText",opacity:1}}},t)},rootPressed:{color:q.a.GRAY_J},rootHovered:Object(K.b)({color:q.a.GRAY_J},st.k),rootFocused:Object(K.b)({color:q.a.GRAY_H,outline:"none",border:"1px solid"},st.j),iconDisabled:{color:q.a.GRAY_C,selectors:{".reopenThreadIconArrow":Ze,".reopenThreadIconBubble":Ze,".reopenThreadIconShading":Ze,".OfficeIconColors_HighContrast":{fill:"GrayText"}}},icon:{color:q.a.GRAY_F,width:"16px",margin:1},iconPressed:{color:q.a.GRAY_J},iconHovered:{color:q.a.GRAY_J}}})),en=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.renderIconButton=function(){var t=tn(),e=Object(ot.a)(this.props.icon);Object(i.i)().assertConditionTag(!!e,"commandbutton icon should be defined in Fluent",595068699);var n={id:this.props.id,disabled:this.props.disabled,onClick:this.props.onClick,ariaLabel:this.props.accessibilityLabel,tabIndex:this.props.isTabbable?0:-1};return s.createElement(X.a,Object(r.__assign)({},n,{styles:t,iconProps:{iconName:e,style:{width:12,height:14,marginLeft:"12px",marginRight:"12px"}}}),this.props.text)},e.prototype.render=function(){return s.createElement($.a,{content:this.props.tooltipText,directionalHint:this.props.tooltipDirection,tooltipProps:rt.a},this.renderIconButton())},e}(s.PureComponent),nn=Object(I.c)((function(){return{commandBar:Object(K.b)({height:32,display:"flex",overflow:"hidden",flexDirection:"row",flexShrink:0,flexWrap:"nowrap",justifyContent:"flex-end",alignContent:"flex-end",alignItems:"flex-end",margin:0,border:0,backgroundColor:"#FFFFFF",selectors:{":focus":{outline:"none"}}}),separatorLine:Object(K.b)({height:32,width:"1px",backgroundColor:"#FFFFFF"})}})),on=function(t){function e(e){var n=t.call(this,e)||this;return n.styles=void 0,n.styles=nn(),n}return Object(r.__extends)(e,t),e.prototype.generateContentToRender=function(t,e,n){for(var o=t.map((function(t,o){return s.createElement(en,Object(r.__assign)({isTabbable:e,disabled:n,key:o},t))})),i=2*o.length-1,a=[],c=0,l=0;l<i;++l)l%2==0?(a.push(o[c]),++c):a.push(s.createElement("div",{key:"separator"+l,className:this.styles.separatorLine}));return a},e.prototype.render=function(){return s.createElement("div",{className:this.styles.commandBar},this.generateContentToRender(this.props.actions,this.props.isTabbable,this.props.disableActions))},e}(s.PureComponent),rn=n(1334),sn=/{([^{}]+)}|[^{}]+/g;function an(t){return 100===t}var cn=n(611),ln=function(t){function e(e){var n=t.call(this,e)||this;return n.onClick=n.onClick.bind(n),n}return Object(r.__extends)(e,t),e.prototype.hasNonInteractiveDisplayMode=function(){return this.props.displayMode===T.a.ReadOnly||this.props.displayMode===T.a.Disabled},e.prototype.hasReadOnlyDisplayMode=function(){return this.props.displayMode===T.a.ReadOnly},e.prototype.onClick=function(){this.props.onHeaderButtonPressed&&this.props.onHeaderButtonPressed(this.props.id)},e.prototype.getStyledHeaderText=function(t){var e=this.isAssignedToYou(),n=Object(cn.c)(an(this.props.completion),e,this.hasNonInteractiveDisplayMode()),o=e||!this.props.assignees||0===this.props.assignees.length?this.renderAssignedToYouLabel(n,t):this.renderAssignedToPersonLabel(n);return s.createElement($.a,{content:Object(z.s)(e,this.props.assignees[0],this.props.localizationAPI),tooltipProps:rt.a},o)},e.prototype.renderAssignedToYouLabel=function(t,e){return s.createElement("div",{className:this.hasReadOnlyDisplayMode()?t.readOnlyTaskLabel:t.taskLabel},s.createElement("span",{className:t.taskHeaderCheckbox.text},e))},e.prototype.renderAssignedToPersonLabel=function(t){var e,n,o,r,i=this,a=this.props.localizationAPI.getString(111);return s.createElement("div",{className:this.hasReadOnlyDisplayMode()?t.readOnlyTaskLabel:t.taskLabel},s.createElement("span",{className:t.taskHeaderCheckbox.text},(n=function(e,n){return i.renderAssigneeName(Object(c.g)(i.props.assignees[0]),n,t.taskHeaderCheckbox.text)},r=[],(e=a).replace(sn,(function(t,i){var s,a=e+r.length;return(s=void 0!==i?n(i,a):o?o(t,a):t)&&r.push(s),""})),r)))},e.prototype.renderAssigneeName=function(t,e,n){var o=Object(cn.c)(an(this.props.completion),!1,this.hasNonInteractiveDisplayMode());return s.createElement("span",{key:e,className:o.taskAssignee},t)},e.prototype.isAssignedToYou=function(){return!(!this.props.assignees||!this.props.assignees.length)&&!!this.props.assignees[0].IsCurrentUser},e.prototype.render=function(){if(!p.b())return null;Object(i.i)().assertConditionTag(1===this.props.assignees.length,"There should be exactly one assignee",593789334);var t,e,n=an(this.props.completion),o=Q.j({id:this.props.id,renderContextType:this.props.renderContextType}),r=!1;this.props.assignees.length>0?(r=this.isAssignedToYou(),t=Object(z.o)(this.props.assignees[0],this.props.localizationAPI),e=Object(z.p)(this.props.assignees[0],n,this.props.localizationAPI)):(t=Object(z.r)(this.props.localizationAPI),e=Object(z.q)(n,this.props.localizationAPI));var a=Object(cn.c)(n,r,this.hasNonInteractiveDisplayMode());return s.createElement("div",{className:a.taskHeaderContainer,id:Q.k({id:this.props.id,renderContextType:this.props.renderContextType})},s.createElement($.a,{content:Object(z.m)(an(this.props.completion),this.props.localizationAPI),tooltipProps:rt.a},this.renderTaskHeader(o,a,n,e)),this.getStyledHeaderText(t))},e.prototype.renderTaskHeader=function(t,e,n,o){return this.hasReadOnlyDisplayMode()?null:s.createElement(rn.a,{id:t,componentRef:this.props.taskHeaderCheckboxRef,styles:e.taskHeaderCheckbox,checked:n,"data-item-id":this.props.id,onChange:this.onClick,checkmarkIconProps:We.c.CHECKMARKICONTOPPER,disabled:this.hasNonInteractiveDisplayMode(),ariaLabel:o})},e}(s.PureComponent),pn=n(499),un=function(t){function e(e){var n=t.call(this,e)||this;return n.state={showLoadingUI:!1},n}return Object(r.__extends)(e,t),e.prototype.setTimer=function(){var t=this;this.timeoutId||(this.timeoutId=setTimeout((function(){t.setState({showLoadingUI:!0}),t.timeoutId=void 0}),this.props.delay))},e.prototype.clearTimer=function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)},e.prototype.componentDidMount=function(){this.props.isLoading&&this.setTimer()},e.prototype.componentWillUnmount=function(){this.clearTimer()},e.prototype.componentDidUpdate=function(t){!t.isLoading&&this.props.isLoading?this.setTimer():t.isLoading&&!this.props.isLoading&&(this.clearTimer(),this.setState({showLoadingUI:!1}))},e.prototype.render=function(){return this.state.showLoadingUI?this.props.loadingUI:s.Children.only(this.props.children)},e}(s.Component),dn=n(348),fn={marginTop:"8px",zIndex:20,width:"32px",maxHeight:"30px",selectors:{"& .ms-Spinner-circle":{borderColor:dn.a,borderTopColor:dn.b}}},hn={maxHeight:"24px",width:"37px",minWidth:"37px",padding:0,margin:1,marginRight:2,marginLeft:3},yn=Object(K.b)(hn,{marginRight:1,marginLeft:1,borderRadius:st.d,border:"1px solid",selectors:{".ms-Fabric--isFocusVisible &:focus::after":st.l,".ms-Button-flexContainer":{position:"relative"}}}),mn=Object(I.c)((function(t){return{commitBar:Object(K.b)({marginBottom:"5px",marginTop:p.n()?"1px":void 0,maxHeight:"30px",display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-end"}),primaryButton:Object(st.m)({root:Object(K.b)(hn,{backgroundColor:Object(R.a)().primary,borderColor:Object(R.a)().primary},t&&{transform:"scaleX(-1)"}),rootPressed:{backgroundColor:Object(R.a)().shade20,borderColor:Object(R.a)().shade20},rootHovered:Object(K.b)({backgroundColor:Object(R.a)().shade10,borderColor:Object(R.a)().shade10}),rootFocused:Object(K.b)({backgroundColor:Object(R.a)().shade10,borderColor:Object(R.a)().shade10}),icon:{width:16}}),defaultButton:Object(st.m)({root:Object(K.b)(hn,{borderColor:it.a.gray110}),icon:{height:12,marginBottom:1,width:16,lineHeight:12}}),icon:{fontFamily:"inherit"},commitButton_deprecated:{root:Object(K.b)(yn,{background:Object(R.a)().primary,color:Object(R.a)().primary,position:"relative"},t&&{transform:"scaleX(-1)"}),rootPressed:{background:Object(R.a)().shade20},rootHovered:Object(K.b)({background:Object(R.a)().shade10},st.k),rootFocused:Object(K.b)({background:Object(R.a)().shade10,color:q.a.GRAY_H,outline:"none",border:"1px dotted"},st.j),rootDisabled:{background:q.a.GRAY_C,color:q.a.GRAY_C},iconDisabled:{color:q.a.GRAY_C},icon:{color:q.a.WHITE,width:"16px",margin:1},iconPressed:{color:q.a.GRAY_J},iconHovered:{color:q.a.GRAY_J}},cancelButton_deprecated:{root:Object(K.b)(yn,{background:"#ffffff",marginRight:0,marginLeft:4,color:q.a.GRAY_E,borderColor:it.a.gray110}),rootFocused:Object(K.b)({background:q.a.GRAY_C,color:q.a.GRAY_H,outline:"none",border:"1px dotted"},st.j),rootPressed:{color:q.a.GRAY_J},rootHovered:Object(K.b)({color:q.a.GRAY_J},st.k),iconDisabled:{color:q.a.GRAY_C},icon:{color:q.a.GRAY_F,width:12,height:12,margin:2,marginTop:0,padding:0,border:0,lineHeight:12},iconPressed:{color:q.a.GRAY_J},iconHovered:{color:q.a.GRAY_J}},cancelIcon_deprecated:{width:16},commitIcon_deprecated:{width:16,color:"white",fontFamily:"inherit"}}})),bn=function(t){function e(e){var n=t.call(this,e)||this;return n.renderCommitButtons=Object(I.c)((function(t,e){return void 0===t&&(t=[]),t.map((function(t,o){return s.createElement($.a,{key:o,content:t.disabled?void 0:t.tooltipText,directionalHint:e,tooltipProps:rt.a},s.createElement(un,{delay:st.f,isLoading:!!t.showDelayedSpinner,key:o,loadingUI:s.createElement(w.a,{size:A.a.small,className:fn})},t.usePrimaryButtonStyling?s.createElement(pn.a,Object(r.__assign)({},n.getCommitButtonProps(t))):s.createElement(P.a,Object(r.__assign)({},n.getCommitButtonProps(t)))))}))}),5),n.getCommitButtonProps=Object(I.c)((function(t){return{id:t.id,disabled:t.disabled,onClick:t.onClick,onKeyDown:t.onKeyDown,ariaLabel:t.accessibilityLabel,tabIndex:t.isTabbable?void 0:-1,iconProps:{iconName:Object(ot.a)(t.icon),style:n.styles.icon},styles:t.usePrimaryButtonStyling?n.styles.primaryButton:n.styles.defaultButton}}),5),n.getCommitButtonProps=n.getCommitButtonProps.bind(n),n.renderCommitButtons=n.renderCommitButtons.bind(n),n.renderCommitButton_deprecated=Object(I.c)(n.renderCommitButton_deprecated,5),n.styles=mn(Object(x.a)()),n.state={},n}return Object(r.__extends)(e,t),e.prototype.componentDidMount=function(){var t=this;p.b()&&Object(je.a)().then((function(e){t.setState({taskAssigner:e.TaskAssigner,taskAssigner_deprecated:e.TaskAssigner_deprecated})})).catch((function(t){Object(l.b)(t)?Object(i.i)().assertConditionTag(!1,t.message,595632141):Object(i.i)().assertConditionTag(!1,"Unknown error in CommitBar constructor "+t,595632142)}))},e.prototype.render=function(){if(!p.n()){var t=mn(Object(x.a)());return s.createElement("div",{className:t.commitBar},this.renderTaskAssigner(),this.renderCommitButton_deprecated(this.props.commit_deprecated,t.commitButton_deprecated,t.commitIcon_deprecated,this.props.tooltipDirection),this.props.cancel_deprecated?this.renderCommitButton_deprecated(this.props.cancel_deprecated,t.cancelButton_deprecated,t.cancelIcon_deprecated,this.props.tooltipDirection):void 0)}return s.createElement("div",{className:this.styles.commitBar},this.renderTaskAssigner(),this.renderCommitButtons(this.props.buttons,this.props.tooltipDirection))},e.prototype.renderTaskAssigner=function(){return p.F()?this.props.taskAssigner&&this.state.taskAssigner?s.createElement(this.state.taskAssigner,Object(r.__assign)({},this.props.taskAssigner)):null:this.props.taskAssigner_deprecated&&this.state.taskAssigner_deprecated?s.createElement(this.state.taskAssigner_deprecated,Object(r.__assign)({},this.props.taskAssigner_deprecated)):null},e.prototype.renderCommitButton_deprecated=function(t,e,n,o){var i={id:t.id,disabled:t.disabled,onClick:t.onClick,onKeyDown:t.onKeyDown,ariaLabel:t.accessibilityLabel,tabIndex:t.isTabbable?void 0:-1,iconProps:{iconName:Object(ot.a)(t.icon),style:n},styles:e};return t.showDelayedSpinner?s.createElement(un,{delay:st.f,isLoading:!0,loadingUI:s.createElement(w.a,{size:A.a.small,className:fn})},s.createElement(X.a,Object(r.__assign)({},i))):t.tooltipText?s.createElement($.a,{content:t.disabled?void 0:t.tooltipText,directionalHint:o,tooltipProps:rt.a},s.createElement(X.a,Object(r.__assign)({},i))):s.createElement(X.a,Object(r.__assign)({},i))},e}(s.PureComponent);function gn(t){return p.l()&&!(t.postDisplayMode!==v.a.ReadOnly&&t.postDisplayMode!==v.a.Normal&&t.postDisplayMode!==v.a.Resolved)&&t.isNew}var vn=n(145),Cn=function(t){function e(e,n){var o=t.call(this,e,n)||this;o.rootTabIndexValue=-1,o.onDraftEmptinessChanged=function(t){p.mb()&&o.props.onDraftEmptinessChanged(o,t)},o.contextMenuProps=Object(I.c)((function(t,e,n,r){return{id:Q.d({id:t,renderContextType:e}),parentId:o.props.id,title:o.props.localizationAPI.getString(45),ariaLabel:o.props.localizationAPI.getString(45),onMenuClick:o.onContextMenuInteractionHandler,menuItems:n,itemType:M.CardContextMenuItem,tabIndex:r,renderContextType:e}}),5),o.fetchReplyButton=Object(I.c)((function(t,e,n,r,i,s,a){var c=z.c(a,t,i,s);switch(t){case b.a.Reply:case b.a.ReplyPreCommitPending:return{id:Q.O({id:e,renderContextType:n}),icon:2,isTabbable:!0,disabled:r,onClick:o.sendReplyButtonClickHandler,onKeyDown:o.sendCommentButtonKeyDownHandler,text:o.props.localizationAPI.getString(48),accessibilityLabel:o.props.localizationAPI.getString(49),tooltipText:c,usePrimaryButtonStyling:!0};case b.a.ReplyPostCommitPending:return{disabled:!0,icon:2,onClick:function(){},text:o.props.localizationAPI.getString(48),accessibilityLabel:o.props.localizationAPI.getString(49),showDelayedSpinner:!0,tooltipText:c,usePrimaryButtonStyling:!0};case b.a.Draft:case b.a.DraftPreCommitPending:return{id:Q.O({id:e,renderContextType:n}),icon:2,isTabbable:!0,disabled:p.mb()?o.shouldDisableSendButton():o.state.isSendButtonDisabled_deprecated,onClick:o.sendReplyButtonClickHandler,onKeyDown:o.sendCommentButtonKeyDownHandler,text:o.props.localizationAPI.getString(48),accessibilityLabel:o.props.localizationAPI.getString(83),tooltipText:c,usePrimaryButtonStyling:!0};default:return}})),o.fetchCancelButton=Object(I.c)((function(t,e,n){switch(t){case b.a.Reply:case b.a.ReplyPreCommitPending:return{id:Q.M({id:e,renderContextType:n}),icon:1,isTabbable:!0,disabled:!1,onClick:o.cancelReplyButtonClickHandler,onKeyDown:o.cancelReplyButtonKeyDownHandler,text:o.props.localizationAPI.getString(15),accessibilityLabel:o.props.localizationAPI.getString(47),tooltipText:o.props.localizationAPI.getString(175),usePrimaryButtonStyling:!1};case b.a.ReplyPostCommitPending:return{disabled:!0,icon:1,onClick:function(){},text:o.props.localizationAPI.getString(15),accessibilityLabel:o.props.localizationAPI.getString(47),tooltipText:o.props.localizationAPI.getString(175),usePrimaryButtonStyling:!1};default:return}})),o.getMemoizedCommitButtons=Object(I.c)((function(t,e,n,r,i,s,a){var c=[],l=o.fetchReplyButton(t,e,n,r,i,s,a);if(!l)return c;c.push(l);var p=o.fetchCancelButton(t,e,o.context.renderContextType);return p?(c.push(p),c):c})),o.onEditorMount=function(){o.props.onCardEditorMounted(o.props.id)},o.onEditorUnmount=function(){p.S()?o.onCardSaveDraft(o.textEditorRef):o.onCardSaveDraft(void 0)},o.getNewTaskAssignees_deprecated=Object(I.c)((function(t,e){return e?Object(c.l)(t,e.assignees):t})),o.renderPosts=o.renderPosts.bind(o),o.expandButtonHandler=o.expandButtonHandler.bind(o),o.onPost=o.onPost.bind(o),o.onCancel=o.onCancel.bind(o),o.onEditorClick=o.onEditorClick.bind(o),o.onTextChanged_deprecated=o.onTextChanged_deprecated.bind(o),o.shouldDisableSendButton=o.shouldDisableSendButton.bind(o),o.cardKeyDownHandler=o.cardKeyDownHandler.bind(o),o.cardClickHandler=o.cardClickHandler.bind(o),o.renderCommitRegion=o.renderCommitRegion.bind(o),o.replyBoxKeyDownHandler=o.replyBoxKeyDownHandler.bind(o),o.cancelReplyThenFocus=o.cancelReplyThenFocus.bind(o),o.cancelReplyButtonKeyDownHandler=o.cancelReplyButtonKeyDownHandler.bind(o),o.cancelDraftButtonKeyDownHandler_deprecated=o.cancelDraftButtonKeyDownHandler_deprecated.bind(o),o.sendCommentButtonKeyDownHandler=o.sendCommentButtonKeyDownHandler.bind(o),o.cancelReplyButtonClickHandler=o.cancelReplyButtonClickHandler.bind(o),o.cancelDraftButtonClickHandler_deprecated=o.cancelDraftButtonClickHandler_deprecated.bind(o),o.sendReplyButtonClickHandler=o.sendReplyButtonClickHandler.bind(o),o.expandButtonClickHandler=o.expandButtonClickHandler.bind(o),o.expandButtonKeyDownHandler=o.expandButtonKeyDownHandler.bind(o),o.renderableItemListScrollHandler=o.renderableItemListScrollHandler.bind(o),o.clearDraft=o.clearDraft.bind(o),o.onCardMouseEnter=o.onCardMouseEnter.bind(o),o.onCardMouseLeave=o.onCardMouseLeave.bind(o),o.setCardRef=o.setCardRef.bind(o),o.setReplyBoxRef=o.setReplyBoxRef.bind(o),o.setTaskHeaderCheckboxRef=o.setTaskHeaderCheckboxRef.bind(o),o.onContextMenuInteractionHandler=o.onContextMenuInteractionHandler.bind(o),o.editorFocusHandler=o.editorFocusHandler.bind(o),o.editorBlurHandler=o.editorBlurHandler.bind(o),o.editorComponentRef=o.editorComponentRef.bind(o),o.onContextMenuItemMounted=o.onContextMenuItemMounted.bind(o),o.onEditorCommitRequested=o.onEditorCommitRequested.bind(o),o.onEditorEscapeRequested=o.onEditorEscapeRequested.bind(o),o.getContentsAsync=o.getContentsAsync.bind(o),o.getCursorPositionAsync=o.getCursorPositionAsync.bind(o),o.draftHasContent_deprecated=o.draftHasContent_deprecated.bind(o),o.renderCommentCardTaskHeader=o.renderCommentCardTaskHeader.bind(o),o.getPostArray=o.getPostArray.bind(o),o.hideCardHeader=o.hideCardHeader.bind(o);var r=o.getMaxHeight();return o.styles=Object(V.f)({id:o.props.id,renderContextType:o.context.renderContextType},Object(R.a)().primary,!!o.props.taskHeaderProps,Object(x.a)(),r,p.m()),o.state={autoDiscardOnCancel:!1,isSendButtonDisabled_deprecated:!0,menuItems:[],rootAuthorOpacity:1,headerHidden:!1},o.setTabIndex(e),o}return Object(r.__extends)(e,t),e.prototype.getCommentEditorCallbackProps=function(){return{componentRef:this.editorComponentRef,onTextChange:this.onTextChanged_deprecated,onDraftEmptinessChanged:this.onDraftEmptinessChanged,onEditorBlur:this.editorBlurHandler,onFocus:this.editorFocusHandler,onUnmount:this.onEditorUnmount}},e.prototype.setCardRef=function(t){this.cardRef=t},e.prototype.setReplyBoxRef=function(t){this.replyBoxRef=t},e.prototype.setTaskHeaderCheckboxRef=function(){this.taskHeaderCheckboxRef=document.getElementById(Q.j({id:this.props.id,renderContextType:this.context.renderContextType})),this.taskHeaderCheckboxRef&&this.setTabIndex(this.props)},e.prototype.setTabIndex=function(t){t.selected||t.isTabbable?(this.rootTabIndexValue=0,this.taskHeaderCheckboxRef&&(this.taskHeaderCheckboxRef.tabIndex=0)):(this.rootTabIndexValue=-1,this.taskHeaderCheckboxRef&&(this.taskHeaderCheckboxRef.tabIndex=-1))},e.prototype.getInnerElementsTabIndex=function(){return this.props.displayMode===b.a.CardPostCommitPending?-1:this.rootTabIndexValue},e.prototype.getRootTabIndex=function(){return this.rootTabIndexValue},e.prototype.getMaxHeight=function(){return this.props.maximumDimensions&&this.props.maximumDimensions.height?Math.max(this.props.maximumDimensions.height,V.a):void 0},e.prototype.onCardMouseEnter=function(){this.props.onCardHighlight(this)},e.prototype.onCardMouseLeave=function(){this.props.onCardHighlight(void 0)},e.prototype.UNSAFE_componentWillMount=function(){this.props.displayMode===b.a.Resolved&&this.setState({menuItems:this.generateCommandBarActionItems(this.props.menuItems)})},e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),!this.textEditorRef||this.props.displayMode!==b.a.Draft&&this.props.displayMode!==b.a.DraftPreCommitPending||this.textEditorRef.setSelection(0,0),this.notifyRenderedOnce()},e.prototype.UNSAFE_componentWillReceiveProps=function(t){t.hasSelectedChild&&this.props.hasSelectedChild!==t.hasSelectedChild&&(this.expandCardActivity=Object(i.i)().createActivityObject("ExpandCommentCard",Object(i.j)(i.g.GlobalAPI),i.a.None)),this.props.menuItems!==t.menuItems&&t.displayMode===b.a.Resolved&&this.setState({menuItems:this.generateCommandBarActionItems(t.menuItems)})},e.prototype.UNSAFE_componentWillUpdate=function(t,e){this.setTabIndex(t)},e.prototype.componentDidUpdate=function(t,e){var n=this.props.displayMode===b.a.Reply||this.props.displayMode===b.a.ReplyPreCommitPending||this.props.displayMode===b.a.Draft||this.props.displayMode===b.a.DraftPreCommitPending;this.props.draftId&&!n&&Object(i.i)().assertConditionTag(!1,"CardDisplayMode inconsistent with draft warning state",593799004),this.expandCardActivity&&this.cardRef&&(this.expandCardActivity.addDataField(j.a.ExpandedCardHeight,this.cardRef.offsetHeight,i.c.SystemMetadata),this.expandCardActivity.successTag(592488162),this.expandCardActivity=void 0),this.setState({autoDiscardOnCancel:!1})},e.prototype.focus=function(){this.props.displayMode!==b.a.ReplySessionRequestPending&&this.cardRef&&this.cardRef.focus(p.p()?{preventScroll:!0}:void 0)},e.prototype.blur=function(){this.cardRef&&this.cardRef.blur()},e.prototype.getContentsAsync=function(){return this.textEditorRef?this.textEditorRef.getContentsAsync():new Promise((function(t,e){e(new l.a(_.h,-2130957550))}))},e.prototype.getCursorPositionAsync=function(){return this.textEditorRef?this.textEditorRef.getCursorPositionAsync():new Promise((function(t,e){t(void 0)}))},e.prototype.draftHasContent_deprecated=function(){return!!this.textEditorRef&&!this.textEditorRef.isEditorEmpty()},e.prototype.cardKeyDownHandler=function(t){switch(Object(O.f)(t.key)){case O.b.Tab:if(this.props.selected||this.props.hasSelectedChild){if(this.isActiveDraft()){var e=document.getElementById(Q.O({id:this.props.id,renderContextType:this.context.renderContextType})),n=document.getElementById(Q.r({id:this.props.id,renderContextType:this.context.renderContextType})),o=void 0;t.target!==e||t.shiftKey?t.target===n&&(o=t.shiftKey&&!this.shouldDisableSendButton()?e:this.textEditorRef):o=n,o&&(o.focus(),t.preventDefault())}t.stopPropagation()}break;case O.b.Escape:this.props.hasSelectedChild&&this.props.onCardSelectExpand(this,!1),t.stopPropagation(),t.preventDefault()}},e.prototype.shouldClickTargetExpandCard=function(t){var e=t.target,n=document.getElementById(Q.k({id:this.props.id,renderContextType:this.context.renderContextType}));if(n&&n.contains(e))return!1;var o=document.getElementById(Q.Q({id:this.props.id,renderContextType:this.context.renderContextType}));return!o||!o.contains(e)},e.prototype.cardClickHandler=function(t){this.props.hasSelectedChild||this.shouldClickTargetExpandCard(t)&&(this.props.onCardSelectExpand(this,!1),t.stopPropagation())},e.prototype.contextMenuClickHandler=function(t,e){t.onClick(this.props.id,!!this.props.taskHeaderProps),e&&e.stopPropagation()},e.prototype.expandButtonClickHandler=function(t){this.expandButtonHandler(),t.stopPropagation()},e.prototype.expandButtonKeyDownHandler=function(t){Object(O.f)(t.key)===O.b.Enter&&(this.expandButtonHandler(),t.stopPropagation())},e.prototype.renderableItemListScrollHandler=function(t){var e=t.target;if(e.id===Q.L({id:this.props.id,renderContextType:this.context.renderContextType})){var n=e.scrollTop;this.setState({rootAuthorOpacity:n>V.d?0:(V.d-n)/V.d})}},e.prototype.onTextChanged_deprecated=function(){p.mb()||this.setState({isSendButtonDisabled_deprecated:this.shouldDisableSendButton()})},e.prototype.expandButtonHandler=function(){this.focus(),this.props.onCardSelectExpand(this,!0)},e.prototype.onPost=function(){this.props.onPost(this)},e.prototype.onCancel=function(){this.props.onCancel(this)},e.prototype.onEditorClick=function(t){this.props.displayMode===b.a.Normal&&this.props.onEditorFocus(this),t.stopPropagation()},e.prototype.shouldDisableSendButton=function(){return p.mb()?!1!==this.props.isDraftEmpty:!!this.textEditorRef&&this.textEditorRef.isEditorEmpty()},e.prototype.renderCardSideBar=function(){if(!this.props.restrictActionControls||this.props.highlightCard||this.props.selected||this.props.hasSelectedChild){var t=Q.i({id:this.props.id,renderContextType:this.context.renderContextType});return s.createElement("div",{id:t,className:this.styles.cardSideBar,"aria-hidden":"true"})}},e.prototype.generateCommandBarActionItems=function(t){var e=this,n=[];return t&&t.length>0&&(n=t.map((function(t){return{id:Q.c({id:e.props.id,renderContextType:e.context.renderContextType},t.text),text:t.text,accessibilityLabel:""+t.text,onClick:e.contextMenuClickHandler.bind(e,t),icon:t.icon,tooltipText:t.tooltipText,tooltipDirection:E.DirectionalHint.bottomCenter}}))),n},e.prototype.renderResolvedCommandBar=function(){if(this.props.menuItems&&this.props.menuItems.length>0&&this.state.menuItems.length>0){var t=[];return L(this.state.menuItems)?t=this.state.menuItems:Object(i.i)().assertConditionTag(!L(this.state.menuItems),"Card in Resolved display mode and menuItems is not of type CommentButtonProps",593799005),s.createElement(on,{isTabbable:this.props.isTabbable,disableActions:this.props.restrictActionControls,actions:t})}return null},e.prototype.onContextMenuItemMounted=function(t){t&&t.focus()},e.prototype.onContextMenuInteractionHandler=function(t){t&&Object(O.f)(t.key)===O.b.ArrowDown&&t.preventDefault()},e.prototype.renderCardHeader=function(){if(!this.state.headerHidden){var t=this.props.menuItems.length>0&&this.props.displayMode!==b.a.Resolved&&this.props.displayMode!==b.a.ReadOnly,e={id:this.props.id,author:this.props.author,authorColor:this.props.authorColor,authorImageURL:this.props.authorImageURL,anchorText:this.props.anchorText,contextMenuProps:t?this.contextMenuProps(this.props.id,this.context.renderContextType,this.props.menuItems,this.getInnerElementsTabIndex()):void 0,isResolvedCard:this.props.displayMode===b.a.Resolved,isDraftCard:this.props.displayMode===b.a.Draft||this.props.displayMode===b.a.DraftPreCommitPending,hideContextMenu:t||!p.eb()?this.props.restrictActionControls||this.props.displayMode===b.a.CardPostCommitPending:void 0,localizationAPI:this.props.localizationAPI,onCancelDraft:this.onCancel,rootAuthorOpacity:this.state.rootAuthorOpacity};return s.createElement(wt,Object(r.__assign)({},e))}},e.prototype.renderViewMoreRepliesButtonBlueDot=function(){return s.createElement($e,{dotType:N.ViewMoreRepliesButton,hasTaskHeader:!1,renderContextType:this.context.renderContextType})},e.prototype.injectHideCommentHeaderCallback=function(t){if(t){var e=t.constructor===Array?t[0]:t;return s.cloneElement(e,{onHideCardHeader:this.hideCardHeader})}},e.prototype.getPostArray=function(){var t=this.props.children;return t?t.constructor===Array?t:[t]:[]},e.prototype.renderPosts=function(){var t=this.getPostArray(),e=t.length,n=e?t[0]:void 0,o=e>1?t[e-1]:void 0;n=this.injectHideCommentHeaderCallback(n);var r=[],i=!1;if(this.props.children&&e>2)for(var a=1;a<e-1;++a){var c=this.props.children[a];if(r.push(c),!i&&c.props.postDisplayMode)i=gn(c.props)}return e>2&&this.props.cardCollapsedState===m.a.Collapsed?s.createElement("div",{id:Q.L({id:this.props.id,renderContextType:this.context.renderContextType}),onClick:this.expandButtonClickHandler,className:this.styles.renderableItemList,role:"group","aria-expanded":!1,onKeyDown:this.expandButtonKeyDownHandler,onScroll:this.renderableItemListScrollHandler},n,s.createElement(P.a,{"aria-label":z.t(this.props.localizationAPI,e),styles:this.props.restrictActionControls?this.styles.overflowTextContainerRestrictFocus:this.styles.overflowTextContainerDefault,tabIndex:this.getInnerElementsTabIndex(),onClick:this.expandButtonClickHandler,onKeyDown:this.expandButtonKeyDownHandler,id:Q.T({id:this.props.id,renderContextType:this.context.renderContextType}),text:z.t(this.props.localizationAPI,e)},i?this.renderViewMoreRepliesButtonBlueDot():void 0),o):e>2&&this.props.cardCollapsedState===m.a.Expanded?s.createElement("div",{id:Q.L({id:this.props.id,renderContextType:this.context.renderContextType}),className:this.styles.renderableItemList,role:"group","aria-expanded":!0,onScroll:this.renderableItemListScrollHandler},n,r,o):s.createElement("div",{id:Q.L({id:this.props.id,renderContextType:this.context.renderContextType}),className:this.styles.renderableItemList,role:"group",onScroll:this.renderableItemListScrollHandler},n,o)},e.prototype.clearDraft=function(){this.textEditorRef&&this.textEditorRef.clear()},e.prototype.replyBoxKeyDownHandler=function(t){if(Object(O.f)(t.key)===O.b.Enter||t.which===O.c.Space)this.props.displayMode!==b.a.Normal&&this.props.displayMode!==b.a.ReplySessionRequestPending||this.props.onEditorFocus(this),t.target===this.replyBoxRef&&t.preventDefault(),t.stopPropagation();else if(Object(O.f)(t.key)===O.b.Tab){var e=this.isActiveReply();if(this.isActiveDraft()||e){var n=document.getElementById(Q.O({id:this.props.id,renderContextType:this.context.renderContextType})),o=e?document.getElementById(Q.M({id:this.props.id,renderContextType:this.context.renderContextType})):document.getElementById(Q.r({id:this.props.id,renderContextType:this.context.renderContextType})),r=document.getElementById(Q.P({id:this.props.id,renderContextType:this.context.renderContextType}));t.shiftKey||!t.shiftKey&&this.shouldDisableSendButton()?o&&o.focus():p.b()&&r?r.focus():n&&n.focus(),t.preventDefault(),t.stopPropagation()}}},e.prototype.sendCommentButtonKeyDownHandler=function(t){Object(O.f)(t.key)===O.b.Enter?this.onPost():Object(O.f)(t.key)===O.b.Escape&&this.cancelReplyThenFocus()},e.prototype.cancelReplyButtonKeyDownHandler=function(t){Object(O.f)(t.key)!==O.b.Enter&&Object(O.f)(t.key)!==O.b.Escape||this.cancelReplyThenFocus(),Object(O.f)(t.key)!==O.b.Tab||t.shiftKey||this.textEditorRef&&(this.textEditorRef.focus(),t.preventDefault(),t.stopPropagation())},e.prototype.cancelDraftButtonKeyDownHandler_deprecated=function(t){Object(O.f)(t.key)!==O.b.Enter&&Object(O.f)(t.key)!==O.b.Escape||(this.onCancel(),t.stopPropagation(),t.preventDefault())},e.prototype.sendReplyButtonClickHandler=function(t){this.onPost(),t.stopPropagation()},e.prototype.cancelReplyButtonClickHandler=function(t){this.cancelReplyThenFocus(),t.stopPropagation()},e.prototype.cancelDraftButtonClickHandler_deprecated=function(t){this.onCancel(),t.stopPropagation()},e.prototype.cancelReplyThenFocus=function(){this.onCancel();var t=document.getElementById(Q.h({id:this.props.id,renderContextType:this.context.renderContextType},!1));t&&t.focus()},e.prototype.onEditorCommitRequested=function(){this.onPost()},e.prototype.onEditorEscapeRequested=function(){this.cancelReplyThenFocus()},e.prototype.editorFocusHandler=function(){this.props.displayMode!==b.a.Draft&&this.props.displayMode!==b.a.Reply&&this.props.displayMode!==b.a.DraftPreCommitPending&&this.props.displayMode!==b.a.ReplyPreCommitPending&&this.props.onEditorFocus(this)},e.prototype.editorBlurHandler=function(t,e){e&&Q.M({id:this.props.id,renderContextType:this.context.renderContextType})===e&&this.setState({autoDiscardOnCancel:!0}),this.props.onEditorBlur(this)},e.prototype.editorComponentRef=function(t){this.textEditorRef=t},e.prototype.renderCommentEditor=function(t){var e=z.b(this.props.displayMode,this.props.localizationAPI),n=Object(r.__assign)(Object(r.__assign)(Object(r.__assign)(Object(r.__assign)({id:Q.e({id:this.props.id,renderContextType:this.context.renderContextType}),isDraftEmpty:void 0,contentManagerId:Q.n(this.props.id),accessibilityLabel:e,accessibilityDescribedBy:Q.N({id:this.props.id,renderContextType:this.context.renderContextType})},this.getCommentEditorCallbackProps()),{displayMode:B.Disabled,useReplyBoxStyling:!0,isHeightBounded:!!this.getMaxHeight(),placeholder:z.f(this.props.localizationAPI,this.props.supportsAtMentions,this.props.displayMode===b.a.Draft||this.props.displayMode===b.a.DraftPreCommitPending,this.props.cardRelativeDraftingState),scrollingContainerId:this.props.scrollingContainerId,supportsAtMentions:this.props.supportsAtMentions}),this.props.mentionEditorProps),{onMount:this.onEditorMount,focusManagerKeyDownHandler:this.props.commentEditorAdditionalKeyDownHandler});return t||(n=Object(r.__assign)(Object(r.__assign)({},n),{displayMode:B.Editing,onCommitRequested:this.onEditorCommitRequested,onEscapeRequested:this.onEditorEscapeRequested,initialDraftContent:this.props.savedDraftContent,isDraftEmpty:this.props.isDraftEmpty})),s.createElement(qe,Object(r.__assign)({},n))},e.prototype.hideCardHeader=function(t){this.setState({headerHidden:t})},e.prototype.renderCommitRegion=function(){if(!p.n())return this.renderReplyBoxCommitBar_deprecated();var t=this.getMemoizedCommitButtons(this.props.displayMode,this.props.id,this.context.renderContextType,p.mb()?this.shouldDisableSendButton():this.state.isSendButtonDisabled_deprecated,this.props.taskHeaderProps,this.props.selectedTaskAssignee,this.props.localizationAPI);return t.length?s.createElement(bn,{taskAssigner:this.getTaskAssignerProps(),taskAssigner_deprecated:this.getTaskAssignerProps_deprecated(),buttons:t,commit_deprecated:t[0],cancel_deprecated:t[1]?t[1]:void 0,tooltipDirection:E.DirectionalHint.bottomCenter}):void 0},e.prototype.renderReplyBoxCommitBar_deprecated=function(){var t=this.fetchReplyButton(this.props.displayMode,this.props.id,this.context.renderContextType,p.mb()?this.shouldDisableSendButton():this.state.isSendButtonDisabled_deprecated,this.props.taskHeaderProps,this.props.selectedTaskAssignee,this.props.localizationAPI),e=this.fetchCancelButton(this.props.displayMode,this.props.id,this.context.renderContextType);if(t){var n=this.props.displayMode===b.a.Draft||this.props.displayMode===b.a.DraftPreCommitPending;return s.createElement(bn,{taskAssigner:this.getTaskAssignerProps(),taskAssigner_deprecated:this.getTaskAssignerProps_deprecated(),buttons:[],commit_deprecated:t,cancel_deprecated:n?void 0:e,tooltipDirection:E.DirectionalHint.bottomCenter})}},e.prototype.renderReplyBox=function(){var t=this.props.displayMode===b.a.Draft||this.props.displayMode===b.a.DraftPreCommitPending,e=this.props.displayMode===b.a.Reply||this.props.displayMode===b.a.ReplyPreCommitPending,n=this.props.displayMode===b.a.ReplyPostCommitPending||this.props.displayMode===b.a.CardPostCommitPending,o=e||t||n,r=!e&&!t&&!n,i=!e&&!t;return s.createElement("div",{className:this.styles.replyBoxContainer,style:{position:"relative"}},s.createElement("div",{id:Q.g({id:this.props.id,renderContextType:this.context.renderContextType}),ref:this.setReplyBoxRef,role:r?"button":void 0,"aria-disabled":!(p.D()||!r||void 0===this.props.cardRelativeDraftingState)||void 0,"aria-label":r?z.f(this.props.localizationAPI,this.props.supportsAtMentions,t,this.props.cardRelativeDraftingState):void 0,className:this.props.restrictActionControls?this.styles.replyBoxRestrictFocus:this.styles.replyBoxDefault,onClick:this.onEditorClick,onKeyDown:this.replyBoxKeyDownHandler,tabIndex:r?this.props.displayMode===b.a.ReplyPostCommitPending?-1:this.getInnerElementsTabIndex():void 0},this.renderCommentEditor(i),s.createElement("div",{className:this.styles.cardOverlay,style:this.props.displayMode===b.a.ReplyPostCommitPending?{display:"inline"}:{display:"none"}})),o?this.renderCommitRegion():void 0,s.createElement("div",{id:Q.N({id:this.props.id,renderContextType:this.context.renderContextType}),style:{display:"none"}},this.props.localizationAPI.getString(55)))},e.prototype.getTaskAssignerProps_deprecated=function(){if(p.b()&&!p.F())if(!this.props.selectedTaskAssignee||Object(c.h)(this.props.selectedTaskAssignee)){var t=this.props.displayMode===b.a.Draft,e=(this.props.displayMode===b.a.Reply||this.props.displayMode===b.a.ReplyPreCommitPending)&&this.props.taskHeaderProps;if((p.c()||t||e)&&this.props.currentMentionees_deprecated&&this.props.currentMentionees_deprecated.length>0){var n=t||p.c()&&!e?z.k(this.props.localizationAPI):z.l(this.props.localizationAPI),o=this.getNewTaskAssignees_deprecated(this.props.currentMentionees_deprecated,this.props.taskHeaderProps),r=this.props.localizationAPI.getString(128);if(o.length>0)return{renderContextType:this.context.renderContextType,id:this.props.id,label:n,assignees:o,isNewTask:t,selectedAssignee:this.props.selectedTaskAssignee,onSelectedTaskAssigneeUpdated:this.onTaskAssigneeUpdated,pickerAriaLabel:r,assignerTooltip:this.props.localizationAPI.getString(182)}}}else Object(i.i)().assertConditionTag(!1,"selectedTaskAssignee should be of type IUser when NewTaskAssignee flight is off",593799007)},e.prototype.renderCommentCardTaskHeader=function(){if(this.props.taskHeaderProps)return s.createElement(ln,Object(r.__assign)({},this.props.taskHeaderProps,{taskHeaderCheckboxRef:this.setTaskHeaderCheckboxRef}))},e.prototype.shouldDisableFocusTrapZone=function(){return!Object(vn.a)(this.context.renderContextType)&&(!this.isActiveReply()&&!this.isActiveDraft())},e.prototype.renderCard=function(){var t=this.styles.cardContainer,e=this.styles.cardInnerContainer,n=this.styles.cardBody;this.props.selected||this.props.hasSelectedChild?t=this.styles.cardContainerSelect:this.props.highlightCard&&(t=this.styles.cardContainerHover);var o={id:this.props.id,renderContextType:this.context.renderContextType},i={id:Q.h(o,this.props.isNewThread),role:"treeitem",className:t,tabIndex:this.getRootTabIndex(),onKeyDown:this.cardKeyDownHandler,ref:this.setCardRef},a={"aria-label":this.props.accessibilityLabel,"aria-expanded":this.props.cardCollapsedState===m.a.Expanded,"aria-selected":this.props.selected||this.props.hasSelectedChild,"aria-level":1,"aria-owns":Q.L({id:this.props.id,renderContextType:this.context.renderContextType})};return this.props.displayMode===b.a.Loading?s.createElement("div",Object(r.__assign)({"aria-label":this.props.accessibilityLabel},i),s.createElement("div",{className:this.styles.cardPlaceholder},s.createElement("div",{id:Q.f(o),className:this.styles.cardOverlay},s.createElement(S.a,{delay:st.f},s.createElement(w.a,{className:this.styles.cardSpinner,size:A.a.large}))))):this.props.displayMode===b.a.Draft||this.props.displayMode===b.a.DraftPreCommitPending?s.createElement("div",Object(r.__assign)({onClick:this.cardClickHandler},i,a),this.renderCommentCardTaskHeader(),this.renderCardHeader(),s.createElement("div",{className:e},s.createElement("div",{className:n},this.renderCardSideBar(),this.renderPosts(),this.renderReplyBox(),this.renderDraftWarning()))):this.props.displayMode===b.a.Resolved?s.createElement("div",Object(r.__assign)({onMouseEnter:this.onCardMouseEnter,onMouseLeave:this.onCardMouseLeave,onClick:this.cardClickHandler},i,a),this.renderCommentCardTaskHeader(),this.renderCardHeader(),s.createElement("div",{className:e},s.createElement("div",{className:n},this.renderCardSideBar(),this.renderPosts(),this.renderResolvedCommandBar()))):this.props.displayMode===b.a.ReadOnly?s.createElement("div",Object(r.__assign)({onMouseEnter:this.onCardMouseEnter,onMouseLeave:this.onCardMouseLeave,onClick:this.cardClickHandler},i,a),this.renderCommentCardTaskHeader(),this.renderCardHeader(),s.createElement("div",{className:e},s.createElement("div",{className:this.styles.cardBodyReadOnly},this.renderCardSideBar(),this.renderPosts()))):this.props.displayMode===b.a.CardPostCommitPending?s.createElement("div",Object(r.__assign)({onMouseEnter:this.onCardMouseEnter,onMouseLeave:this.onCardMouseLeave,onClick:this.cardClickHandler},i,a),this.renderCommentCardTaskHeader(),this.renderCardHeader(),s.createElement("div",{className:e},s.createElement("div",{className:this.styles.cardBody},this.renderCardSideBar(),this.renderPosts(),this.renderReplyBox(),s.createElement("div",{className:this.styles.cardOverlay},s.createElement(S.a,{delay:st.f},s.createElement(w.a,{className:this.styles.cardSpinner,size:A.a.large})))))):s.createElement("div",Object(r.__assign)({onMouseEnter:this.onCardMouseEnter,onMouseLeave:this.onCardMouseLeave,onClick:this.cardClickHandler},i,a),this.renderCommentCardTaskHeader(),this.renderCardHeader(),s.createElement("div",{className:e},s.createElement("div",{className:n},this.renderCardSideBar(),this.renderPosts(),this.renderReplyBox(),this.renderDraftWarning())))},e.prototype.render=function(){return s.createElement(k.a,{className:this.styles.commentCardFocusTrapZone,disabled:this.shouldDisableFocusTrapZone(),disableFirstFocus:!0,forceFocusInsideTrap:!1,ignoreExternalFocusing:!0,isClickableOutsideFocusTrap:!0},this.renderCard())},e.contextTypes=Object(r.__assign)({},mt.a),e}(J),Tn=n(68),On=n(184);var xn=s.memo((function(t){var e=function(t){switch(t){case 13:case 14:return"TaskAssign";case 15:return"TaskComplete";case 16:return"TaskReopen";case 17:return"TaskEdit";case 18:return"TaskDelete";default:return}}(t.icon),n=Ge(),o=s.createElement("div",null,s.createElement("div",{className:n.container},e&&s.createElement(On.a,{iconName:e,className:n.icon}),s.createElement("div",{className:n.body},t.description)));return p.bb()?s.createElement($.a,{content:t.description,directionalHint:E.DirectionalHint.bottomCenter,tooltipProps:rt.a},o):o})),Sn=Object(I.c)((function(){return{body:Object(K.b)({fontFamily:"inherit",color:q.a.GRAY_E,fontWeight:"normal",fontSize:"11px",lineHeight:18,marginLeft:"3px",userSelect:"text"})}})),Pn=s.memo((function(t){var e=Sn();return s.createElement("div",{className:e.body,id:t.id},t.timestamp)})),En=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.saveDraftIfEditing=function(t){var n,o;e.props.postDisplayMode===v.a.Editing&&(t?null===(o=(n=e.props).onSaveDraft)||void 0===o||o.call(n,e.getId(),t):e.props.onSaveDraft_deprecated(e))},e}return Object(r.__extends)(e,t),e.prototype.componentWillUnmount=function(){p.S()?this.textEditorRef&&this.saveDraftIfEditing(this.textEditorRef):this.saveDraftIfEditing(void 0)},e.prototype.setContents=function(t){this.textEditorRef&&this.textEditorRef.setContents(t)},e.prototype.getContentsAsync=function(){return this.textEditorRef?this.textEditorRef.getContentsAsync():Promise.resolve("")},e.prototype.getCursorPositionAsync=function(){return this.textEditorRef?this.textEditorRef.getCursorPositionAsync():Promise.resolve(void 0)},e.prototype.getId=function(){return this.props.id},e.prototype.renderTimestamp=function(){if(!this.props.collapsed&&this.props.postDisplayMode!==v.a.New&&this.props.postDisplayMode!==v.a.Editing&&this.props.postDisplayMode!==v.a.EditPreCommitPending)return s.createElement(Pn,Object(r.__assign)({},{timestamp:this.props.timestamp,id:Object(Q.I)({id:this.props.id,renderContextType:this.context.renderContextType}),renderContextType:this.context.renderContextType}))},e.prototype.getActionBarItemsAsButtonProps=function(t){var e=this,n=[];return t.actionBarItems.forEach((function(o,r){n.push({id:Object(Q.a)({id:t.id,renderContextType:e.context.renderContextType},r),icon:o.icon,text:o.text,accessibilityLabel:o.accessibilityLabel,onClick:function(){o.onClick(e)},isTabbable:t.selected,usePrimaryButtonStyling:o.usePrimaryButtonStyling,tooltipText:o.tooltipText})})),n},e.prototype.shouldShowHistoryItemTaskHeader=function(){return!!this.props.taskHistoryProps&&!this.props.collapsed&&p.b()},e.prototype.getHistoryItemContentFullProps=function(t){return Object(r.__assign)(Object(r.__assign)({},t),{renderContextType:this.context.renderContextType})},e.prototype.renderHistoryItemContent=function(){if(this.props.taskHistoryProps&&this.shouldShowHistoryItemTaskHeader())return s.createElement(xn,Object(r.__assign)({},this.getHistoryItemContentFullProps(this.props.taskHistoryProps)))},e.prototype.renderDraftWarning=function(){var t=this.props.draftWarningState;return p.D()&&t?s.createElement(Y,{key:"draftWarning",draftWarningState:t,localizationAPI:this.props.localizationAPI,renderContextType:this.context.renderContextType,target:H.Post,id:Object(Q.s)({id:this.props.id,renderContextType:this.context.renderContextType})}):null},e.contextTypes=Object(r.__assign)({},mt.a),e}(s.PureComponent),kn=p.n()?6:8,wn=Object(K.b)({display:"flex",direction:"inherit",flexDirection:"column",flexGrow:1,marginTop:"8px",marginRight:kn,position:"relative",overflow:"hidden"}),An=Object(K.b)({display:"flex",direction:"inherit",overflow:"hidden",flexGrow:1,flexDirection:"row",flexWrap:"nowrap",flexShrink:0,margin:0,border:0,position:"relative",selectors:{":focus":{outline:"none"}}}),In=Object(I.c)((function(t){return{actionbarEdit:Object(K.b)({maxHeight:"30px",marginTop:"5px",display:"flex",flexDirection:"row",flexWrap:"nowrap",overflow:"hidden",alignSelf:"flex-end"}),body:Object(K.b)(wn,{paddingLeft:"3px"}),bodyRoot:Object(K.b)(wn,{marginLeft:"14px",marginRight:"14px",marginTop:t?"0px":void 0}),containerParent:Object(K.b)(An,{selectors:{":focus":{outline:"1px dotted transparent",selectors:{"#postFocusBar":{borderLeft:"2px solid",borderColor:it.a.gray110,display:"inline"}}}},overflow:"visible",backgroundColor:"transparent"}),containerParentEditing:Object(K.b)(An,{overflow:"visible",backgroundColor:"transparent"}),containerReplyEditing:Object(K.b)(An),containerReply:Object(K.b)(An,{selectors:{":focus":{outline:"1px dotted transparent",selectors:{"#postFocusBar":{borderLeft:"2px solid",borderColor:it.a.gray110,display:"inline"}}}}}),containerNew:Object(K.b)(An,{overflow:"visible",backgroundColor:"transparent",selectors:{":focus":{outline:"none"}}}),postOverlay:Object(K.b)({position:"absolute",zIndex:10,left:0,top:0,right:0,bottom:0,backgroundColor:"rgba(255,255,255,0.5)"}),postSpinner:Object(K.b)({position:"absolute",zIndex:20,left:"50%",top:"50%",marginLeft:"-20px",marginTop:"-20px",selectors:{"& .ms-Spinner-circle":{borderColor:dn.a,borderTopColor:dn.b}}}),editorEditingContainer:Object(K.b)({display:"flex",margin:"0px",marginBottom:p.n()?"4px":"5px",backgroundColor:"#FFFFFF",border:"1px solid",borderColor:it.a.gray110,borderRadius:st.d,userSelect:"text",padding:0}),editorRestContainer:Object(K.b)({display:"flex",marginRight:p.n()?"2px":"0px",backgroundColor:"transparent",userSelect:"text",padding:"1px",border:0}),lowFidelityWarning:Object(K.b)({display:"flex",marginLeft:"4px",fontFamily:"inherit",fontSize:"12px",fontWeight:"normal",fontStyle:"italic",borderStyle:"dotted",borderColor:"red",borderWidth:"2px",whiteSpace:"normal"})}})),Rn=n(344),jn=Object(I.c)((function(){var t;return{root:{maxHeight:"12px",marginRight:"6px",padding:0,color:"#2B5C9C",fontSize:"11px",fontWeight:"600",fontFamily:"inherit",lineHeight:1.4,overflow:"visible",border:"1px solid transparent",selectors:(t={".ms-Fabric--isFocusVisible &:focus::after":st.l},t[jt.l]={outline:"auto"},t)},rootHovered:Object(K.b)({color:"#333333"},st.k),rootFocused:Object(K.b)({color:"#333333",outline:"none",border:"1px dotted"},st.j),label:{margin:0}}})),_n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.render=function(){var t=this,e=jn(),n={id:this.props.id,disabled:this.props.disabled,onClick:function(e){e.stopPropagation(),t.props.onClick&&t.props.onClick(e)},ariaLabel:this.props.accessibilityLabel,tabIndex:this.props.isTabbable?void 0:-1};return s.createElement(Rn.a,Object(r.__assign)({},n,{styles:e}),this.props.text)},e}(s.PureComponent),Dn=function(t){function e(e){var n=t.call(this,e)||this;return n.state={content:[]},n}return Object(r.__extends)(e,t),e.prototype.UNSAFE_componentWillMount=function(){this.setState({content:this.generateRenderedContent(this.props.actions)})},e.prototype.UNSAFE_componentWillReceiveProps=function(t){t.actions!==this.props.actions&&this.setState({content:this.generateRenderedContent(t.actions)})},e.prototype.generateRenderedContent=function(t){return t.map((function(t,e){return s.createElement(_n,Object(r.__assign)({key:e},t))}))},e.prototype.render=function(){return this.props.isVisible?s.createElement("div",null,this.state.content):s.createElement("div",null)},e}(s.PureComponent),Nn=n(1566),Mn=Object(I.c)((function(){return{errorWrapper:Object(K.b)({display:"flex",direction:"inherit",flexDirection:"row",marginTop:"6px",marginRight:"8px",position:"relative",width:"100%"}),errorMessageContainer:Object(K.b)({display:"flex",direction:"inherit",flexDirection:"column",marginLeft:"10px",marginRight:"8px",width:"100%"}),errorMessage:Object(K.b)({fontSize:"12px",paddingLeft:"1px",color:"#333333",textAlign:"left",fontFamily:"inherit",marginRight:"8px",marginBottom:"3px",display:"flex",fontWeight:"normal",whiteSpace:"normal"}),errorIconStyles:{root:{width:"16px",fontSize:"16px",marginTop:"4px",marginLeft:"11px"}}}})),Bn=function(t){function e(e){var n=t.call(this,e)||this;return n.getIconProps=Object(F.a)((function(){return{iconName:Object(ot.a)(19),styles:n.styles.errorIconStyles}})),n.styles=Mn(),n}return Object(r.__extends)(e,t),e.prototype.componentDidMount=function(){this.props.hideCardHeader&&this.props.hideCardHeader(!0)},e.prototype.componentWillUnmount=function(){this.props.hideCardHeader&&this.props.hideCardHeader(!1)},e.prototype.render=function(){return s.createElement("div",{className:this.styles.errorWrapper},s.createElement(On.a,Object(r.__assign)({},this.getIconProps(),{tabIndex:-1})),s.createElement("div",{className:this.styles.errorMessageContainer},s.createElement("div",{id:this.props.id,className:this.styles.errorMessage},this.props.warningMessage),s.createElement(Dn,{isVisible:!0,actions:this.props.buttons})))},e}(s.PureComponent),Ln=Object(I.c)((function(){return{itemFocusBar:Object(K.b)({position:"absolute",left:2,top:0,right:0,bottom:0,width:1,backgroundColor:"transparent",display:"none",outline:"none"})}})),Hn=s.memo((function(t){var e=Ln();return s.createElement("div",{id:t.id,className:[e.itemFocusBar,t.id].join(" "),"aria-hidden":"true"})})),Fn=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.onDraftEmptinessChanged=function(t){p.mb()&&o.props.onDraftEmptinessChanged(o,t)},o.onEditorMount=function(){o.props.onPostEditorMounted(o.props.id)},o.getDisplayErrorProps=Object(I.c)((function(t,e,n){var r=o.props.localizationAPI.getString(183),i=Q.J({id:e,renderContextType:n});return o.getPostWarningProps(t,r,i)})),o.getLowFidelityWarningProps=Object(I.c)((function(t,e,n,r){var i=Q.A({id:n,renderContextType:r});return o.getPostWarningProps(t,e,i)})),o.state={hover:!1,actionBarItems:[],menuItems_deprecated:[]},o.postFocusHandler=o.postFocusHandler.bind(o),o.postClickHandler=o.postClickHandler.bind(o),o.renderCommentEditor=o.renderCommentEditor.bind(o),o.commitHandler=o.commitHandler.bind(o),o.commentEditorKeyDownHandler=o.commentEditorKeyDownHandler.bind(o),o.cancelHandler=o.cancelHandler.bind(o),o.editorComponentRef=o.editorComponentRef.bind(o),o.postEditingKeyDownHandler=o.postEditingKeyDownHandler.bind(o),o.onMouseLeavePost=o.onMouseLeavePost.bind(o),o.onMouseOverPost=o.onMouseOverPost.bind(o),o.setPostRef=o.setPostRef.bind(o),o.onEditorCommitRequested=o.onEditorCommitRequested.bind(o),o.onEditorEscapeRequested=o.onEditorEscapeRequested.bind(o),o.onContextMenuInteractionHandler=o.onContextMenuInteractionHandler.bind(o),o.trySelectPost=o.trySelectPost.bind(o),o.getDisplayErrorProps=o.getDisplayErrorProps.bind(o),o.onRetry=o.onRetry.bind(o),o.styles=In(!!o.props.parent),o.defaultEditorProps=o.getDefaultEditorProps(),p.m()&&(o.componentDidCatch=function(t){o.onError(t)}),o}return Object(r.__extends)(e,t),e.prototype.getDefaultEditorProps=function(){return Object(r.__assign)(Object(r.__assign)({id:Q.E({id:this.props.id,renderContextType:this.context.renderContextType}),isDraftEmpty:void 0,contentManagerId:Q.o(this.props.id),componentRef:this.editorComponentRef},this.props.mentionableEditorProps),{accessibilityLabel:z.j(this.props.localizationAPI),accessibilityDescribedBy:Q.t({id:this.props.id,renderContextType:this.context.renderContextType}),displayMode:B.ReadOnly,defaultValue:this.props.commentBody,scrollingContainerId:this.props.scrollingContainerId,supportsAtMentions:this.props.supportsAtMentions})},e.prototype.editorComponentRef=function(t){this.textEditorRef=t},e.prototype.onMouseOverPost=function(){this.props.collapsed||this.setState({hover:!0})},e.prototype.onMouseLeavePost=function(){this.props.collapsed||this.setState({hover:!1})},e.prototype.UNSAFE_componentWillMount=function(){this.setState({actionBarItems:this.getActionBarItemsAsButtonProps(this.props)})},e.prototype.onContextMenuInteractionHandler=function(t){this.trySelectPost(),t&&Object(O.f)(t.key)===O.b.ArrowDown&&t.preventDefault()},e.prototype.componentDidMount=function(){this.props.selected&&this.postRef&&this.context.isFocusWithinPane()&&this.postRef.focus()},e.prototype.UNSAFE_componentWillReceiveProps=function(t){this.props.actionBarItems===t.actionBarItems&&this.props.selected===t.selected&&this.props.authorColor===t.authorColor&&this.props.authorImageURL===t.authorImageURL||this.setState({actionBarItems:this.getActionBarItemsAsButtonProps(t)})},e.prototype.componentDidUpdate=function(t,e){var n=this.props.postDisplayMode===v.a.Editing||this.props.postDisplayMode===v.a.EditPreCommitPending;if(this.props.draftId&&!n&&Object(i.i)().assertConditionTag(!1,"PostDisplayMode inconsistent with draft warning state",593802317),this.textEditorRef&&!n&&(t.commentBody!==this.props.commentBody||this.props.showFullComment&&!t.showFullComment))if(p.m())try{this.textEditorRef.setContents(this.props.commentBody)}catch(t){this.onError(t)}else this.textEditorRef.setContents(this.props.commentBody);if(t.isTabbable!==this.props.isTabbable&&p.d()){var o=document.getElementById(Q.H({id:this.props.id,renderContextType:this.context.renderContextType}));if(o)for(var r=o.getElementsByClassName(oe.blotName),s=0;s<r.length;s++){var a=this.props.isTabbable?"0":"-1";r[s].setAttribute("tabIndex",a)}}Object(i.i)().assertConditionTag(void 0===this.props.draftId||this.props.postDisplayMode===v.a.Editing||this.props.postDisplayMode===v.a.EditPreCommitPending,"post has draft state and is not in editing mode",593802318)},e.prototype.onRetry=function(){this.props.onClearError(this)},e.prototype.onError=function(t){p.m()&&(Object(l.b)(t)?Object(i.i)().assertConditionTag(!1,t.message,594351964):Object(i.i)().assertConditionTag(!1,"Error thrown from beneath Comment Post: "+t.message,593764384),this.props.onError(this))},e.prototype.postFocusHandler=function(t){var e=document.getElementById(Q.H({id:this.props.id,renderContextType:this.context.renderContextType}));e&&t.target===e&&(this.props.postDisplayMode===v.a.New||Object(Nn.a)(this.props.postDisplayMode)||this.props.selected||this.props.collapsed||this.props.onSelect(this))},e.prototype.trySelectPost=function(){this.props.postDisplayMode===v.a.New||Object(Nn.a)(this.props.postDisplayMode)||this.props.selected||this.props.onSelect(this)},e.prototype.postClickHandler=function(t){this.trySelectPost(),t.stopPropagation()},e.prototype.cancelHandler=function(){this.props.onCancel(this)},e.prototype.commitHandler=function(){this.props.onCommit(this)},e.prototype.setPostRef=function(t){this.postRef=t||void 0},e.prototype.getBodyStyle=function(){return this.props.parent?this.styles.bodyRoot:this.styles.body},e.prototype.renderActionBar=function(){var t=!this.props.restrictActionControls&&(this.state.hover||this.props.selected)&&this.props.postDisplayMode!==v.a.PendingEdit&&this.props.postDisplayMode!==v.a.PendingDraft;return this.props.postDisplayMode===v.a.Editing||this.props.postDisplayMode===v.a.EditPreCommitPending?s.createElement(bn,{buttons:this.state.actionBarItems,commit_deprecated:this.state.actionBarItems[0],cancel_deprecated:this.state.actionBarItems[1],tooltipDirection:E.DirectionalHint.bottomCenter}):s.createElement(Dn,{isVisible:t,actions:this.state.actionBarItems})},e.prototype.postEditingKeyDownHandler=function(t){if(Object(O.f)(t.key)===O.b.Tab){var e=document.getElementById(Q.a({id:this.props.id,renderContextType:this.context.renderContextType},this.props.actionBarItems.length-1));t.target!==e||t.shiftKey||(this.textEditorRef&&this.textEditorRef.focus(),t.stopPropagation(),t.preventDefault())}},e.prototype.commentEditorKeyDownHandler=function(t){if(Object(O.f)(t.key)===O.b.Tab){var e=t.shiftKey?this.props.actionBarItems.length-1:0,n=document.getElementById(Q.a({id:this.props.id,renderContextType:this.context.renderContextType},e));n&&n.focus(),t.stopPropagation()}},e.prototype.onEditorCommitRequested=function(){this.commitHandler()},e.prototype.onEditorEscapeRequested=function(){this.cancelHandler()},e.prototype.renderBlueDot=function(){return gn(this.props)?s.createElement($e,{dotType:this.props.parent?N.RootPost:N.ReplyPost,hasTaskHeader:this.shouldShowHistoryItemTaskHeader(),renderContextType:this.context.renderContextType}):null},e.prototype.renderCommentEditor=function(t){var e=this.styles.editorRestContainer,n=void 0;return t.displayMode===B.Editing&&(e=this.styles.editorEditingContainer,n=s.createElement("div",{id:Q.t({id:this.props.id,renderContextType:this.context.renderContextType}),style:{display:"none"}},this.props.localizationAPI.getString(56))),s.createElement("div",{className:e},s.createElement(qe,Object(r.__assign)({onKeyDown:this.commentEditorKeyDownHandler},t,this.props.mentionableEditorProps)),n)},e.prototype.renderHeader=function(){return this.props.parent?null:s.createElement(Ot,Object(r.__assign)({},this.getRenderableItemHeaderProps()))},e.prototype.renderPersona=function(){return this.props.parent?null:s.createElement(kt,Object(r.__assign)({},this.getRenderableItemPersonaProps()))},e.prototype.renderFocusBar=function(){if(!this.props.restrictActionControls)return s.createElement(Hn,Object(r.__assign)({},this.getRenderFocusBarProps()))},e.prototype.getRootDivProps=function(){var t=void 0;return t=this.props.postDisplayMode===v.a.New?this.styles.containerNew:this.props.postDisplayMode===v.a.Editing||this.props.postDisplayMode===v.a.EditPreCommitPending?this.props.parent?this.styles.containerParentEditing:this.styles.containerReplyEditing:this.props.parent?this.styles.containerParent:this.styles.containerReply,{className:Object(Tn.a)(t),ref:this.setPostRef,tabIndex:this.props.selected||this.props.isTabbable?0:-1,onFocus:this.postFocusHandler,onClick:this.postClickHandler,id:Q.H({id:this.props.id,renderContextType:this.context.renderContextType})}},e.prototype.getRenderableItemPersonaProps=function(){return{authorName:Object(c.g)(this.props.author),resolved:this.props.postDisplayMode===v.a.Resolved,isParent:!!this.props.parent,authorColor:this.props.authorColor,authorImageURL:this.props.authorImageURL}},e.prototype.getRenderableItemHeaderProps=function(){var t=this.props.parent||this.props.restrictActionControls&&!this.props.parent||this.props.postDisplayMode!==v.a.Normal||!(this.state.hover||this.props.selected);return{authorName:Object(c.g)(this.props.author),resolved:this.props.postDisplayMode===v.a.Resolved,renderContextType:this.context.renderContextType,contextMenuProps:t?void 0:{menuItems:this.state.menuItems_deprecated,actionBarItems:this.props.actionBarItems,isTabbable:this.props.selected||this.props.isTabbable,parentId:this.props.id,trySelectPost:this.trySelectPost,localizationAPI:this.props.localizationAPI}}},e.prototype.getRenderFocusBarProps=function(){return{id:Q.F()}},e.prototype.getPostWarningProps=function(t,e,n){return{buttons:t,warningMessage:e,id:n,hideCardHeader:this.props.onHideCardHeader}},e.prototype.renderReadOnlyState=function(){var t=Object(r.__assign)(Object(r.__assign)({},this.defaultEditorProps),{displayMode:B.Disabled,showFullComment:this.props.showFullComment,defaultValue:this.props.commentBody});return s.createElement("div",Object(r.__assign)({role:"treeitem","aria-label":this.props.accessibilityLabel,"aria-describedby":t.id,"aria-selected":this.props.selected,"aria-level":2},this.getRootDivProps()),this.renderFocusBar(),this.renderPersona(),this.renderBlueDot(),s.createElement("div",{className:this.getBodyStyle()},s.createElement("div",null," ",this.renderHeader()," "),this.renderHistoryItemContent(),this.renderCommentEditor(t),this.renderTimestamp()))},e.prototype.renderNewState=function(){return s.createElement("div",Object(r.__assign)({role:"treeitem","aria-label":this.props.accessibilityLabel,"aria-selected":this.props.selected,"aria-level":2},this.getRootDivProps()),this.renderFocusBar(),this.renderPersona(),s.createElement("div",{className:this.getBodyStyle()},s.createElement("div",null,this.renderHeader())))},e.prototype.renderEditState=function(){var t=z.j(this.props.localizationAPI),e=Object(r.__assign)(Object(r.__assign)({},this.defaultEditorProps),{defaultValue:this.props.commentBody,displayMode:B.Editing,initialDraftContent:this.props.savedDraftContent,isDraftEmpty:this.props.isDraftEmpty,onCommitRequested:this.onEditorCommitRequested,onEscapeRequested:this.onEditorEscapeRequested,onDraftEmptinessChanged:this.onDraftEmptinessChanged,accessibilityLabel:t,onMount:this.onEditorMount});return s.createElement("div",Object(r.__assign)({role:"treeitem","aria-label":this.props.accessibilityLabel,"aria-describedby":e.id,"aria-selected":this.props.selected,"aria-level":2},this.getRootDivProps()),this.renderFocusBar(),this.renderPersona(),this.renderBlueDot(),s.createElement("div",{className:this.props.parent?this.styles.bodyRoot:this.styles.body,onKeyDown:this.postEditingKeyDownHandler},this.renderHeader(),this.renderHistoryItemContent(),this.renderCommentEditor(e),s.createElement("div",{className:this.styles.actionbarEdit},this.renderActionBar()),this.renderDraftWarning()))},e.prototype.renderLowFidelityWarningState=function(){var t=this.getLowFidelityWarningProps(this.state.actionBarItems,this.props.lowFidelityWarningString,this.props.id,this.context.renderContextType);return this.renderPostWarning(t,this.props.accessibilityLabel)},e.prototype.renderPostErrorState=function(){var t=this.getDisplayErrorProps(this.state.actionBarItems,this.props.id,this.context.renderContextType);return this.renderPostWarning(t,this.props.localizationAPI.getString(183))},e.prototype.renderPostWarning=function(t,e){return s.createElement("div",Object(r.__assign)({role:"treeitem","aria-describedby":t.id,"aria-label":e,"aria-selected":this.props.selected,"aria-level":2},this.getRootDivProps()),this.renderFocusBar(),s.createElement(Bn,Object(r.__assign)({},t)))},e.prototype.renderResolvedState=function(){var t=Object(r.__assign)(Object(r.__assign)({},this.defaultEditorProps),{displayMode:B.Disabled,showFullComment:this.props.showFullComment,defaultValue:this.props.commentBody});return s.createElement("div",Object(r.__assign)({role:"treeitem","aria-label":this.props.accessibilityLabel,"aria-describedby":t.id,"aria-selected":this.props.selected,"aria-level":2},this.getRootDivProps()),this.renderFocusBar(),this.renderPersona(),this.renderBlueDot(),s.createElement("div",{className:this.getBodyStyle()},s.createElement("div",null," ",this.renderHeader()," "),this.renderHistoryItemContent(),this.renderCommentEditor(t),this.renderTimestamp()))},e.prototype.renderNormalState=function(){var t=Object(r.__assign)(Object(r.__assign)({},this.defaultEditorProps),{displayMode:B.ReadOnly,showFullComment:this.props.showFullComment,defaultValue:this.props.commentBody});return s.createElement("div",Object(r.__assign)({role:"treeitem","aria-label":this.props.accessibilityLabel,"aria-describedby":t.id,"aria-selected":this.props.selected,"aria-level":2},this.getRootDivProps(),{onMouseOver:this.onMouseOverPost,onMouseLeave:this.onMouseLeavePost}),this.renderFocusBar(),this.renderPersona(),this.renderBlueDot(),s.createElement("div",{className:this.getBodyStyle()},this.renderHeader(),this.renderHistoryItemContent(),this.renderCommentEditor(t),this.renderTimestamp()))},e.prototype.renderPendingEditState=function(){var t=this,e={id:Q.E({id:this.props.id,renderContextType:this.context.renderContextType}),isDraftEmpty:void 0,contentManagerId:Q.o(this.props.id),componentRef:function(e){return t.textEditorRef=e},displayMode:B.ReadOnly,showFullComment:this.props.showFullComment,defaultValue:this.props.commentBody,accessibilityLabel:this.props.localizationAPI.getString(88)};return s.createElement("div",Object(r.__assign)({style:{position:"relative"}},this.getRootDivProps()),this.renderFocusBar(),this.renderPersona(),this.renderBlueDot(),s.createElement("div",{className:this.getBodyStyle()},this.renderHeader(),this.renderHistoryItemContent(),this.renderCommentEditor(e),this.renderTimestamp()),s.createElement("div",{className:this.styles.postOverlay},s.createElement(S.a,{delay:st.f},s.createElement(w.a,{className:this.styles.postSpinner,size:A.a.large}))))},e.prototype.render=function(){switch(this.props.postDisplayMode){case v.a.LowFidelityWarningDelete:case v.a.LowFidelityWarningEdit:return this.renderLowFidelityWarningState();case v.a.New:return this.renderNewState();case v.a.Editing:case v.a.EditPreCommitPending:return this.renderEditState();case v.a.Resolved:return this.renderResolvedState();case v.a.ReadOnly:return this.renderReadOnlyState();case v.a.Normal:case v.a.PendingDraft:return this.renderNormalState();case v.a.PendingEdit:return this.renderPendingEditState();case v.a.Error:return this.renderPostErrorState();default:throw new l.a(_.o,-2130957558)}},e}(En),Un=n(1508),zn=n(148),Kn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.renderTimestamp=function(){return s.createElement(Pn,{timestamp:Object(u.g)(this.props.date,this.props.timestamp,this.props.localizationAPI.getLocaleInfo().appLocale),id:Q.I({id:this.props.id,renderContextType:this.context.renderContextType}),renderContextType:this.context.renderContextType})},e.prototype.renderHistoryItemContent=function(){return s.createElement(xn,{icon:this.props.icon,description:this.props.description,renderContextType:this.context.renderContextType})},e}(s.PureComponent),Vn=Object(I.c)((function(){return{body:Object(K.b)({display:"flex",direction:"inherit",flexDirection:"column",flexGrow:1,marginTop:"8px",marginRight:kn,paddingLeft:"3px",position:"relative",overflow:"hidden"}),container:Object(K.b)({display:"flex",direction:"inherit",overflow:"hidden",flexGrow:1,flexDirection:"row",flexWrap:"nowrap",flexShrink:0,margin:0,border:0,position:"relative",selectors:{":focus":{outline:"1px dotted transparent",selectors:{"#postFocusBar":{borderLeft:"2px solid",borderColor:it.a.gray110,display:"inline"}}}}}),postFocusBar:Object(K.b)({position:"absolute",left:2,top:0,right:0,bottom:0,width:1,backgroundColor:"transparent",display:"none",outline:"none"})}})),qn=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.itemRef=s.createRef(),o.styles=Vn(),o.historyItemClickHandler=o.historyItemClickHandler.bind(o),o.historyItemFocusHandler=o.historyItemFocusHandler.bind(o),o}return Object(r.__extends)(e,t),e.prototype.renderPersona=function(){return s.createElement(kt,{authorName:Object(c.g)(this.props.author),resolved:this.props.resolved,isParent:!1,authorColor:this.props.authorColor,authorImageURL:this.props.authorImageURL})},e.prototype.renderHeader=function(){return s.createElement(Ot,{authorName:Object(c.g)(this.props.author),resolved:this.props.resolved,renderContextType:this.context.renderContextType,contextMenuProps:{menuItems:[],actionBarItems:[],isTabbable:!1,parentId:"",trySelectPost:function(){},localizationAPI:void 0}})},e.prototype.getId=function(){return this.props.id},e.prototype.componentDidMount=function(){this.props.selected&&this.itemRef&&this.itemRef.current&&this.context.isFocusWithinPane()&&this.itemRef.current.focus()},e.prototype.renderFocusBar=function(){return s.createElement(Hn,{id:Q.F()})},e.prototype.historyItemFocusHandler=function(t){var e=document.getElementById(Q.H({id:this.props.id,renderContextType:this.context.renderContextType}));e&&t.target===e&&(this.props.selected||this.props.onSelect(this))},e.prototype.historyItemClickHandler=function(t){this.props.selected||this.props.onSelect(this),t.stopPropagation()},e.prototype.getRootDivProps=function(){return{className:Object(Tn.a)(this.styles.container),ref:this.itemRef,tabIndex:this.props.selected?0:-1,onFocus:this.historyItemFocusHandler,onClick:this.historyItemClickHandler,id:Q.H({id:this.props.id,renderContextType:this.context.renderContextType})}},e.prototype.render=function(){return s.createElement("div",Object(r.__assign)({role:"treeitem","aria-level":2,"aria-selected":this.props.selected},this.getRootDivProps()),this.renderFocusBar(),this.renderPersona(),s.createElement("div",{className:this.styles.body},this.renderHeader(),this.renderHistoryItemContent(),this.props.collapsed?void 0:this.renderTimestamp()))},e.contextTypes=mt.a,e}(Kn);function Wn(t,e,n,o){if(e.IsCurrentUser)return function(t,e,n){var o=165;switch(t){case b.a.ReadOnly:o=e?168:166;break;case b.a.Resolved:o=167;break;default:o=e?168:165}return n.getString(o)}(t,n,o);var r=160;switch(t){case b.a.ReadOnly:r=n?164:161;break;case b.a.Resolved:r=163;break;default:r=n?164:160}return o.formatString(r,Object(c.g)(e))}var Gn=function(t,e,n){if(n&&p.a())return n.assignees&&n.assignees[0]?Wn(e,n.assignees[0],an(n.completion),t):function(t,e,n){var o=169;switch(t){case b.a.ReadOnly:o=e?172:170;break;case b.a.Resolved:o=171;break;default:o=e?172:169}return n.getString(o)}(e,an(n.completion),t);switch(e){case b.a.Draft:return t.getStringOrUndefined(28);case b.a.Normal:return t.getStringOrUndefined(27);case b.a.ReadOnly:return t.getStringOrUndefined(30);case b.a.Resolved:return t.getStringOrUndefined(29);default:return}},Yn=function(t,e,n,o){var r=void 0,i=o.author,s=o.timestamp,a=o.isUnread;switch(e){case v.a.Normal:return r=a?145:21,n.formatString(r,i,s);case v.a.Editing:case v.a.EditPreCommitPending:return n.formatString(23,i,s);case v.a.New:return n.getStringOrUndefined(24);case v.a.ReadOnly:return r=a?137:25,n.formatString(r,i,s);case v.a.Resolved:return r=a?136:22,n.formatString(r,i,s);case v.a.LowFidelityWarningDelete:case v.a.LowFidelityWarningEdit:return n.getStringOrUndefined(26);default:return}},Qn=(n(340),n(72)),Jn=n(1525);function $n(t,e){return!e||e.selectedCardId!==t||Object(h.c)(e.focusDetails)&&!e.focusDetails.expanded?m.a.Collapsed:m.a.Expanded}function Xn(t,e){return!!e&&e.selectedCardId===t&&Object(h.c)(e.focusDetails)}function Zn(t,e){return!!e&&e.selectedCardId===t&&!Object(h.c)(e.focusDetails)}function to(t,e){return!!e&&!Object(h.c)(e.focusDetails)&&e.focusDetails.selectedPostId===t}function eo(t,e,n,o){switch(t){case Un.a.AllCardsTabbable:return!0;case Un.a.ExpandedCardOrFirstCardTabbable:if(o){var r=Xn(e,o),i=Zn(e,o),s=$n(e,o);return r||s===m.a.Expanded&&i}return n;case Un.a.ExpandedCardTabbable:return!!o&&(s=$n(e,o))===m.a.Expanded;case Un.a.SelectedCardTabbable:return!!o&&o.selectedCardId===e}}function no(t,e,n,o,r){if(o===v.a.PendingEdit||o===v.a.PendingDraft)return to(e,r);switch(t){case Un.b.AllPostsTabbable:return!0;case Un.b.ExpandedCardPostsTabbable:return(s=$n(n||e,r))===m.a.Expanded;case Un.b.ExpandedCardRootPostTabbable:var i=to(e,r),s=$n(n||e,r),a=Xn(n||e,r);return o!==v.a.New&&(i||a&&s===m.a.Expanded&&!n);case Un.b.SelectedPostTabbable:return to(e,r)}}function oo(t,e,n,o){return o===C.a.FullPane&&m.a.Collapsed===t||void 0!==n&&(n!==g.a.InChildPost||!e)}function ro(t,e,n,o,l,u,d,m,b,g,C,T,O,x,S,P,E,k,w,A,I,R){var j=!1;b&&!Object(h.c)(b.focusDetails)&&(j=b.focusDetails.selectedPostId===t.commentId);var _=function(t,e,n,o,r,s,c){if(e.pending!==y.a.None)return Object(i.i)().assertConditionTag(e.pending!==y.a.Delete,"Post with PostPendingType.Delete should not attempt to be rendered. Falling back to PendingEdit display mode.",595153811),s?v.a.PendingDraft:v.a.PendingEdit;if(r){if(s)return v.a.New;if(n&&!Object(h.c)(n.focusDetails)&&n.focusDetails.selectedPostId===t.commentId&&Object(h.h)(n))return n.focusDetails.editingSession===h.a.CommitPending?v.a.EditPreCommitPending:v.a.Editing}if(n&&!Object(h.c)(n.focusDetails)&&n.focusDetails.selectedPostId===t.commentId&&Object(h.e)(n.focusDetails.editingSession)){if(n.focusDetails.editingSession===h.a.LowFidelityWarningOnDelete)return v.a.LowFidelityWarningDelete;if(n.focusDetails.editingSession===h.a.LowFidelityWarningOnEdit)return v.a.LowFidelityWarningEdit;if(n.focusDetails.editingSession===h.a.LowFidelityWarningOnDeleteThread)return v.a.Normal;Object(i.i)().assertConditionTag(!1,"Unexpected editingSession? Expected LowFidelity* actual:"+n.focusDetails.editingSession,594043849)}if(e.displayingErrorUI)return v.a.Error;if(o)return v.a.Resolved;if(t.commentFlags&a.a.ReadOnly||c)return v.a.ReadOnly;return v.a.Normal}(t,e,b,m,k,C,T),D=e.displayDate||"",N=P.postIdToDraftIdMap[t.commentId],M=N?P.drafts[N]:void 0,B="",L="";p.K()&&x&&(B=x.authorColor,L=x.authorImageURL);var H=k&&M?Object(r.__assign)({draftId:N},Object(f.c)(M)):{};return s.createElement(Fn,Object(r.__assign)({},n,H,{postDisplayMode:_,id:t.commentId,author:t.author,authorColor:B,authorImageURL:L,timestamp:D,commentBody:t.commentBody,parent:""===t.parentId,lowFidelityWarningString:j?z.h(d,b):"",selected:j,isTabbable:no(O,t.commentId,t.parentId,_,b),supportsAtMentions:g},l,{localizationAPI:d,actionBarItems:Jn.a(u,_,b?b.focusDetails.editingSession:h.a.None,""===t.parentId,t.commentFlags),accessibilityLabel:Yn(0===t.parentId.length,_,d,{author:Object(c.g)(t.author),timestamp:D,repliesCount:S,commentBody:t.commentBody,isReplyPending:E,isUnread:p.l()&&!!(t.commentFlags&a.a.IsNew),anchorHintText:t.anchorHintText}),key:t.commentId,mentionableEditorProps:o,taskHistoryProps:A,accessibilityPositionInSet:w.accessibilityPositionInSet,accessibilitySetSize:w.accessibilitySetSize,isNew:!!(t.commentFlags&a.a.IsNew),scrollingContainerId:I,isCardHovered:R}))}function io(t,e,n,o,i,a,c){var l=Qn.d(e,t),u="",d="";p.K()&&o&&(u=o.authorColor,d=o.authorImageURL);var f=!1;return a&&!Object(h.c)(a.focusDetails)&&(f=a.focusDetails.selectedPostId===e.records[0].recordId),s.createElement(qn,Object(r.__assign)({},l,{onSelect:n.onSelect,id:e.records[0].recordId,key:e.records[0].recordId,author:e.records[0].user,timestamp:void 0,date:e.records[0].time,selected:f,authorColor:u,authorImageURL:d,resolved:i,collapsed:c,localizationAPI:t}))}function so(t){var e,n,o,i=t.thread,v=t.renderContextType,O=t.taskHeaderProps_deprecated,x=t.cardState,S=t.postViewState_deprecated,P=t.postStates,E=t.postCallbacks,k=t.mentionableEditorProps,w=t.cardCallbacks,A=t.cardOptions_deprecated,I=t.getPostOptions_deprecated,R=t.renderLiePost_deprecated,j=t.localizationAPI,_=t.postActionBarItems,D=t.focusState,N=t.isolationEdit,M=t.isAtMentionEnabled,B=t.isDraftThread,L=t.foldableLayoutState,H=t.isCommentsContextReadOnly,F=t.keyboardingOptions,U=t.personaIconPropertiesMap,z=t.draftState,K=t.cardRelativeDraftingState,V=t.accessibilityPositionInSet,q=t.accessibilitySetSize,W=t.maximumDimensions,G=t.menuItems,Y=t.mentionEditorProps,J=t.availableScreenHeight,$=t.extraPaddingLeft,X=t.extraPaddingRight,Z=t.preventDefaultKeyDownBehavior,tt=t.isCardHighlighted,et=t.contentBackgroundColor,nt=t.maxDraftHeight,ot=t.restrictActionControls,rt=t.cardCollapsedState,it=t.taskState,st=t.cardStyle,at=t.onCardLayout,ct=t.isCardTabbable,lt=Qn.h(i),pt=lt.commentId,ut=K===g.a.InChildPost,dt=!!(lt.commentFlags&a.a.Resolved),ft="";p.j()&&(ft=(null===(n=p.M()?P[0]:null===(e=S)||void 0===e?void 0:e[lt.commentId])||void 0===n?void 0:n.displayDate)||"");var ht=[],yt=function(t,e,n,o,r,i){if(Object(u.F)(e.loadState))return b.a.Loading;switch(e.pending){case d.a.Card:return b.a.CardPostCommitPending;case d.a.Editor:return b.a.ReplyPostCommitPending;case d.a.Delete:return b.a.CardPostCommitPending}if(i)return b.a.ReadOnly;if(r)return n&&n.focusDetails.editingSession===h.a.CommitPending?b.a.DraftPreCommitPending:b.a.Draft;if(n&&n.selectedCardId===t.commentId&&n.focusDetails.editingSession===h.a.LowFidelityWarningOnDeleteThread)return b.a.LowFidelityWarningOnDeleteThread;if(o&&n&&n.selectedCardId===t.commentId&&Object(h.c)(n.focusDetails)){if(Object(h.h)(n))return n.focusDetails.editingSession===h.a.CommitPending?b.a.ReplyPreCommitPending:b.a.Reply;if(n.focusDetails.editingSession===h.a.SessionRequestPending)return b.a.ReplySessionRequestPending}if(t.commentFlags&a.a.ReadOnly)return b.a.ReadOnly;if(t.commentFlags&a.a.Resolved)return b.a.Resolved;return b.a.Normal}(lt,x,D,!p.p()||K===g.a.InCard,B,H),mt=i.length-1,bt=!Object(u.F)(x.loadState),gt=p.N()?v!==C.a.HalfPane:R;if(bt&&(!B||gt))for(var vt=0;vt<i.length;vt++){var Ct=i[vt];if(Object(zn.a)(Ct)){var Tt=Ct.commentModel.commentId,Ot=to(Tt,D),xt=ut&&D&&!Object(h.c)(D.focusDetails)&&D.focusDetails.selectedPostId===Tt,St=p.M()?P[vt]:null===(o=S)||void 0===o?void 0:o[Tt];if(!St)throw new l.a("Post state undefined for comment "+Tt,-2130957493);var Pt=p.M()&&St.pending===y.a.Delete;if((!N||!ut||xt)&&!Pt){var Et=Object(zn.b)(Ct)?Qn.d(Ct.historyItem,j):void 0,kt=p.N()?{collapsed:rt===m.a.Collapsed,restrictActionControls:oo(rt,Ot,K,v),showFullComment:rt===m.a.Expanded,availableScreenHeight:J,extraPaddingLeft:$,extraPaddingRight:X,preventDefaultKeyDownBehavior:Z}:I(Tt,pt);ht.push(ro(Ct.commentModel,St,E,k,kt,_,j,dt,D,M,B,H,F.postTabbingMode,U?U[Object(c.g)(Ct.commentModel.author)]:void 0,mt,z,x.pending===d.a.Editor,!p.p()||ut||B,{accessibilitySetSize:i.length,accessibilityPositionInSet:vt+1},Et,W&&W.height?Object(Q.L)({id:pt,renderContextType:v}):Object(vn.b)(v)?Object(Q.m)():void 0,tt))}}else p.b()&&ht.push(io(j,Ct.historyItem,E,U?U[Object(c.g)(Ct.historyItem.records[0].user)]:void 0,dt,D,rt===m.a.Collapsed))}var wt=!A||p.N()?{highlightCard:tt,hideDraftBox:N||H,restrictActionControls:ot,contentBackgroundColor:et,maxDraftHeight:nt,hideHeader:N,availableScreenHeight:J,disableScroll:N,extraPaddingLeft:$,extraPaddingRight:X,preventDefaultKeyDownBehavior:Z,style:st}:A;return function(t,e,n,o,i,a,c,l,d,h,y,m,b,v,C,T,O,x,S,P,E,k,w){var A=Object(u.F)(n.loadState)?n.loadState.initialItemCount:i.length,I=y.cardIdToDraftIdMap[t.commentId],R=I?y.drafts[I]:void 0,j=(!p.p()||v===g.a.InCard)&&R?Object(r.__assign)({draftId:I},Object(f.c)(R)):{};return s.createElement(Cn,Object(r.__assign)({},o,j,{cardCollapsedState:$n(t.commentId,l),selected:Xn(t.commentId,l),hasSelectedChild:Zn(t.commentId,l),displayMode:m,id:t.commentId,supportsAtMentions:d,isTabbable:h},a,{localizationAPI:c,accessibilityLabel:Gn(c,m,e),anchorText:t.anchorHintText,author:t.author,authorColor:T?T.authorColor:"",authorImageURL:T?T.authorImageURL:"",cardRelativeDraftingState:v,taskHeaderProps:e,isNewThread:x,foldableLayoutState:b,accessibilityPositionInSet:C.accessibilityPositionInSet,accessibilitySetSize:C.accessibilitySetSize,maximumDimensions:O,scrollingContainerId:S,itemCount:A,menuItems:E,mentionEditorProps:k,onCardLayout:P,timestamp:w}),i)}(lt,p.N()?it?lo(pt,it,j,v,!!(lt.commentFlags&a.a.Resolved),H?T.a.ReadOnly:ot?T.a.Disabled:T.a.Default,w.onCardHeaderButtonPressed,wt.preventDefaultKeyDownBehavior,ct):void 0:O,x,w,ht,wt,j,D,M,ct,z,yt,L,K,{accessibilityPositionInSet:V,accessibilitySetSize:q},U&&p.K()?U[Object(c.g)(lt.author)]:void 0,W,B,Object(vn.b)(v)?Object(Q.m)():void 0,at,G,Y,ft)}n.d(e,"a",(function(){return $n})),n.d(e,"f",(function(){return Xn})),n.d(e,"b",(function(){return Zn})),n.d(e,"c",(function(){return eo})),n.d(e,"g",(function(){return co})),n.d(e,"d",(function(){return lo})),n.d(e,"e",(function(){return po}));var ao=s.memo(so);function co(t){return p.N()?s.createElement(ao,Object(r.__assign)({},t)):so(t)}function lo(t,e,n,o,r,i,s,a,c){if(p.b()){return{id:t,title:e.title,assignees:e.assignees,completion:r?100:e.completion,onHeaderButtonPressed:s,localizationAPI:n,renderContextType:o,displayMode:i,preventDefaultKeyDownBehavior:a,isTabbable:c}}}function po(t,e){return t.map((function(t){return e[Qn.e(t)]}))}},1525:function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return d})),n.d(e,"d",(function(){return f}));var o=n(3),r=n(186),i=n(9),s=n(12),a=n(124),c=n(1481),l=n(1566);function p(t,e,n,o,i){return Object(l.a)(e)&&n===s.a.LowFidelityWarningOnEdit?t.lowFidelityEdit:Object(l.a)(e)&&n===s.a.LowFidelityWarningOnDelete?t.lowFidelityDelete:e===c.a.Error?o?t.errorStateRoot:t.errorStateReply:e===c.a.ReadOnly||e===c.a.Resolved?t.empty:i&r.a.EditRestricted?o?t.empty:t.editRestrictedReply:e===c.a.Editing||e===c.a.EditPreCommitPending?t.editing:o?t.normalRoot:t.normalReply}function u(t,e,n,s,a){var c=(e.commentFlags&r.a.Resolved)>0;return c&&n?a&&i.b()?t.resolvedWithTask:t.resolved:n?i.l()&&(e.commentFlags&r.a.EditRestricted||s)?a?t.normalResolveSupportedEditRestrictedWithTask:t.normalResolveSupportedEditRestricted:a?t.normalResolveSupportedWithTask:t.normalResolveSupported:c&&!n?(Object(o.i)().assertConditionTag(!n&&c,"Card cannot be resolved when resolved is not supported",593764383),i.l()&&e.commentFlags&r.a.EditRestricted?t.normalResolveNotSupportedEditRestricted:t.normalResolveNotSupported):i.l()&&e.commentFlags&r.a.EditRestricted?t.normalResolveNotSupportedEditRestricted:t.normalResolveNotSupported}function d(t,e,n){var o={text:t.getString(5),icon:3,onClick:e.onDeleteThread,isDestructive:!0,tooltipText:t.getString(5)},r={text:t.getString(3),icon:5,onClick:e.onResolveThread},s=i.b()?{text:t.getString(126),icon:5,onClick:e.onResolveThread}:void 0,c={text:t.getString(4),icon:4,onClick:e.onReopenThread,tooltipText:t.getString(4)},l={text:t.getString(176),icon:4,onClick:e.onReopenThread,tooltipText:t.getString(176)},p={text:t.getString(15),icon:0,onClick:function(){},isCancelItem:!0},u={text:t.getString(120),onClick:e.onEditRootPost,icon:6,accessibilityLabel:t.getStringOrUndefined(40)},d=i.l()?{normalResolveSupported:[u,o,r],normalResolveSupportedWithTask:s?[u,o,s]:[],normalResolveNotSupported:[u,o],normalResolveSupportedEditRestricted:[o,r],normalResolveSupportedEditRestrictedWithTask:s?[o,s]:[],normalResolveNotSupportedEditRestricted:[o],resolved:[c,o],resolvedWithTask:[l,o]}:{normalResolveSupported:[o,r],normalResolveNotSupported:[o],resolved:[c,o],normalResolveSupportedEditRestricted:[],normalResolveNotSupportedEditRestricted:[],normalResolveSupportedWithTask:[],normalResolveSupportedEditRestrictedWithTask:[],resolvedWithTask:[]};return n===a.a.iOS&&(d.normalResolveNotSupported.push(p),d.normalResolveSupported.push(p)),d}function f(t,e,n){var o={text:t.getString(184),onClick:e.onClearError,icon:19,accessibilityLabel:t.getStringOrUndefined(184)},r={text:t.getString(5),onClick:e.onDelete,icon:3,accessibilityLabel:t.getStringOrUndefined(5),isDestructive:!0},s={text:i.l()?t.getString(121):t.getString(2),onClick:e.onDelete,icon:3,accessibilityLabel:t.getStringOrUndefined(41),isDestructive:!0},c={text:t.getString(15),onClick:e.onCancel,accessibilityLabel:t.getStringOrUndefined(43),icon:0,isCancelItem:!0},l={text:i.l()?t.getString(120):t.getString(1),onClick:e.onEdit,icon:6,accessibilityLabel:t.getStringOrUndefined(40)},p={text:t.getString(37),onClick:e.onEdit,accessibilityLabel:t.getStringOrUndefined(42),icon:0},u={text:t.getString(15),icon:1,onClick:e.onCancel,accessibilityLabel:t.getStringOrUndefined(39),isCancelItem:!0,usePrimaryButtonStyling:!1,tooltipText:t.getString(15)},d={text:t.getString(15),onClick:function(){},icon:0,accessibilityLabel:t.getString(15),isCancelItem:!0,tooltipText:t.getString(15)},f={text:t.getString(14),icon:2,onClick:e.onCommit,accessibilityLabel:t.getStringOrUndefined(38),usePrimaryButtonStyling:!0,tooltipText:t.getString(14)},h={text:i.l()?t.getString(121):t.getString(2),onClick:e.onLowFidelityWarningConfirm,icon:3,accessibilityLabel:t.getStringOrUndefined(41),isDestructive:!0},y={text:t.getString(15),onClick:e.onLowFidelityWarningCancel,accessibilityLabel:t.getStringOrUndefined(43),icon:0,isCancelItem:!0},m={text:t.getString(37),onClick:e.onLowFidelityWarningConfirm,accessibilityLabel:t.getStringOrUndefined(42),icon:0},b={text:t.getString(15),icon:1,onClick:e.onLowFidelityWarningCancel,accessibilityLabel:t.getStringOrUndefined(39),isCancelItem:!0,tooltipText:t.getString(15)},g={lowFidelityDelete:i.t()?[h,y]:[s,c],lowFidelityEdit:i.t()?[m,b]:[p,u],editing:[f,u],normalReply:[l,s],normalRoot:[l],errorStateRoot:[o,r],errorStateReply:[o,s],editRestrictedReply:[s],empty:[]};return n===a.a.iOS&&(g.normalReply.push(d),g.normalRoot.push(d),g.editRestrictedReply.push(d)),g}},1563:function(t,e,n){"use strict";var o="object"==typeof global&&global&&global.Object===Object&&global;e.a=o},1564:function(t,e,n){"use strict";(function(t){var o=n(1479),r=n(1610),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===i?o.a.Buffer:void 0,c=(a?a.isBuffer:void 0)||r.a;e.a=c}).call(this,n(875)(t))},1565:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n(89);function r(t,e){return t===o.b.Enabled}},1566:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n(1481);function r(t){return t===o.a.LowFidelityWarningDelete||t===o.a.LowFidelityWarningEdit}},1573:function(t,e,n){"use strict";var o=n(25);var r=function(){this.__data__=[],this.size=0};var i=function(t,e){return t===e||t!=t&&e!=e};var s=function(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1},a=Array.prototype.splice;var c=function(t){var e=this.__data__,n=s(e,t);return!(n<0)&&(n==e.length-1?e.pop():a.call(e,n,1),--this.size,!0)};var l=function(t){var e=this.__data__,n=s(e,t);return n<0?void 0:e[n][1]};var p=function(t){return s(this.__data__,t)>-1};var u=function(t,e){var n=this.__data__,o=s(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this};function d(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}d.prototype.clear=r,d.prototype.delete=c,d.prototype.get=l,d.prototype.has=p,d.prototype.set=u;var f=d;var h=function(){this.__data__=new f,this.size=0};var y=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var m=function(t){return this.__data__.get(t)};var b=function(t){return this.__data__.has(t)},g=n(1479),v=g.a.Symbol,C=Object.prototype,T=C.hasOwnProperty,O=C.toString,x=v?v.toStringTag:void 0;var S=function(t){var e=T.call(t,x),n=t[x];try{t[x]=void 0;var o=!0}catch(t){}var r=O.call(t);return o&&(e?t[x]=n:delete t[x]),r},P=Object.prototype.toString;var E=function(t){return P.call(t)},k=v?v.toStringTag:void 0;var w=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":k&&k in Object(t)?S(t):E(t)};var A=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var I,R=function(t){if(!A(t))return!1;var e=w(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},j=g.a["__core-js_shared__"],_=(I=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||""))?"Symbol(src)_1."+I:"";var D=function(t){return!!_&&_ in t},N=Function.prototype.toString;var M=function(t){if(null!=t){try{return N.call(t)}catch(t){}try{return t+""}catch(t){}}return""},B=/^\[object .+?Constructor\]$/,L=Function.prototype,H=Object.prototype,F=L.toString,U=H.hasOwnProperty,z=RegExp("^"+F.call(U).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var K=function(t){return!(!A(t)||D(t))&&(R(t)?z:B).test(M(t))};var V=function(t,e){return null==t?void 0:t[e]};var q=function(t,e){var n=V(t,e);return K(n)?n:void 0},W=q(g.a,"Map"),G=q(Object,"create");var Y=function(){this.__data__=G?G(null):{},this.size=0};var Q=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},J=Object.prototype.hasOwnProperty;var $=function(t){var e=this.__data__;if(G){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return J.call(e,t)?e[t]:void 0},X=Object.prototype.hasOwnProperty;var Z=function(t){var e=this.__data__;return G?void 0!==e[t]:X.call(e,t)};var tt=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=G&&void 0===e?"__lodash_hash_undefined__":e,this};function et(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}et.prototype.clear=Y,et.prototype.delete=Q,et.prototype.get=$,et.prototype.has=Z,et.prototype.set=tt;var nt=et;var ot=function(){this.size=0,this.__data__={hash:new nt,map:new(W||f),string:new nt}};var rt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var it=function(t,e){var n=t.__data__;return rt(e)?n["string"==typeof e?"string":"hash"]:n.map};var st=function(t){var e=it(this,t).delete(t);return this.size-=e?1:0,e};var at=function(t){return it(this,t).get(t)};var ct=function(t){return it(this,t).has(t)};var lt=function(t,e){var n=it(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this};function pt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}pt.prototype.clear=ot,pt.prototype.delete=st,pt.prototype.get=at,pt.prototype.has=ct,pt.prototype.set=lt;var ut=pt;var dt=function(t,e){var n=this.__data__;if(n instanceof f){var o=n.__data__;if(!W||o.length<199)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new ut(o)}return n.set(t,e),this.size=n.size,this};function ft(t){var e=this.__data__=new f(t);this.size=e.size}ft.prototype.clear=h,ft.prototype.delete=y,ft.prototype.get=m,ft.prototype.has=b,ft.prototype.set=dt;var ht=ft;var yt=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var mt=function(t){return this.__data__.has(t)};function bt(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new ut;++e<n;)this.add(t[e])}bt.prototype.add=bt.prototype.push=yt,bt.prototype.has=mt;var gt=bt;var vt=function(t,e){for(var n=-1,o=null==t?0:t.length;++n<o;)if(e(t[n],n,t))return!0;return!1};var Ct=function(t,e){return t.has(e)};var Tt=function(t,e,n,o,r,i){var s=1&n,a=t.length,c=e.length;if(a!=c&&!(s&&c>a))return!1;var l=i.get(t);if(l&&i.get(e))return l==e;var p=-1,u=!0,d=2&n?new gt:void 0;for(i.set(t,e),i.set(e,t);++p<a;){var f=t[p],h=e[p];if(o)var y=s?o(h,f,p,e,t,i):o(f,h,p,t,e,i);if(void 0!==y){if(y)continue;u=!1;break}if(d){if(!vt(e,(function(t,e){if(!Ct(d,e)&&(f===t||r(f,t,n,o,i)))return d.push(e)}))){u=!1;break}}else if(f!==h&&!r(f,h,n,o,i)){u=!1;break}}return i.delete(t),i.delete(e),u},Ot=g.a.Uint8Array;var xt=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,o){n[++e]=[o,t]})),n};var St=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n},Pt=v?v.prototype:void 0,Et=Pt?Pt.valueOf:void 0;var kt=function(t,e,n,o,r,s,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!s(new Ot(t),new Ot(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var c=xt;case"[object Set]":var l=1&o;if(c||(c=St),t.size!=e.size&&!l)return!1;var p=a.get(t);if(p)return p==e;o|=2,a.set(t,e);var u=Tt(c(t),c(e),o,r,s,a);return a.delete(t),u;case"[object Symbol]":if(Et)return Et.call(t)==Et.call(e)}return!1};var wt=function(t,e){for(var n=-1,o=e.length,r=t.length;++n<o;)t[r+n]=e[n];return t},At=Array.isArray;var It=function(t,e,n){var o=e(t);return At(t)?o:wt(o,n(t))};var Rt=function(t,e){for(var n=-1,o=null==t?0:t.length,r=0,i=[];++n<o;){var s=t[n];e(s,n,t)&&(i[r++]=s)}return i};var jt=function(){return[]},_t=Object.prototype.propertyIsEnumerable,Dt=Object.getOwnPropertySymbols,Nt=Dt?function(t){return null==t?[]:(t=Object(t),Rt(Dt(t),(function(e){return _t.call(t,e)})))}:jt;var Mt=function(t,e){for(var n=-1,o=Array(t);++n<t;)o[n]=e(n);return o};var Bt=function(t){return null!=t&&"object"==typeof t};var Lt=function(t){return Bt(t)&&"[object Arguments]"==w(t)},Ht=Object.prototype,Ft=Ht.hasOwnProperty,Ut=Ht.propertyIsEnumerable,zt=Lt(function(){return arguments}())?Lt:function(t){return Bt(t)&&Ft.call(t,"callee")&&!Ut.call(t,"callee")},Kt=n(1564),Vt=/^(?:0|[1-9]\d*)$/;var qt=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Vt.test(t))&&t>-1&&t%1==0&&t<e};var Wt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Gt={};Gt["[object Float32Array]"]=Gt["[object Float64Array]"]=Gt["[object Int8Array]"]=Gt["[object Int16Array]"]=Gt["[object Int32Array]"]=Gt["[object Uint8Array]"]=Gt["[object Uint8ClampedArray]"]=Gt["[object Uint16Array]"]=Gt["[object Uint32Array]"]=!0,Gt["[object Arguments]"]=Gt["[object Array]"]=Gt["[object ArrayBuffer]"]=Gt["[object Boolean]"]=Gt["[object DataView]"]=Gt["[object Date]"]=Gt["[object Error]"]=Gt["[object Function]"]=Gt["[object Map]"]=Gt["[object Number]"]=Gt["[object Object]"]=Gt["[object RegExp]"]=Gt["[object Set]"]=Gt["[object String]"]=Gt["[object WeakMap]"]=!1;var Yt=function(t){return Bt(t)&&Wt(t.length)&&!!Gt[w(t)]};var Qt=function(t){return function(e){return t(e)}},Jt=n(1611),$t=Jt.a&&Jt.a.isTypedArray,Xt=$t?Qt($t):Yt,Zt=Object.prototype.hasOwnProperty;var te=function(t,e){var n=At(t),o=!n&&zt(t),r=!n&&!o&&Object(Kt.a)(t),i=!n&&!o&&!r&&Xt(t),s=n||o||r||i,a=s?Mt(t.length,String):[],c=a.length;for(var l in t)!e&&!Zt.call(t,l)||s&&("length"==l||r&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||qt(l,c))||a.push(l);return a},ee=Object.prototype;var ne=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ee)};var oe=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),re=Object.prototype.hasOwnProperty;var ie=function(t){if(!ne(t))return oe(t);var e=[];for(var n in Object(t))re.call(t,n)&&"constructor"!=n&&e.push(n);return e};var se=function(t){return null!=t&&Wt(t.length)&&!R(t)};var ae=function(t){return se(t)?te(t):ie(t)};var ce=function(t){return It(t,ae,Nt)},le=Object.prototype.hasOwnProperty;var pe=function(t,e,n,o,r,i){var s=1&n,a=ce(t),c=a.length;if(c!=ce(e).length&&!s)return!1;for(var l=c;l--;){var p=a[l];if(!(s?p in e:le.call(e,p)))return!1}var u=i.get(t);if(u&&i.get(e))return u==e;var d=!0;i.set(t,e),i.set(e,t);for(var f=s;++l<c;){var h=t[p=a[l]],y=e[p];if(o)var m=s?o(y,h,p,e,t,i):o(h,y,p,t,e,i);if(!(void 0===m?h===y||r(h,y,n,o,i):m)){d=!1;break}f||(f="constructor"==p)}if(d&&!f){var b=t.constructor,g=e.constructor;b==g||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof g&&g instanceof g||(d=!1)}return i.delete(t),i.delete(e),d},ue=q(g.a,"DataView"),de=q(g.a,"Promise"),fe=q(g.a,"Set"),he=q(g.a,"WeakMap"),ye=M(ue),me=M(W),be=M(de),ge=M(fe),ve=M(he),Ce=w;(ue&&"[object DataView]"!=Ce(new ue(new ArrayBuffer(1)))||W&&"[object Map]"!=Ce(new W)||de&&"[object Promise]"!=Ce(de.resolve())||fe&&"[object Set]"!=Ce(new fe)||he&&"[object WeakMap]"!=Ce(new he))&&(Ce=function(t){var e=w(t),n="[object Object]"==e?t.constructor:void 0,o=n?M(n):"";if(o)switch(o){case ye:return"[object DataView]";case me:return"[object Map]";case be:return"[object Promise]";case ge:return"[object Set]";case ve:return"[object WeakMap]"}return e});var Te=Ce,Oe=Object.prototype.hasOwnProperty;var xe=function(t,e,n,o,r,i){var s=At(t),a=At(e),c=s?"[object Array]":Te(t),l=a?"[object Array]":Te(e),p="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),u="[object Object]"==(l="[object Arguments]"==l?"[object Object]":l),d=c==l;if(d&&Object(Kt.a)(t)){if(!Object(Kt.a)(e))return!1;s=!0,p=!1}if(d&&!p)return i||(i=new ht),s||Xt(t)?Tt(t,e,n,o,r,i):kt(t,e,c,n,o,r,i);if(!(1&n)){var f=p&&Oe.call(t,"__wrapped__"),h=u&&Oe.call(e,"__wrapped__");if(f||h){var y=f?t.value():t,m=h?e.value():e;return i||(i=new ht),r(y,m,n,o,i)}}return!!d&&(i||(i=new ht),pe(t,e,n,o,r,i))};var Se=function t(e,n,o,r,i){return e===n||(null==e||null==n||!Bt(e)&&!Bt(n)?e!=e&&n!=n:xe(e,n,o,r,t,i))};var Pe=function(t,e){return Se(t,e)},Ee=n(77),ke=n(670),we=n(537),Ae=n(72),Ie=n(10),Re=n(300);function je(){return _e||(_e=Object(Ee.b)(Ee.c,Pe)),_e}n.d(e,"b",(function(){return Me})),n.d(e,"i",(function(){return Be})),n.d(e,"f",(function(){return Le})),n.d(e,"a",(function(){return He})),n.d(e,"c",(function(){return Fe})),n.d(e,"e",(function(){return Ue})),n.d(e,"m",(function(){return ze})),n.d(e,"l",(function(){return Ke})),n.d(e,"h",(function(){return We})),n.d(e,"d",(function(){return Ge})),n.d(e,"n",(function(){return Ye})),n.d(e,"k",(function(){return Qe})),n.d(e,"j",(function(){return Je})),n.d(e,"g",(function(){return $e}));var _e=void 0,De=function(t,e){return e.resource.id},Ne=function(t,e){return e.componentTree.renderContextType},Me=function(){return Object(Ee.a)([De,Ie.d],(function(t,e){return e[t]}))},Be=function(){return Object(Ee.a)([De,Ie.l],(function(t,e){return e===t}))},Le=function(){return je()([De,Ie.j],(function(t,e){return e&&e.selectedCardId===t?e:void 0}))},He=function(){return Object(Ee.a)([De,Ne,Ie.j,Ie.i],(function(t,e,n,o){return Object(ke.a)(t,e,n,o)}))},Fe=function(){return Object(Ee.a)([De,Ie.e,Ie.d],(function(t,e,n){return Object(we.c)(t,e,n)}))},Ue=function(){return Object(Ee.a)([De,Ie.i],(function(t,e){return e.drafts[t]}))},ze=function(t,e,n){return Object(Ee.a)([De,Ie.e,n,t,e],(function(t,e,n,o,r){return Object(we.b)(t,e,n,o,r)}))},Ke=function(t){return je()([t,Ie.q],(function(t,e){return t.thread.reduce((function(t,n){return t[n.commentId]=e[n.commentId],t}),{})}))},Ve=function(t){return t.commentState.commentData[0]?t.commentState.commentData[0].commentId:void 0},qe=function(t){return t.commentState.commentData.length},We=function(t){return Object(Ee.a)([De,Ve,qe,t],(function(t,e,n,o){return n?t===e:!!o.draftThreadState}))},Ge=function(t,e){return Object(Ee.a)([t,Ie.j,Ne,e],(function(t,e,n,o){return Object(we.a)(t,e,n,o)}))},Ye=function(t){return Object(Ee.a)([t],(function(t){return Object(o.f)(t)}))},Qe=function(){return Object(Ee.a)([De,Re.a],(function(t,e){return e.tasks[t]}))},Je=function(t,e){return je()([t,e],(function(t,e){return Object(Ae.k)(t.thread,e)}))},$e=function(){return Object(Ee.a)([De,Ie.i],(function(t,e){return e.cardIdToDraftIdMap[t]===t}))}},1574:function(t,e,n){"use strict";var o=n(0);Boolean;var r=n(3),i=n(98),s=n(1),a=n(89),c=n(186),l=n(128),p=n(90),u=n(146),d=n(66),f=n(24),h=n(21),y=n(176),m=n(9),b=function(){function t(){this.hasValue=!1,this.callbacks=[]}return t.prototype.set=function(t){this.value=t,this.hasValue=!0,this.callbacks.forEach((function(e){return e(t)})),this.callbacks=[]},t.prototype.getValue=function(t){var e=this;if(this.hasValue)try{return Promise.resolve(t(this.value))}catch(t){return Promise.reject(t)}return new Promise((function(n,o){e.callbacks.push((function(e){try{n(t(e))}catch(t){o(t)}}))}))},t}(),g=n(339),v=n(380),C=n(650),T=n(771),O=n(30),x=n(303),S=n(346),P=n(19),E=n(293),k=n(135),w=n(12),A=n(1576),I=n(1496),R=n(147),j=n(774),_=n(269),D=n(125),N=n(127),M=n(124),B=n(18),L=n(1507),H=n(670),F=n(157),U=n(775),z=n(340),K=n(1509),V=n(301),q=n(133),W=n(72),G=n(1525),Y=n(671),Q=n(148);function J(t){if(t.topVisibleThread&&t.componentTree.renderContextType!==B.a.HalfPane&&!t.focusedCommentInfo)return t.topVisibleThread.cardId}n.d(e,"b",(function(){return J}));var $=function(t){function e(e){var n,o,i,s,c=t.call(this,e)||this;c.initialAtMentionCapability=new b,c.onCommentInterruptableCommand=function(t){var e,n;switch(t.type){case"DiscardDraft":var o=void 0;if(t.isCancellable&&c.props.focusedCommentInfo){var i=Object(U.a)(c.props.draftState,c.props.componentTree.renderContextType,null===(e=c.props.focusedCommentInfo)||void 0===e?void 0:e.focusedComment);o=c.getOnWillDiscardCallback(c.props.focusedCommentInfo.focusedComment,i)}var s=Object(V.c)(!0,c.props.componentTree.renderContextType,null===(n=c.props.focusedCommentInfo)||void 0===n?void 0:n.focusedComment,c.props.createdCommentLie,c.props.focusedThreadIdBeforeCommentSession);return c.props.discardDraftAsync({renderContextType:c.props.componentTree.renderContextType,telemetryVisitor:c.props.telemetryVisitor,trackback:r.h.reserveTag(593826208)},O.a.Canvas,s,o);default:return Object(r.i)().assertConditionTag(!1,"Unknown type of CommentInterruptableCommand",593826210),Promise.resolve(p.a.Unhandled)}},c.onCardPost=function(t){var e,n=(null===(e=c.props.createdCommentLie)||void 0===e?void 0:e.newComment.commentId)===t.getId(),o=t.getId(),i=c.props.draftState.cardIdToDraftIdMap[o],s=c.props.draftState.drafts[i],l=n?{type:"CREATE"}:{type:"REPLY",parentId:t.getId()};F.b({trackback:r.h.reserveTag(593622435),commentCardRef:t,focusedComment:c.tryGetFocusedComment(),areMentionsEnabled:Object(P.e)(c.props.modelCapabilities,c.props.atMentionState)===a.b.Enabled,session:l,componentTree:c.props.componentTree,dispatchProps:c.props,telemetryVisitor:c.props.telemetryVisitor,localizationAPI:c.props.localizationAPI,selectedTaskAssignee:s&&s.selectedTaskAssignee}).catch((function(t){Object(h.b)(t)?Object(r.i)().assertConditionTag(!1,t.message,593622464):Object(r.i)().assertConditionTag(!1,"Unknown error thrown from cardOnCommit: "+t,593622465)}))},c.cardOnSelectExpandCallback=function(t,e){var n,o=Object(H.a)(t.getId(),c.props.componentTree.renderContextType,null===(n=c.props.focusedCommentInfo)||void 0===n?void 0:n.focusedComment,c.props.draftState);F.n({trackback:r.h.reserveTag(593826247),commentCardRef:t,renderContextType:c.props.componentTree.renderContextType,dispatchProps:c.props,telemetryVisitor:c.props.telemetryVisitor,selectRootPost:e,relativeDraftingState:o,componentTree_deprecated:m.mb()?void 0:c.props.componentTree})},c.cardOnSelectCollapseCallback=function(t){F.m({trackback:r.h.reserveTag(593826248),commentCardRef:t,renderContextType:c.props.componentTree.renderContextType,dispatchProps:c.props,telemetryVisitor:c.props.telemetryVisitor})},c.cardOnBeginReplyCallback=function(t){F.a({trackback:r.h.reserveTag(593826249),threadId:t.getId(),renderContextType:c.props.componentTree.renderContextType,dispatchProps:c.props,telemetryVisitor:c.props.telemetryVisitor,componentTree_deprecated:m.mb()?void 0:c.getComponentTree()})},c.cardOnResolveThread=function(t,e){F.l({trackback:r.h.reserveTag(593826250),id:t,renderContextType:c.props.componentTree.renderContextType,dispatchProps:c.props,telemetryVisitor:c.props.telemetryVisitor,localizationAPI:c.props.localizationAPI,isTask:e})},c.cardOnReopenThread=function(t,e){F.k({trackback:r.h.reserveTag(593826251),id:t,renderContextType:c.props.componentTree.renderContextType,dispatchProps:c.props,telemetryVisitor:c.props.telemetryVisitor,localizationAPI:c.props.localizationAPI,isTask:e})},c.cardOnDelete=function(t){var e;F.c({trackback:r.h.reserveTag(593826252),id:t,data:c.props.dataItems,focusedComment:null===(e=c.props.focusedCommentInfo)||void 0===e?void 0:e.focusedComment,componentTree:c.props.componentTree,invokeModalDialog:c.invokeModalDialog,dispatchProps:c.props,telemetryVisitor:c.props.telemetryVisitor,localizationAPI:c.props.localizationAPI,focusHandlerRegistry:c.props.focusManager,isTask:!!c.props.taskState.tasks[t],isNewCommentButtonFocusable:!c.isNewCommentButtonDisabled(),threadIndex:W.f(c.state.allRenderableItemThreads,t),shouldCheckForLowFidelity:c.shouldCheckForLowFidelityOnCardDelete()})},c.cardOnDraftingInputSizeChange=function(t,e){var n=Object(V.b)(c.props.createdCommentLie);F.e({trackback:r.h.reserveTag(593826253),cardId:t.getId(),isCardLie:t.getId()===n,newHeight:e,renderContextType:c.props.componentTree.renderContextType,focusedComment:c.tryGetFocusedComment(),dispatchProps:c.props,telemetryVisitor:c.props.telemetryVisitor})},c.cardOnDraftEmptinessChanged=function(t,e){F.q({trackback:r.h.reserveTag(592213848),contentId:t.getId(),isEmpty:e,renderContextType:c.props.componentTree.renderContextType,draftIdMap:c.props.draftState.cardIdToDraftIdMap,actionDispatchers:c.props,telemetryVisitor:c.props.telemetryVisitor})},c.cardOnEditorFocusLost_deprecated=function(t){var e=Object(V.b)(c.props.createdCommentLie);F.g({trackback:r.h.reserveTag(593826254),commentCardRef:t,isCardLie:t.getId()===e,renderContextType:c.props.componentTree.renderContextType,dispatchProps:c.props,telemetryVisitor:c.props.telemetryVisitor})},c.cardOnEditorFocusLost=function(t){F.f({trackback:r.h.reserveTag(592065735),id:t.getId(),draftState:c.props.draftState,renderContextType:c.props.componentTree.renderContextType,dispatchProps:c.props,telemetryVisitor:c.props.telemetryVisitor})},c.cardOnSaveDraft=function(t,e){m.S()&&F.w({trackback:r.h.reserveTag(593826255),id:t,editor:e,renderContextType:c.props.componentTree.renderContextType,draftIdMap:c.props.draftState.cardIdToDraftIdMap,actionDispatchers:c.props,telemetryVisitor:c.props.telemetryVisitor})},c.cardOnSaveDraft_deprecated=function(t,e){m.S()||F.x(r.h.reserveTag(592720404),t,e,c.props.componentTree.renderContextType,c.props.draftState.cardIdToDraftIdMap,c.props,c.props.telemetryVisitor)},c.onCardCancel=function(t){var e,n,o=(null===(e=c.props.createdCommentLie)||void 0===e?void 0:e.newComment.commentId)===t.getId(),i=c.tryGetFocusedComment(),s=Object(V.c)(!0,c.props.componentTree.renderContextType,null===(n=c.props.focusedCommentInfo)||void 0===n?void 0:n.focusedComment,c.props.createdCommentLie,c.props.focusedThreadIdBeforeCommentSession);F.d({trackback:r.h.reserveTag(592840780),focusedComment:i,showDiscardDialog:!1,invokeModalDialog:c.invokeModalDialog,componentTree:c.props.componentTree,dispatchProps:c.props,closeOnDiscard:o&&s,draftId:i?c.props.draftState.cardIdToDraftIdMap[i.selectedCardId]:void 0,draftState:c.props.draftState,telemetryVisitor:c.props.telemetryVisitor,localizationAPI:c.props.localizationAPI,focusHandlerRegistry:c.props.focusManager,isNewCommentButtonFocusable:!c.isNewCommentButtonDisabled(),lieIndex:W.f(c.state.allRenderableItemThreads,t.getId()),createdCommentLie:c.props.createdCommentLie})},c.onCardHeaderButtonPressed=function(t){if(m.b()){var e=c.props.taskState.tasks[t];e&&F.o({trackback:r.h.reserveTag(593826258),id:e.commentId,taskState:e.currentState,renderContextType:c.props.componentTree.renderContextType,dispatchProps:c.props,telemetryVisitor:c.props.telemetryVisitor,localizationAPI:c.props.localizationAPI})}},c.cardOnHighlight=function(t){F.i({trackback:r.h.reserveTag(593826259),commentCardRef:t,renderContextType:c.props.componentTree.renderContextType,dispatchProps:c.props,telemetryVisitor:c.props.telemetryVisitor})},c.onPostDelete=function(t){var e="string"==typeof t?t:Object(Y.a)(t)?t.getId():"";F.D({trackback:r.h.reserveTag(593826312),id:e,data:c.props.dataItems,focusedComment:c.tryGetFocusedComment(),renderContextType:c.props.componentTree.renderContextType,actionDispatchers:c.props,telemetryVisitor:c.props.telemetryVisitor,localizationAPI:c.props.localizationAPI})},c.onPostEdit=function(t){var e="string"==typeof t?t:Object(Y.a)(t)?t.getId():"";F.E({trackback:r.h.reserveTag(593826316),id:e,data:c.props.dataItems,focusedComment:c.tryGetFocusedComment(),renderContextType:c.props.componentTree.renderContextType,actionDispatchers:c.props,telemetryVisitor:c.props.telemetryVisitor,componentTree_deprecated:m.mb()?void 0:c.props.componentTree})},c.onPostCommit=function(t){F.C({trackback:r.h.reserveTag(593826260),id:t.getId(),data:c.props.dataItems,focusedComment:c.tryGetFocusedComment(),contentPromise:t.getContentsAsync(),atMentionsEnabled:Object(P.e)(c.props.modelCapabilities,c.props.atMentionState)===a.b.Enabled,componentTree:c.props.componentTree,actionDispatchers:c.props,telemetryVisitor:c.props.telemetryVisitor,localizationAPI:c.props.localizationAPI}).catch((function(t){Object(h.b)(t)?Object(r.i)().assertConditionTag(!1,t.message,593826261):Object(r.i)().assertConditionTag(!1,"Unknown error thrown from postOnCommit: "+t,593826262)}))},c.onPostCancel=function(t){var e,n=c.tryGetFocusedComment(),o=Object(V.c)(!0,c.props.componentTree.renderContextType,null===(e=c.props.focusedCommentInfo)||void 0===e?void 0:e.focusedComment,c.props.createdCommentLie,c.props.focusedThreadIdBeforeCommentSession);F.A({trackback:r.h.reserveTag(593826263),commentId:t.getId(),setContents:t.setContents.bind(t),data:c.props.dataItems,focusedComment:n,shouldClosePaneAfterDiscardDraft:o,onWillDiscardCallback:void 0,renderContextType:c.props.componentTree.renderContextType,dispatchProps:c.props,telemetryVisitor:c.props.telemetryVisitor,localizationAPI:c.props.localizationAPI})},c.onPostDraftEmptinessChanged=function(t,e){F.q({trackback:r.h.reserveTag(592041678),contentId:t.getId(),isEmpty:e,renderContextType:c.props.componentTree.renderContextType,draftIdMap:c.props.draftState.postIdToDraftIdMap,actionDispatchers:c.props,telemetryVisitor:c.props.telemetryVisitor})},c.onPostSaveDraft=function(t,e){m.S()&&F.w({trackback:r.h.reserveTag(592720405),id:t,editor:e,renderContextType:c.props.componentTree.renderContextType,draftIdMap:c.props.draftState.postIdToDraftIdMap,actionDispatchers:c.props,telemetryVisitor:c.props.telemetryVisitor})},c.onPostSaveDraft_deprecated=function(t){m.S()||F.x(r.h.reserveTag(593826264),t,void 0,c.props.componentTree.renderContextType,c.props.draftState.postIdToDraftIdMap,c.props,c.props.telemetryVisitor)},c.onRenderableItemSelect=function(t){var e=Object(V.b)(c.props.createdCommentLie),n=t.getId(),o=n===e?c.props.createdCommentLie&&{commentModel:c.props.createdCommentLie.newComment}:c.props.dataItems.find((function(t){return W.e(t)===n}));o?F.H({trackback:r.h.reserveTag(593826266),renderableItem:o,focusedComment:c.tryGetFocusedComment(),renderContextType:c.props.componentTree.renderContextType,dispatchProps:c.props,telemetryVisitor:c.props.telemetryVisitor,componentTree_deprecated:m.mb()?void 0:c.getComponentTree()}):Object(r.i)().assertConditionTag(!1,"Selection coming from an unknown post?",593826265)},c.getThreadedRenderableIds=Object(v.b)((function(t){return t.map((function(t){return t.map(W.e)}))}),(function(){return[c.state.allRenderableItemThreads]})),c.getThreadPostStates=(n=[],o={},i=[],s=function(t,e){if(t===n&&e===o)return i;var r=t.map((function(t,r){return t===n[r]&&t.every((function(t){return e[t]===o[t]}))?i[r]:t.map((function(t){return e[t]}))}));return n=t,o=e,i=r,r},function(){return s(c.getThreadedRenderableIds(),c.props.postViewStates)}),c.getListItemKey=function(t){var e=W.h(t).commentId,n=c.props.cardViewStates[e];return n&&n.alternateId||e},c.onSelectedTaskAssigneeUpdated=function(t){m.b()?F.z({trackback:r.h.reserveTag(593826304),renderContextType:c.props.componentTree.renderContextType,dispatchProps:c.props,telemetryVisitor:c.props.telemetryVisitor,selectedAssignee:t}):Object(r.i)().assertConditionTag(!1,"Selected Task Assignee Updated action type is not supported",593826305)},c.onCardMounted=function(t){F.j({cardProps:t,componentTree:c.props.componentTree,focusManager:c.props.focusManager})},c.onCardEditorMounted=function(t){F.h({cardId:t,componentTree:c.props.componentTree,focusManager:c.props.focusManager})},c.onPostEditorMounted=function(t){F.F({postId:t,componentTree:c.props.componentTree,focusManager:c.props.focusManager})},c.notifyRenderedOnce=Object(C.a)((function(){c.props.onInitialRender({renderContextType:c.props.componentTree.renderContextType})})),c.onPostError=function(t){F.G({trackback:r.h.reserveTag(593764372),id:t.getId(),data:c.props.dataItems,renderContextType:c.props.componentTree.renderContextType,actionDispatchers:c.props,telemetryVisitor:c.props.telemetryVisitor})},c.onClearPostError=function(t){F.B({trackback:r.h.reserveTag(593764373),id:t.getId(),data:c.props.dataItems,renderContextType:c.props.componentTree.renderContextType,actionDispatchers:c.props,telemetryVisitor:c.props.telemetryVisitor})},c.onLowFidelityWarningCancel=function(){var t;F.s({focusState:null===(t=c.props.focusedCommentInfo)||void 0===t?void 0:t.focusedComment,renderContextType:c.props.componentTree.renderContextType,dispatchProps:c.props,telemetryVisitor:c.props.telemetryVisitor})},c.onLowFidelityWarningConfirm=function(){var t;F.t({focusState:null===(t=c.props.focusedCommentInfo)||void 0===t?void 0:t.focusedComment,onCardDelete:c.cardOnDelete,onPostDelete:c.onPostDelete,onPostEdit:c.onPostEdit})},c.commentEditorOnKeyDown=function(t){c.commentEditorKeyDownHandler.onKeyDown(t)},c.startNewCommentSession=function(){c.props.discardDraftAndStartNewCommentSession({renderContextType:c.props.componentTree.renderContextType,trackback:r.h.reserveTag(593826323),telemetryVisitor:c.props.telemetryVisitor},O.a.SharedComments,c.getComponentTree())},c.closePane=c.closePane.bind(c),c.getCommentPostOptions_deprecated=c.getCommentPostOptions_deprecated.bind(c),c.onCommentUIAction=c.onCommentUIAction.bind(c),c.onGetUserContacts=c.onGetUserContacts.bind(c),c.onMentionCreated=c.onMentionCreated.bind(c),c.onCurrentMentionsUpdated_deprecated=c.onCurrentMentionsUpdated_deprecated.bind(c),c.onMentioneesStillInDraftUpdated=c.onMentioneesStillInDraftUpdated.bind(c),c.renderCommentThread=c.renderCommentThread.bind(c),c.onGhostCommentClicked=c.onGhostCommentClicked.bind(c),c.closePaneNoDialog=c.closePaneNoDialog.bind(c),c.invokeModalDialog=c.invokeModalDialog.bind(c),c.deleteThreadConfirmCallback=c.deleteThreadConfirmCallback.bind(c),c.getOnWillDiscardCallback=c.getOnWillDiscardCallback.bind(c),c.getCommentCardTaskHeaderProps_deprecated=Object(v.a)(c.getCommentCardTaskHeaderProps_deprecated.bind(c)),c.isReadyToRender=c.isReadyToRender.bind(c),c.commentPostCallbackProps={onDelete:c.onPostDelete,onEdit:c.onPostEdit,onCommit:c.onPostCommit,onCancel:c.onPostCancel,onSelect:c.onRenderableItemSelect,onDraftEmptinessChanged:c.onPostDraftEmptinessChanged,onSaveDraft:c.onPostSaveDraft,onSaveDraft_deprecated:c.onPostSaveDraft_deprecated,onLowFidelityWarningConfirm:c.onLowFidelityWarningConfirm,onLowFidelityWarningCancel:c.onLowFidelityWarningCancel,onPostEditorMounted:c.onPostEditorMounted,onError:c.onPostError,onClearError:c.onClearPostError,commentEditorAdditionalKeyDownHandler:c.commentEditorOnKeyDown},c.commentCardCallbackProps={onEditorFocus:c.cardOnBeginReplyCallback,onCardSelectExpand:c.cardOnSelectExpandCallback,onCardSelectCollapse:c.cardOnSelectCollapseCallback,onCardHighlight:c.cardOnHighlight,onDraftingInputSizeChange:c.cardOnDraftingInputSizeChange,onDraftEmptinessChanged:c.cardOnDraftEmptinessChanged,onEditorBlur:m.mb()?c.cardOnEditorFocusLost:c.cardOnEditorFocusLost_deprecated,onCancel:c.onCardCancel,onPost:c.onCardPost,onSaveDraft:c.cardOnSaveDraft,onSaveDraft_deprecated:c.cardOnSaveDraft_deprecated,onSelectedTaskAssigneeUpdated:c.onSelectedTaskAssigneeUpdated,onCardMounted:c.onCardMounted,onCardEditorMounted:c.onCardEditorMounted,onCardRendered:c.notifyRenderedOnce,onLowFidelityWarningCancel:c.onLowFidelityWarningCancel,onLowFidelityWarningConfirm:c.onLowFidelityWarningConfirm,onCardHeaderButtonPressed:c.onCardHeaderButtonPressed,commentEditorAdditionalKeyDownHandler:c.commentEditorOnKeyDown},c.cardContextualMenuCallbackProps={onReopenThread:c.cardOnReopenThread,onResolveThread:c.cardOnResolveThread,onDeleteThread:c.cardOnDelete,onEditRootPost:c.onPostEdit},c.postActionBarItems=G.d(c.props.localizationAPI,c.commentPostCallbackProps,Object(q.a)()),c.cardContextMenuItems=G.b(c.props.localizationAPI,c.cardContextualMenuCallbackProps,Object(q.a)()),c.paneContainerKeyDownHandler=c.props.focusManager.paneContainerKeyDown((function(){return c.props.componentTree})),c.commentContentsKeyDownHandler=c.props.focusManager.commentContentsKeyDown((function(){return c.props.componentTree}),(function(){return c.props.dataItems})),c.commentEditorKeyDownHandler=c.props.focusManager.commentEditorKeyDown((function(){return c.props.componentTree}));var l=Object(r.i)().createActivityObject("BaseCommentPaneConstruction",c.props.telemetryVisitor,r.a.None);return c.correlationId_deprecated=Object(g.a)(),l.addDataField(f.a.PaneCorrelationId,c.props.correlationId,r.c.SystemMetadata),l.addDataField(f.a.SharedCommentsVersion,T.a,r.c.SystemMetadata),l.successTag(593826206),c}return Object(o.__extends)(e,t),e.prototype.onCommentUIAction=function(t){return t.actionType===l.a.BackKeyPressed?(Object(r.i)().assertConditionTag(Object(d.d)(t.actionBehavior),"This action type does not support toggled/enabled status",593826207),Object(d.d)(t.actionBehavior)&&this.onBackKeyPressed(),d.a.Success):d.a.NotHandled},e.prototype.getOnWillDiscardCallback=function(t,e){var n,o=this;if(t){var r=m.mb()?Object(x.a)(this.props.draftState,t):Object(x.b)(this.getComponentTree(),this.props.draftState,t,null===(n=this.props.createdCommentLie)||void 0===n?void 0:n.draftId,this.props.telemetryVisitor);return Object(w.c)(t.focusDetails)&&r===D.a.CanAutoDiscard?void 0:function(t,n){return o.invokeModalDialog(e,t,n)}}},e.prototype.updateDraftRenderLocks=function(t){0!==Object(E.a)(this.props.draftState)&&this.props.updateRenderLocksForAllDrafts({renderContextType:this.props.componentTree.renderContextType,trackback:r.h.reserveTag(593826211),telemetryVisitor:this.props.telemetryVisitor},t)},e.prototype.componentDidMount=function(){this.props.registerComponentUIActionListener(this.onCommentUIAction),this.props.registerComponentInterruptableCommandListener(this.onCommentInterruptableCommand),Object(P.e)(this.props.modelCapabilities,this.props.atMentionState)!==a.b.Unknown&&this.processAtMentionCapabilityState(),this.updateDraftRenderLocks(!0),m.w()&&this.props.lastContextChangeIncrement>0&&this.onContextChanged()},e.prototype.componentWillUnmount=function(){this.props.unregisterComponentUIActionListener(this.onCommentUIAction),this.props.unregisterComponentInterruptableCommandListener(this.onCommentInterruptableCommand)},e.prototype.componentDidUpdate=function(t,e){var n,r,i=this;if(this.props.lastContextChangeIncrement!==t.lastContextChangeIncrement&&this.onContextChanged(),Object(P.e)(this.props.modelCapabilities,this.props.atMentionState)!==Object(P.e)(t.modelCapabilities,t.atMentionState)&&this.processAtMentionCapabilityState(),this.sendReadyToRenderNotification(t),this.props.draftState!==t.draftState)try{for(var s=Object(o.__values)(Object(E.b)(this.props.draftState)),a=s.next();!a.done;a=s.next()){var c=a.value;if(void 0===t.draftState.drafts[c]||t.draftState.drafts[c].renderContextType!==this.props.draftState.drafts[c].renderContextType){this.updateDraftRenderLocks(!0);break}}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}var l=this.props;setTimeout((function(){return i.props.focusManager.commentPanePropsUpdated(i.props.componentTree,t,l)}))},e.prototype.closePane=function(){var t,e=this;if(m.db())F.p({ownProps:this.props,dispatchProps:this.props,componentTree:this.props.componentTree,draftState:this.props.draftState,focusedComment:null===(t=this.props.focusedCommentInfo)||void 0===t?void 0:t.focusedComment,createdCommentLie:this.props.createdCommentLie,invokeModalDialog:this.invokeModalDialog});else if(this.props.componentTree.renderContextType!==B.a.HalfPane&&this.props.focusedCommentInfo&&this.props.focusedCommentInfo.focusedComment.focusDetails.editingSession===w.a.Active&&!m.p()){this.props.discardDraftAsync({renderContextType:this.props.componentTree.renderContextType,telemetryVisitor:this.props.telemetryVisitor,trackback:r.h.reserveTag(593826268)},O.a.SharedComments,!0,this.getOnWillDiscardCallback(this.props.focusedCommentInfo.focusedComment,N.a.ClosePaneDraft)).then((function(t){t===p.a.Canceled?e.onCloseCanceled():t===p.a.Unhandled&&Object(r.i)().assertConditionTag(t!==p.a.Unhandled,"Unhandled request to discard on close pane",593826267)})).catch((function(t){Object(h.b)(t)?Object(r.i)().assertConditionTag(!1,t.message,593826269):Object(r.i)().assertConditionTag(!1,"Unknown error in closePane when calling discardDraftAsync "+t,593826270)}))}else this.closePaneNoDialog()},e.prototype.onCloseCanceled=function(){},e.prototype.renderCommentThread=function(t,e,n,o){var r,i;void 0===o&&(o=K.g);var a=W.h(e);if(m.lb())return s.createElement(A.a,{commentAPI:this.props.commentAPI,componentTree:this.props.componentTree,focusManager:this.props.focusManager,localizationAPI:this.props.localizationAPI,peopleAPI:this.props.peopleAPI,resource:{id:a.commentId},getDiscardDraftCallback:this.getOnWillDiscardCallback,telemetryVisitor:this.props.telemetryVisitor,accessibilityPositionInSet:m.N()?t+1:n.accessibilityPositionInSet,accessibilitySetSize:m.N()?this.state.allRenderableItemThreads.length:n.accessibilitySetSize,onInitialRender:this.props.onInitialRender});var l=!(!this.props.createdCommentLie||a.commentId!==this.props.createdCommentLie.newComment.commentId),p=0===this.props.dataItems.length||W.h(this.props.dataItems).commentId===a.commentId,u=void 0!==this.props.focusedCommentInfo?this.props.focusedCommentInfo.focusedComment:void 0,d=this.getMentionableCommentEditorProps(Object(P.e)(this.props.modelCapabilities,this.props.atMentionState),m.E()?this.props.authToken:this.props.atMentionState.authToken,this.props.suggestionsDetails),f=this.getCommentCardOptions_deprecated(a.commentId,t),h=a.commentId,y=!!(a.commentFlags&c.a.Resolved),b=L.a.Default,g=!(!this.props.focusedCommentInfo||!Object(w.i)(this.props.focusedCommentInfo.focusedComment.focusDetails));(m.N()?g:f.restrictActionControls)&&(b=L.a.Disabled),this.props.readOnly&&(b=L.a.ReadOnly);var v=!m.N()&&this.props.taskState.tasks[h]?this.getCommentCardTaskHeaderProps_deprecated(h,this.props.taskState.tasks[h].currentState,this.props.localizationAPI,this.props.componentTree.renderContextType,y,b):void 0,C=null===(r=this.props.taskState.tasks[h])||void 0===r?void 0:r.currentState,T=G.c(this.cardContextMenuItems,a,this.getResolveSupported(),Object(w.f)(a,u),m.N()?!!C:!!v),O=m.N()?this.props.componentTree.renderContextType===B.a.HalfPane&&!!u&&Object(w.h)(u)&&!Object(w.c)(u.focusDetails):this.props.componentTree.renderContextType===B.a.HalfPane,x=this.props.highlightedCommentId||J(this.props),S=this.getPinnedCardIndex(),E=this.getThreadPostStates()[null!=S?S:t];return o({thread:e,renderContextType:this.props.componentTree.renderContextType,taskHeaderProps_deprecated:v,cardState:this.props.cardViewStates[h],postViewState_deprecated:m.M()?void 0:this.props.postViewStates,postCallbacks:this.commentPostCallbackProps,mentionableEditorProps:d,cardCallbacks:this.commentCardCallbackProps,cardOptions_deprecated:m.N()?void 0:f,getPostOptions_deprecated:this.getCommentPostOptions_deprecated,renderLiePost_deprecated:this.props.componentTree.renderContextType===B.a.FullPane,localizationAPI:this.props.localizationAPI,postActionBarItems:this.postActionBarItems,focusState:m.M()&&(null===(i=u)||void 0===i?void 0:i.selectedCardId)!==h?void 0:u,isolationEdit:O,isAtMentionEnabled:!!d,isDraftThread:l,foldableLayoutState:this.props.foldableLayoutState,isCommentsContextReadOnly:this.props.readOnly,keyboardingOptions:this.getKeyboardingOptions(),personaIconPropertiesMap:this.props.personaIconPropertiesMap,draftState:this.props.draftState,cardRelativeDraftingState:Object(H.a)(a.commentId,this.props.componentTree.renderContextType,u,this.props.draftState),accessibilityPositionInSet:m.N()?t+1:n.accessibilityPositionInSet,accessibilitySetSize:m.N()?this.state.allRenderableItemThreads.length:n.accessibilitySetSize,maximumDimensions:void 0,menuItems:T,mentionEditorProps:d,availableScreenHeight:this.getAvailableScreenHeight(),extraPaddingLeft:this.getContentExtraPaddingLeft(),extraPaddingRight:this.getContentExtraPaddingRight(),preventDefaultKeyDownBehavior:this.getContentsPreventDefaultKeyDownBehavior(),isCardHighlighted:x===h,contentBackgroundColor:this.getContentBackgroundColor(e.length>1,O),maxDraftHeight:this.getMaxDraftHeight(),restrictActionControls:g,cardCollapsedState:this.props.componentTree.renderContextType===B.a.HalfPane?I.a.Expanded:K.a(h,u),taskState:C,cardStyle:this.getCommentCardStyle(),onCardLayout:this.onCardLayout,isCardTabbable:K.c(this.getKeyboardingOptions().cardTabbingMode,h,p,u),postStates:E})},e.prototype.onMentionCreated=function(t){F.u({failTag:r.h.reserveTag(593826271),successTag:r.h.reserveTag(593826272),person:t,dispatchProps:this.props,telemetryVisitor:this.props.telemetryVisitor,renderContextType:this.props.componentTree.renderContextType,trackback:r.h.reserveTag(593826273)})},e.prototype.onCurrentMentionsUpdated_deprecated=function(t){m.b()&&F.y(r.h.reserveTag(593826274),t,this.props.componentTree.renderContextType,this.props,this.props.telemetryVisitor)},e.prototype.onMentioneesStillInDraftUpdated=function(t){m.F()&&F.v({trackback:r.h.reserveTag(593826275),emailsStillInDraft:t,renderContextType:this.props.componentTree.renderContextType,dispatchProps:this.props,telemetryVisitor:this.props.telemetryVisitor})},e.prototype.onBackKeyPressed=function(){var t,e,n,o;if(this.props.focusedCommentInfo&&Object(w.h)(this.props.focusedCommentInfo.focusedComment)){var i=this.props.focusedCommentInfo.focusedComment,s=Object(U.a)(this.props.draftState,this.props.componentTree.renderContextType,null===(t=this.props.focusedCommentInfo)||void 0===t?void 0:t.focusedComment),a=Object(V.c)(!0,this.props.componentTree.renderContextType,null===(e=this.props.focusedCommentInfo)||void 0===e?void 0:e.focusedComment,this.props.createdCommentLie,this.props.focusedThreadIdBeforeCommentSession);if(Object(w.c)(i.focusDetails)){var c=(m.mb()?Object(x.a)(this.props.draftState,i):Object(x.b)(this.getComponentTree(),this.props.draftState,i,null===(n=this.props.createdCommentLie)||void 0===n?void 0:n.draftId,this.props.telemetryVisitor))!==D.a.CanAutoDiscard;F.d({trackback:r.h.reserveTag(592840781),focusedComment:this.tryGetFocusedComment(),showDiscardDialog:c,invokeModalDialog:this.invokeModalDialog,componentTree:this.getComponentTree(),dispatchProps:this.props,closeOnDiscard:a,draftId:i?this.props.draftState.cardIdToDraftIdMap[i.selectedCardId]:void 0,draftState:this.props.draftState,telemetryVisitor:this.props.telemetryVisitor,localizationAPI:this.props.localizationAPI,focusHandlerRegistry:this.props.focusManager,isNewCommentButtonFocusable:!this.isNewCommentButtonDisabled(),lieIndex:W.f(this.state.allRenderableItemThreads,i.selectedCardId),createdCommentLie:this.props.createdCommentLie})}else F.A({trackback:r.h.reserveTag(592487364),commentId:i.focusDetails.selectedPostId,setContents:void 0,data:this.props.dataItems,focusedComment:i,shouldClosePaneAfterDiscardDraft:a,onWillDiscardCallback:this.getOnWillDiscardCallback(i,s),renderContextType:this.props.componentTree.renderContextType,dispatchProps:this.props,telemetryVisitor:this.props.telemetryVisitor,localizationAPI:this.props.localizationAPI})}else this.props.componentTree.renderContextType===B.a.HalfPane&&(m.db()?this.closePane():F.p({ownProps:this.props,dispatchProps:this.props,componentTree:this.props.componentTree,draftState:this.props.draftState,focusedComment:null===(o=this.props.focusedCommentInfo)||void 0===o?void 0:o.focusedComment,createdCommentLie:this.props.createdCommentLie,invokeModalDialog:this.invokeModalDialog}))},e.prototype.sendReadyToRenderNotification=function(t){this.props.initializationStatus===_.a.Initialized&&(this.props.componentTree.renderContextType===t.componentTree.renderContextType&&this.props.initializationStatus===t.initializationStatus||this.props.readyToRender({renderContextType:this.props.componentTree.renderContextType,telemetryVisitor:this.props.telemetryVisitor,trackback:r.h.reserveTag(593826313)}))},e.prototype.deleteThreadConfirmCallback=function(){return this.props.focusedCommentInfo?(this.props.requestDeleteThread({renderContextType:this.props.componentTree.renderContextType,telemetryVisitor:this.props.telemetryVisitor,trackback:r.h.reserveTag(593826314)},this.props.focusedCommentInfo.focusedComment.selectedCardId),p.a.Handled):(Object(r.i)().assertConditionTag(!1,"Focused Comment should not be undefined for DeleteThread",593826315),p.a.Unhandled)},e.prototype.processAtMentionCapabilityState=function(){m.y()||this.props.refreshAtMentionAuthToken();var t=Object(P.e)(this.props.modelCapabilities,this.props.atMentionState);t!==a.b.Unknown&&this.initialAtMentionCapability.set(t),this.onAtMentionCapabilityStateChange()},e.prototype.getResolveSupported=function(){return m.E()?this.props.modelCapabilities.resolve:this.props.capabilities.resolve},e.prototype.getUpdatedItemThreads=function(t){var e=Object(z.b)(this.props.draftState,this.props.componentTree.renderContextType),n=Object(z.b)(t.draftState,t.componentTree.renderContextType);return this.props.dataItems!==t.dataItems||this.props.createdCommentLie!==t.createdCommentLie||this.props.cardViewStates!==t.cardViewStates||!m.M()&&this.props.postViewStates!==t.postViewStates||this.props.componentTree.renderContextType!==t.componentTree.renderContextType||this.props.personaIconPropertiesMap!==t.personaIconPropertiesMap||e!==n?W.b(t.dataItems,t.cardViewStates,m.M()?void 0:t.postViewStates,t.createdCommentLie,t.componentTree.renderContextType!==B.a.HalfPane,n):this.state.allRenderableItemThreads},e.prototype.getInitialState=function(t){return{allRenderableItemThreads:W.b(t.dataItems,t.cardViewStates,m.M()?void 0:t.postViewStates,t.createdCommentLie,t.componentTree.renderContextType!==B.a.HalfPane,Object(z.b)(t.draftState,t.componentTree.renderContextType)),atMentionState:void 0}},e.prototype.warnIfLowFidelity_deprecated=function(t,e){if(!this.props.focusedCommentInfo)return!1;var n=!t.parentId,o=t.commentFlags&c.a.LowFidelity||n&&e===w.a.LowFidelityWarningOnDelete&&this.props.dataItems.some((function(e){return Object(Q.a)(e)&&e.commentModel.parentId===t.commentId&&!!(e.commentModel.commentFlags&c.a.LowFidelity)})),i=Object(w.c)(this.props.focusedCommentInfo.focusedComment.focusDetails)?this.props.focusedCommentInfo.focusedComment.selectedCardId:this.props.focusedCommentInfo.focusedComment.focusDetails.selectedPostId;return!(!o||i===t.commentId&&this.props.focusedCommentInfo.focusedComment.focusDetails.editingSession===e)&&(this.props.showLowFidelityWarning({renderContextType:this.props.componentTree.renderContextType,telemetryVisitor:this.props.telemetryVisitor,trackback:r.h.reserveTag(593826317)},t.commentId,e),!0)},e.prototype.closePaneNoDialog=function(){var t=Object(r.i)().createActivityObject("ClosePane",this.props.telemetryVisitor,r.a.None);t.addDataField(f.a.PaneCloseResult,j.a.NoDialog,r.c.SystemMetadata),t.successTag(593826318),this.props.requestClosePane({renderContextType:this.props.componentTree.renderContextType,telemetryVisitor:this.props.telemetryVisitor,trackback:r.h.reserveTag(593826319)})},e.prototype.onRequestLoadThreads=function(t){Object(P.D)(this.props.modelCapabilities,this.props.virtualized)?this.props.queueLoadThreads({renderContextType:this.props.componentTree.renderContextType,telemetryVisitor:this.props.telemetryVisitor,trackback:r.h.reserveTag(593826320)},t):Object(r.i)().assertConditionTag(!1,"onRequestLoadThreads called for non-virtualized store",593826321)},e.prototype.shouldShowGhostComment=function(){return this.props.componentTree.renderContextType===B.a.FullPane&&this.props.nextPopulatedContextDetails!==u.a.Unknown&&this.props.nextPopulatedContextDetails!==u.a.NoComments&&this.props.nextPopulatedContextDetails!==u.a.OnlyCommentsInCurrent},e.prototype.onGhostCommentClicked=function(){var t=this;if(m.hb()){var e=m.r()||Object(q.a)()!==M.a.Web;this.props.discardDraftIfEmpty({renderContextType:this.props.componentTree.renderContextType,telemetryVisitor:this.props.telemetryVisitor,trackback:r.h.reserveTag(590955266)},O.a.SharedComments,e?k.a.GhostCard:void 0).then((function(n){e&&n.draftDiscardBehavior!==D.a.NoDraft&&n.draftDiscardResult!==p.a.Handled||t.props.selectionManager.selectAcrossContexts(i.d.Next,t.props.componentTree.renderContextType)})).catch((function(t){Object(y.a)(t,r.h.reserveTag(590955267))}))}else this.props.selectionManager.selectAcrossContexts(i.d.Next,this.props.componentTree.renderContextType)},e.prototype.tryGetFocusedComment=function(){if(this.props.focusedCommentInfo)return this.props.focusedCommentInfo.focusedComment},e.prototype.getPostRestrictActionControls_deprecated=function(t,e){var n=void 0!==this.props.focusedCommentInfo?this.props.focusedCommentInfo.focusedComment:void 0,o=e||t;if(this.props.componentTree.renderContextType===B.a.FullPane&&I.a.Collapsed===K.a(o,n))return!0;var r=Object(H.a)(e,this.props.componentTree.renderContextType,n,this.props.draftState);return void 0!==n&&void 0!==r&&(r!==R.a.InChildPost||!Object(w.g)(n.focusDetails)||n.focusDetails.selectedPostId!==t)},e.prototype.getCommentCardTaskHeaderProps_deprecated=function(t,e,n,o,r,i){return K.d(t,e,n,o,r,i,this.onCardHeaderButtonPressed,void 0,void 0)},e.prototype.isReadyToRender=function(){var t=Object(P.D)(this.props.modelCapabilities,this.props.virtualized);return Object(S.a)({commentData:W.c(this.props.dataItems),pendingCommentLoad:this.props.pendingCommentLoad,virtualized:t})},e.prototype.canCardDelete=function(t){return!0},e.prototype.shouldCheckForLowFidelityOnCardDelete=function(){return!1},e}(s.Component);e.a=$},1576:function(t,e,n){"use strict";var o=n(121),r=n(9),i=n(10),s=n(1573),a=n(0),c=n(1),l=n(3),p=n(89),u=n(186),d=n(640),f=n(21),h=n(380),y=n(650),m=n(30),b=n(19),g=n(12),v=n(1496),C=n(147),T=n(124),O=n(18),x=n(1507),S=n(1508),P=n(1565),E=n(157),k=n(442),w=n(1509);var A=n(133),I=n(72),R=n(1525),j=n(671),_=n(148),D=function(t){function e(e){var n=t.call(this,e)||this;n.getMentionableCommentEditorProps=Object(h.a)((function(t,e,o){if(Object(P.a)(t,e))return{onMentionCreated:n.onMentionCreated,onMentioneesStillInDraftUpdated:n.onMentioneesStillInDraftUpdated,onCurrentMentionsUpdated_deprecated:n.onCurrentMentionsUpdated_deprecated,getAuthToken:n.getAuthToken,peoplePickerProps:{onGetUserContacts:n.onGetUserContacts,pickerLocalizationDetails:r.y()?void 0:k.i(n.props.localizationAPI),preventDismissOnScroll:r.b()},suggestionsDetails:o}})),n.getCommentCardTaskHeaderProps_deprecated=Object(h.a)((function(t,e,o,r,i,s){return w.d(t,e,o,r,i,s,n.cardOnHeaderButtonPressed,void 0,void 0)})),n.onPostDelete=function(t){var e="string"==typeof t?t:Object(j.a)(t)?t.getId():"";E.D({trackback:l.h.reserveTag(593826139),id:e,data:n.props.dataItems,focusedComment:n.props.focusState,renderContextType:n.props.componentTree.renderContextType,actionDispatchers:n.props,telemetryVisitor:n.props.telemetryVisitor,localizationAPI:n.props.localizationAPI})},n.onPostEdit=function(t){var e="string"==typeof t?t:Object(j.a)(t)?t.getId():"";E.E({trackback:l.h.reserveTag(593801875),id:e,data:n.props.dataItems,focusedComment:n.props.focusState,renderContextType:n.props.componentTree.renderContextType,actionDispatchers:n.props,telemetryVisitor:n.props.telemetryVisitor,componentTree_deprecated:r.mb()?void 0:n.props.componentTree})},n.onPostCommit=function(t){E.C({trackback:l.h.reserveTag(593826141),id:t.getId(),data:n.props.dataItems,focusedComment:n.props.focusState,contentPromise:t.getContentsAsync(),atMentionsEnabled:Object(b.e)(n.props.modelCapabilities,n.props.atMentionState)===p.b.Enabled,componentTree:n.props.componentTree,actionDispatchers:n.props,telemetryVisitor:n.props.telemetryVisitor,localizationAPI:n.props.localizationAPI}).catch((function(t){Object(f.b)(t)?Object(l.i)().assertConditionTag(!1,t.message,593826142):Object(l.i)().assertConditionTag(!1,"Unknown error thrown from postOnCommit: "+t,593826143)}))},n.onPostDraftEmptinessChanged=function(t,e){E.q({trackback:l.h.reserveTag(592041679),contentId:t.getId(),isEmpty:e,renderContextType:n.props.componentTree.renderContextType,draftIdMap:n.props.draftState.postIdToDraftIdMap,actionDispatchers:n.props,telemetryVisitor:n.props.telemetryVisitor})},n.onPostSaveDraft=function(t,e){E.w({trackback:l.h.reserveTag(592720402),id:t,editor:e,renderContextType:n.props.componentTree.renderContextType,draftIdMap:n.props.draftState.postIdToDraftIdMap,actionDispatchers:n.props,telemetryVisitor:n.props.telemetryVisitor})},n.onPostSaveDraft_deprecated=function(t){E.x(l.h.reserveTag(593826144),t,void 0,n.props.componentTree.renderContextType,n.props.draftState.postIdToDraftIdMap,n.props,n.props.telemetryVisitor)},n.onPostCancel=function(t){E.A({trackback:l.h.reserveTag(593826145),commentId:t.getId(),setContents:t.setContents.bind(t),data:n.props.dataItems,focusedComment:n.props.focusState,shouldClosePaneAfterDiscardDraft:!1,onWillDiscardCallback:void 0,renderContextType:n.props.componentTree.renderContextType,dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor,localizationAPI:n.props.localizationAPI})},n.onLowFidelityWarningCancel=function(){E.s({focusState:n.props.focusState,renderContextType:n.props.componentTree.renderContextType,dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor})},n.onLowFidelityWarningConfirm=function(){E.t({focusState:n.props.focusState,onCardDelete:n.cardOnDelete,onPostDelete:n.onPostDelete,onPostEdit:n.onPostEdit})},n.onRenderableItemSelect=function(t){var e=t.getId(),o=n.props.dataItems.find((function(t){return I.e(t)===e}));o?E.H({trackback:l.h.reserveTag(593826147),renderableItem:o,focusedComment:n.props.focusState,renderContextType:n.props.componentTree.renderContextType,dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor,componentTree_deprecated:r.mb()?void 0:n.props.componentTree}):Object(l.i)().assertConditionTag(!1,"Comment not rendered within Card. Is something incorrect in the tree?",593826146)},n.cardOnResolveThread=function(t,e){E.l({trackback:l.h.reserveTag(593826176),id:t,renderContextType:n.props.componentTree.renderContextType,dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor,localizationAPI:n.props.localizationAPI,isTask:e})},n.cardOnReopenThread=function(t,e){E.k({trackback:l.h.reserveTag(593826177),id:t,renderContextType:n.props.componentTree.renderContextType,dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor,localizationAPI:n.props.localizationAPI,isTask:e})},n.cardOnDelete=function(t){Object(l.i)().assertConditionTag(n.props.componentTree.renderContextType!==O.a.HalfPane,"Discard not yet fully supported for HalfPane in DHC",593826178),E.c({trackback:l.h.reserveTag(592840777),id:t,data:n.props.dataItems,focusedComment:n.props.focusState,componentTree:n.props.componentTree,invokeModalDialog:void 0,dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor,localizationAPI:n.props.localizationAPI,focusHandlerRegistry:n.props.focusManager,isTask:!!n.props.threadTaskState,isNewCommentButtonFocusable:!1,threadIndex:0,shouldCheckForLowFidelity:n.shouldCheckForLowFidelityOnCardDelete()})},n.cardOnPost=function(t){var e=n.props.isDraftThread?{type:"CREATE"}:{type:"REPLY",parentId:t.getId()},o=n.props.draftState.drafts[n.props.draftState.cardIdToDraftIdMap[n.props.threadId]];E.b({trackback:l.h.reserveTag(593622431),commentCardRef:t,focusedComment:n.props.focusState,areMentionsEnabled:Object(b.e)(n.props.modelCapabilities,n.props.atMentionState)===p.b.Enabled,session:e,componentTree:n.props.componentTree,dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor,localizationAPI:n.props.localizationAPI,selectedTaskAssignee:o&&o.selectedTaskAssignee}).catch((function(t){Object(f.b)(t)?Object(l.i)().assertConditionTag(!1,t.message,593622432):Object(l.i)().assertConditionTag(!1,"Unknown error thrown from cardOnCommit: "+t,593622433)}))},n.cardOnSelectExpandCallback=function(t,e){E.n({trackback:l.h.reserveTag(593826186),commentCardRef:t,renderContextType:n.props.componentTree.renderContextType,dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor,selectRootPost:e,relativeDraftingState:n.props.cardRelativeDraftingState,componentTree_deprecated:r.mb()?void 0:n.props.componentTree})},n.cardOnSelectCollapseCallback=function(t){E.m({trackback:l.h.reserveTag(593826188),commentCardRef:t,renderContextType:n.props.componentTree.renderContextType,dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor})},n.cardOnBeginReplyCallback=function(t){E.a({trackback:l.h.reserveTag(593826189),threadId:t.getId(),renderContextType:n.props.componentTree.renderContextType,dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor,componentTree_deprecated:r.mb()?void 0:n.props.componentTree})},n.cardOnHighlight=function(t){E.i({trackback:l.h.reserveTag(593826190),commentCardRef:t,renderContextType:n.props.componentTree.renderContextType,dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor})},n.cardOnDraftingInputSizeChange=function(t,e){E.e({trackback:l.h.reserveTag(593826191),cardId:t.getId(),isCardLie:n.props.isDraftThread,newHeight:e,renderContextType:n.props.componentTree.renderContextType,focusedComment:n.props.focusState,dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor})},n.cardOnDraftEmptinessChanged=function(t,e){E.q({trackback:l.h.reserveTag(592213847),contentId:t.getId(),isEmpty:e,renderContextType:n.props.componentTree.renderContextType,draftIdMap:n.props.draftState.cardIdToDraftIdMap,actionDispatchers:n.props,telemetryVisitor:n.props.telemetryVisitor})},n.cardOnEditorFocusLost_deprecated=function(t){E.g({trackback:l.h.reserveTag(593826192),commentCardRef:t,isCardLie:n.props.isDraftThread,renderContextType:n.props.componentTree.renderContextType,dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor})},n.cardOnEditorFocusLost=function(t){E.f({trackback:l.h.reserveTag(592065734),id:t.getId(),draftState:n.props.draftState,renderContextType:n.props.componentTree.renderContextType,dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor})},n.cardOnHeaderButtonPressed=function(){r.b()&&(n.props.threadTaskState?E.o({trackback:l.h.reserveTag(593826194),id:n.props.threadId,taskState:n.props.threadTaskState,renderContextType:n.props.componentTree.renderContextType,dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor,localizationAPI:n.props.localizationAPI}):Object(l.i)().assertConditionTag(!1,"props.threadTaskState is undefined",593826193))},n.cardOnSaveDraft=function(t,e){E.w({trackback:l.h.reserveTag(592720403),id:t,editor:e,renderContextType:n.props.componentTree.renderContextType,draftIdMap:n.props.draftState.cardIdToDraftIdMap,actionDispatchers:n.props,telemetryVisitor:n.props.telemetryVisitor})},n.cardOnSaveDraft_deprecated=function(t,e){E.x(l.h.reserveTag(593826195),t,e,n.props.componentTree.renderContextType,n.props.draftState.cardIdToDraftIdMap,n.props,n.props.telemetryVisitor)},n.cardOnCancel=function(t){Object(l.i)().assertConditionTag(n.props.isDraftThread||n.props.cardRelativeDraftingState===C.a.InCard,"Mismatch between focusedComment state and cancel reply callback.",593826196),E.d({trackback:l.h.reserveTag(592840778),focusedComment:n.props.focusState,showDiscardDialog:!1,invokeModalDialog:void 0,componentTree:n.props.componentTree,dispatchProps:n.props,closeOnDiscard:!1,draftId:n.props.draftState.cardIdToDraftIdMap[n.props.threadId],draftState:n.props.draftState,telemetryVisitor:n.props.telemetryVisitor,localizationAPI:n.props.localizationAPI,focusHandlerRegistry:n.props.focusManager,isNewCommentButtonFocusable:!1,lieIndex:0,createdCommentLie:void 0})},n.commentEditorOnKeyDown=function(t){n.commentEditorKeyDownHandler.onKeyDown(t)},n.onPostError=function(t){E.G({trackback:l.h.reserveTag(593764370),id:t.getId(),data:n.props.dataItems,renderContextType:n.props.componentTree.renderContextType,actionDispatchers:n.props,telemetryVisitor:n.props.telemetryVisitor})},n.onClearPostError=function(t){E.B({trackback:l.h.reserveTag(593764371),id:t.getId(),data:n.props.dataItems,renderContextType:n.props.componentTree.renderContextType,actionDispatchers:n.props,telemetryVisitor:n.props.telemetryVisitor})},n.onCardMounted=function(t){E.j({cardProps:t,componentTree:n.props.componentTree,focusManager:n.props.focusManager})},n.onCardEditorMounted=function(t){E.h({cardId:t,componentTree:n.props.componentTree,focusManager:n.props.focusManager})},n.onPostEditorMounted=function(t){E.F({postId:t,componentTree:n.props.componentTree,focusManager:n.props.focusManager})},n.onCardRendered=Object(y.a)((function(t){n.props.onInitialRender({commentId:t.id,renderContextType:n.props.componentTree.renderContextType})})),n.onSelectedTaskAssigneeUpdated=function(t){r.b()?E.z({trackback:l.h.reserveTag(593826204),renderContextType:n.props.componentTree.renderContextType,dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor,selectedAssignee:t}):Object(l.i)().assertConditionTag(!1,"Selected Task Assignee Updated action type is not supported",593826205)},n.getPostStates=Object(h.b)(w.e,(function(){return[n.props.dataItems,n.props.threadPostStates]})),n.onGetUserContacts=n.onGetUserContacts.bind(n),n.onMentionCreated=n.onMentionCreated.bind(n),n.onCurrentMentionsUpdated_deprecated=n.onCurrentMentionsUpdated_deprecated.bind(n),n.onMentioneesStillInDraftUpdated=n.onMentioneesStillInDraftUpdated.bind(n),n.getAuthToken=n.getAuthToken.bind(n),n.getCommentPostOptions=n.getCommentPostOptions.bind(n),n.commentPostCallbackProps={onDelete:n.onPostDelete,onEdit:n.onPostEdit,onCommit:n.onPostCommit,onCancel:n.onPostCancel,onSelect:n.onRenderableItemSelect,onDraftEmptinessChanged:n.onPostDraftEmptinessChanged,onSaveDraft:n.onPostSaveDraft,onSaveDraft_deprecated:n.onPostSaveDraft_deprecated,onLowFidelityWarningConfirm:n.onLowFidelityWarningConfirm,onLowFidelityWarningCancel:n.onLowFidelityWarningCancel,onPostEditorMounted:n.onPostEditorMounted,onError:n.onPostError,onClearError:n.onClearPostError,commentEditorAdditionalKeyDownHandler:n.commentEditorOnKeyDown},n.commentCardCallbackProps={onEditorFocus:n.cardOnBeginReplyCallback,onCardSelectExpand:n.cardOnSelectExpandCallback,onCardSelectCollapse:n.cardOnSelectCollapseCallback,onCardHighlight:n.cardOnHighlight,onDraftingInputSizeChange:n.cardOnDraftingInputSizeChange,onDraftEmptinessChanged:n.cardOnDraftEmptinessChanged,onEditorBlur:r.mb()?n.cardOnEditorFocusLost:n.cardOnEditorFocusLost_deprecated,onCancel:n.cardOnCancel,onPost:n.cardOnPost,onSaveDraft:n.cardOnSaveDraft,onSaveDraft_deprecated:n.cardOnSaveDraft_deprecated,onSelectedTaskAssigneeUpdated:n.onSelectedTaskAssigneeUpdated,onCardMounted:n.onCardMounted,onCardEditorMounted:n.onCardEditorMounted,onCardRendered:n.onCardRendered,onLowFidelityWarningConfirm:n.onLowFidelityWarningConfirm,onLowFidelityWarningCancel:n.onLowFidelityWarningCancel,onCardHeaderButtonPressed:n.cardOnHeaderButtonPressed,commentEditorAdditionalKeyDownHandler:n.commentEditorOnKeyDown},n.contextualMenuCallbackProps={onReopenThread:n.cardOnReopenThread,onResolveThread:n.cardOnResolveThread,onDeleteThread:n.cardOnDelete,onEditRootPost:n.onPostEdit};var o=Object(A.a)();return n.postActionBarItems=R.d(n.props.localizationAPI,n.commentPostCallbackProps,o),n.cardContextMenuItems=R.b(n.props.localizationAPI,n.contextualMenuCallbackProps,o),n.commentContentsKeyDownHandler=n.props.focusManager.commentContentsKeyDown((function(){return n.props.componentTree}),r.b()?function(){return n.props.dataItems}:void 0),n.commentEditorKeyDownHandler=n.props.focusManager.commentEditorKeyDown((function(){return n.props.componentTree})),n}return Object(a.__extends)(e,t),e.prototype.focus=function(){var t=this;setTimeout((function(){return t.props.focusManager.focusCommentCardCommand(t.props.componentTree,t.props.threadId)}),0),this.props.selectCommentCardExpand({renderContextType:this.props.componentTree.renderContextType,trackback:l.h.reserveTag(593826136),telemetryVisitor:this.props.telemetryVisitor},this.props.threadId,m.a.Canvas)},e.prototype.shouldComponentUpdate=function(t,n){return e.havePropsMeaningfullyChanged(t,this.props)},e.prototype.updateDraftRenderLockIfApplicable=function(t){if(this.props.focusState&&Object(g.h)(this.props.focusState)){var e=Object(b.B)(this.props.draftState);e&&this.props.updateRenderLockForDraft({renderContextType:this.props.componentTree.renderContextType,trackback:l.h.reserveTag(593826137),telemetryVisitor:this.props.telemetryVisitor},t,e.commentDraft.sessionConfiguration.draftId)}},e.prototype.componentDidMount=function(){var t,e;this.props.componentRef&&this.props.componentRef(this),null===(e=(t=this.props).setComponentRef)||void 0===e||e.call(t,this.props.resource.id,this),this.updateDraftRenderLockIfApplicable(!0)},e.prototype.componentWillUnmount=function(){this.props.setComponentRef&&this.props.setComponentRef(this.props.resource.id,null)},e.prototype.componentDidUpdate=function(t,e){var n=this;if(this.props.draftState!==t.draftState){var o=Object(b.B)(t.draftState),r=Object(b.B)(this.props.draftState);!r||void 0!==o&&o.renderContextType===r.renderContextType||this.updateDraftRenderLockIfApplicable(!0)}var i=this.props;setTimeout((function(){return n.props.focusManager.discreteCommentCardPropsUpdated(n.props.componentTree,t,i)}))},e.havePropsMeaningfullyChanged=function(t,e){var n=Object.keys(t),o=Object.keys(e);return n.length!==o.length||n.some((function(n){if(e[n]===t[n])return!1;if("dataItems"===n){if(e.dataItems.length!==t.dataItems.length)return!0;for(var o=0;o<e.dataItems.length;o++){var r=e.dataItems[o],i=t.dataItems[o];if(Object(_.a)(r)&&Object(_.a)(i)&&r.commentModel!==i.commentModel||!!r.historyItem!=!!i.historyItem)return!0}return!1}return"object"!=typeof e[n]||!function(t,e){if(!t&&e||t&&!e)return!1;if(!t&&!e)return!0;var n=Object.keys(t),o=Object.keys(e);return n.length===o.length&&n.every((function(n){return t[n]===e[n]}))}(e[n],t[n])}))},e.prototype.getAuthToken=function(){return this.props.peopleAPI.getAuthToken(d.a.Loki)},e.prototype.shouldCheckForLowFidelityOnCardDelete=function(){return!1},e.prototype.getResolveSupported=function(){return r.E()?this.props.modelCapabilities.resolve:this.props.capabilities.resolve},e.prototype.getCommentCardOptions_deprecated=function(){var t=this.props.dataItems.length>1;return{highlightCard:this.props.isHighlighted,restrictActionControls:void 0!==this.props.cardRelativeDraftingState,contentBackgroundColor:t&&Object(A.a)()!==T.a.iOS?"CardReplyBackground":"CardBackground",preventDefaultKeyDownBehavior:void 0}},e.prototype.getCommentPostOptions=function(t,e){var n=this.getRestrictActionControls(t,e),o=this.props.focusState,r=e||t,i=w.a(r,o);return{restrictActionControls:n,showFullComment:i===v.a.Expanded,collapsed:i===v.a.Collapsed,preventDefaultKeyDownBehavior:void 0}},e.prototype.getKeyboardingOptions=function(){return{cardTabbingMode:S.a.ExpandedCardOrFirstCardTabbable,postTabbingMode:S.b.ExpandedCardRootPostTabbable}},e.prototype.getRestrictActionControls=function(t,e){var n=e||t;return v.a.Collapsed===w.a(n,this.props.focusState)||void 0!==this.props.focusState&&void 0!==this.props.cardRelativeDraftingState&&!(this.props.cardRelativeDraftingState===C.a.InChildPost&&!Object(g.c)(this.props.focusState.focusDetails)&&this.props.focusState.focusDetails.selectedPostId===t)},e.prototype.onMentionCreated=function(t){E.u({failTag:l.h.reserveTag(593826199),successTag:l.h.reserveTag(593826200),person:t,dispatchProps:this.props,telemetryVisitor:this.props.telemetryVisitor,renderContextType:this.props.componentTree.renderContextType,trackback:l.h.reserveTag(593826201)})},e.prototype.onCurrentMentionsUpdated_deprecated=function(t){r.b()&&E.y(l.h.reserveTag(593826202),t,this.props.componentTree.renderContextType,this.props,this.props.telemetryVisitor)},e.prototype.onMentioneesStillInDraftUpdated=function(t){r.F()&&E.v({trackback:l.h.reserveTag(593826203),emailsStillInDraft:t,renderContextType:this.props.componentTree.renderContextType,dispatchProps:this.props,telemetryVisitor:this.props.telemetryVisitor})},e.prototype.onGetUserContacts=function(t,e,n){return E.r({filter:t,limit:e,searchGraph:n,dispatchProps:this.props})},e.prototype.renderThread=function(t){return t},e.prototype.render=function(){var t=this.getMentionableCommentEditorProps(Object(b.e)(this.props.modelCapabilities,this.props.atMentionState),r.E()?this.props.authToken:this.props.atMentionState.authToken,this.props.suggestionsDetails),e=this.getCommentCardOptions_deprecated(),n=!!(I.h(this.props.dataItems).commentFlags&u.a.Resolved),o=x.a.Default,i=void 0!==this.props.cardRelativeDraftingState;(r.N()?i:e.restrictActionControls)&&(o=x.a.Disabled),this.props.readOnly&&(o=x.a.ReadOnly);var s=!r.N()&&this.props.threadTaskState?this.getCommentCardTaskHeaderProps_deprecated(this.props.threadId,this.props.threadTaskState,this.props.localizationAPI,this.props.componentTree.renderContextType,n,o):void 0,a=I.h(this.props.dataItems),c=R.c(this.cardContextMenuItems,a,this.getResolveSupported(),Object(g.f)(a,this.props.focusState),r.N()?!!this.props.threadTaskState:!!s),l=this.props.dataItems.length>1,d=w.g({thread:this.props.dataItems,renderContextType:this.props.componentTree.renderContextType,taskHeaderProps_deprecated:s,cardState:this.props.cardState,postViewState_deprecated:r.M()?void 0:this.props.threadPostStates,postCallbacks:this.commentPostCallbackProps,mentionableEditorProps:t,cardCallbacks:this.commentCardCallbackProps,cardOptions_deprecated:e,getPostOptions_deprecated:this.getCommentPostOptions,renderLiePost_deprecated:this.props.componentTree.renderContextType!==O.a.HalfPane,localizationAPI:this.props.localizationAPI,postActionBarItems:this.postActionBarItems,focusState:this.props.focusState,isolationEdit:this.props.componentTree.renderContextType===O.a.HalfPane,isAtMentionEnabled:Object(b.e)(this.props.modelCapabilities,this.props.atMentionState)===p.b.Enabled,isDraftThread:this.props.isDraftThread,isCommentsContextReadOnly:this.props.readOnly,keyboardingOptions:this.getKeyboardingOptions(),personaIconPropertiesMap:this.props.personaIconPropertiesMap,draftState:this.props.draftState,cardRelativeDraftingState:this.props.cardRelativeDraftingState,accessibilitySetSize:this.props.accessibilitySetSize,accessibilityPositionInSet:this.props.accessibilityPositionInSet,maximumDimensions:this.props.maximumDimensions,menuItems:c,mentionEditorProps:t,restrictActionControls:i,availableScreenHeight:void 0,contentBackgroundColor:l&&Object(A.a)()!==T.a.iOS?"CardReplyBackground":"CardBackground",extraPaddingLeft:void 0,extraPaddingRight:void 0,preventDefaultKeyDownBehavior:r.J()?this.getContentsPreventDefaultKeyDownBehavior():void 0,isCardHighlighted:this.props.isHighlighted,maxDraftHeight:void 0,cardCollapsedState:this.props.componentTree.renderContextType===O.a.HalfPane?v.a.Expanded:w.a(this.props.threadId,this.props.focusState),taskState:this.props.threadTaskState,cardStyle:void 0,onCardLayout:void 0,isCardTabbable:w.c(this.getKeyboardingOptions().cardTabbingMode,this.props.threadId,this.props.firstCardInCurrentContext,this.props.focusState),postStates:this.getPostStates()});return this.renderThread(d)},e}(c.Component),N=n(31),M=n(11),B=Object(M.c)((function(t,e){return{cardContainer:Object(N.b)({position:"relative",zIndex:Object(w.f)(t,e)||Object(w.b)(t,e)?1:0})}})),L=n(1488),H=function(t){function e(e){var n=t.call(this,e)||this;return n.componentTree=n.props.componentTree,n}return Object(a.__extends)(e,t),e.prototype.getChildContext=function(){return{getComponent:this.componentTree.getComponent,getComponentById:this.componentTree.getComponentById,isEventTarget:this.componentTree.isEventTarget,isFocusWithin:this.componentTree.isFocusWithin,isFocusWithinAny:this.componentTree.isFocusWithinAny,isFocusWithinPane:this.componentTree.isFocusWithinPane,isFocusOn:this.componentTree.isFocusOn,getCurrentlyFocused:this.componentTree.getCurrentlyFocused,renderContextType:this.componentTree.renderContextType,contextIdentifier:this.componentTree.contextIdentifier}},e.prototype.getContentsPreventDefaultKeyDownBehavior=function(){},e.prototype.renderThread=function(t){var e=B(t.props.id,this.props.focusState).cardContainer;return c.createElement("div",{className:e,onKeyDown:this.commentContentsKeyDownHandler.onKeyDown},t)},e.childContextTypes=Object(a.__assign)({},L.a),e}(D),F=n(413);n.d(e,"a",(function(){return U}));var U=Object(o.connect)((function(){var t,e=s.e(),n=s.c(),o=s.m(i.h,e,n),a=s.h(o),c=s.l(o),l=s.f(),p=s.i(),u=s.b(),d=s.a(),f=s.k(),h=s.j(o,f);return function(e,n){if(r.fb()&&n.isVirtualized&&t)return t;var s=o(e,n),y=r.b()?f(e,n):void 0;return t={threadId:s.thread[0].commentId,dataItems:h(e,n),threadTaskState:y&&y.currentState,threadPostStates:c(e,n),focusState:l(e,n),readOnly:i.m(e),cardState:u(e,n),isHighlighted:p(e,n),personaIconPropertiesMap:i.p(e),isDraftThread:s.isDraftThread,atMentionState:i.a(e),draftState:i.i(e),firstCardInCurrentContext:a(e,n),cardRelativeDraftingState:d(e,n),capabilities:i.c(e),authToken:i.b(e),modelCapabilities:i.n(e),suggestionsDetails:i.s(e)}}}),F.a)(H)},1610:function(t,e,n){"use strict";e.a=function(){return!1}},1611:function(t,e,n){"use strict";(function(t){var o=n(1563),r="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=r&&"object"==typeof t&&t&&!t.nodeType&&t,s=i&&i.exports===r&&o.a.process,a=function(){try{var t=i&&i.require&&i.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(t){}}();e.a=a}).call(this,n(875)(t))},1612:function(t,e,n){window,t.exports=function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=51)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),r=n(10),i=n(11),s=n(28),a=n(29),c=n(30),l=n(31),p=n(32),u=n(7),d=n(14),f=n(15),h=n(13),y=n(3),m={Scope:y.Scope,create:y.create,find:y.find,query:y.query,register:y.register,Container:o.default,Format:r.default,Leaf:i.default,Embed:l.default,Scroll:s.default,Block:c.default,Inline:a.default,Text:p.default,Attributor:{Attribute:u.default,Class:d.default,Style:f.default,Store:h.default}};e.default=m},function(t,e,n){function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=n(34),i=n(5),s=n(2),a=n(6),c=String.fromCharCode(0),l=function(t){Array.isArray(t)?this.ops=t:null!=t&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]};l.prototype.insert=function(t,e){var n={};return 0===t.length?this:(n.insert=t,null!=e&&"object"===o(e)&&Object.keys(e).length>0&&(n.attributes=e),this.push(n))},l.prototype.delete=function(t){return t<=0?this:this.push({delete:t})},l.prototype.retain=function(t,e){if(t<=0)return this;var n={retain:t};return null!=e&&"object"===o(e)&&Object.keys(e).length>0&&(n.attributes=e),this.push(n)},l.prototype.push=function(t){var e=this.ops.length,n=this.ops[e-1];if(t=s(!0,{},t),"object"===o(n)){if("number"==typeof t.delete&&"number"==typeof n.delete)return this.ops[e-1]={delete:n.delete+t.delete},this;if("number"==typeof n.delete&&null!=t.insert&&(e-=1,"object"!==o(n=this.ops[e-1])))return this.ops.unshift(t),this;if(i(t.attributes,n.attributes)){if("string"==typeof t.insert&&"string"==typeof n.insert)return this.ops[e-1]={insert:n.insert+t.insert},"object"===o(t.attributes)&&(this.ops[e-1].attributes=t.attributes),this;if("number"==typeof t.retain&&"number"==typeof n.retain)return this.ops[e-1]={retain:n.retain+t.retain},"object"===o(t.attributes)&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this},l.prototype.chop=function(){var t=this.ops[this.ops.length-1];return t&&t.retain&&!t.attributes&&this.ops.pop(),this},l.prototype.filter=function(t){return this.ops.filter(t)},l.prototype.forEach=function(t){this.ops.forEach(t)},l.prototype.map=function(t){return this.ops.map(t)},l.prototype.partition=function(t){var e=[],n=[];return this.forEach((function(o){(t(o)?e:n).push(o)})),[e,n]},l.prototype.reduce=function(t,e){return this.ops.reduce(t,e)},l.prototype.changeLength=function(){return this.reduce((function(t,e){return e.insert?t+a.length(e):e.delete?t-e.delete:t}),0)},l.prototype.length=function(){return this.reduce((function(t,e){return t+a.length(e)}),0)},l.prototype.slice=function(t,e){t=t||0,"number"!=typeof e&&(e=1/0);for(var n=[],o=a.iterator(this.ops),r=0;r<e&&o.hasNext();){var i;r<t?i=o.next(t-r):(i=o.next(e-r),n.push(i)),r+=a.length(i)}return new l(n)},l.prototype.compose=function(t){var e=a.iterator(this.ops),n=a.iterator(t.ops),o=[],r=n.peek();if(null!=r&&"number"==typeof r.retain&&null==r.attributes){for(var s=r.retain;"insert"===e.peekType()&&e.peekLength()<=s;)s-=e.peekLength(),o.push(e.next());r.retain-s>0&&n.next(r.retain-s)}for(var c=new l(o);e.hasNext()||n.hasNext();)if("insert"===n.peekType())c.push(n.next());else if("delete"===e.peekType())c.push(e.next());else{var p=Math.min(e.peekLength(),n.peekLength()),u=e.next(p),d=n.next(p);if("number"==typeof d.retain){var f={};"number"==typeof u.retain?f.retain=p:f.insert=u.insert;var h=a.attributes.compose(u.attributes,d.attributes,"number"==typeof u.retain);if(h&&(f.attributes=h),c.push(f),!n.hasNext()&&i(c.ops[c.ops.length-1],f)){var y=new l(e.rest());return c.concat(y).chop()}}else"number"==typeof d.delete&&"number"==typeof u.retain&&c.push(d)}return c.chop()},l.prototype.concat=function(t){var e=new l(this.ops.slice());return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e},l.prototype.diff=function(t,e){if(this.ops===t.ops)return new l;var n=[this,t].map((function(e){return e.map((function(n){if(null!=n.insert)return"string"==typeof n.insert?n.insert:c;throw new Error("diff() called "+(e===t?"on":"with")+" non-document")})).join("")})),o=new l,s=r(n[0],n[1],e),p=a.iterator(this.ops),u=a.iterator(t.ops);return s.forEach((function(t){for(var e=t[1].length;e>0;){var n=0;switch(t[0]){case r.INSERT:n=Math.min(u.peekLength(),e),o.push(u.next(n));break;case r.DELETE:n=Math.min(e,p.peekLength()),p.next(n),o.delete(n);break;case r.EQUAL:n=Math.min(p.peekLength(),u.peekLength(),e);var s=p.next(n),c=u.next(n);i(s.insert,c.insert)?o.retain(n,a.attributes.diff(s.attributes,c.attributes)):o.push(c).delete(n)}e-=n}})),o.chop()},l.prototype.eachLine=function(t,e){e=e||"\n";for(var n=a.iterator(this.ops),o=new l,r=0;n.hasNext();){if("insert"!==n.peekType())return;var i=n.peek(),s=a.length(i)-n.peekLength(),c="string"==typeof i.insert?i.insert.indexOf(e,s)-s:-1;if(c<0)o.push(n.next());else if(c>0)o.push(n.next(c));else{if(!1===t(o,n.next(1).attributes||{},r))return;r+=1,o=new l}}o.length()>0&&t(o,{},r)},l.prototype.transform=function(t,e){if(e=!!e,"number"==typeof t)return this.transformPosition(t,e);for(var n=a.iterator(this.ops),o=a.iterator(t.ops),r=new l;n.hasNext()||o.hasNext();)if("insert"!==n.peekType()||!e&&"insert"===o.peekType())if("insert"===o.peekType())r.push(o.next());else{var i=Math.min(n.peekLength(),o.peekLength()),s=n.next(i),c=o.next(i);if(s.delete)continue;c.delete?r.push(c):r.retain(i,a.attributes.transform(s.attributes,c.attributes,e))}else r.retain(a.length(n.next()));return r.chop()},l.prototype.transformPosition=function(t,e){e=!!e;for(var n=a.iterator(this.ops),o=0;n.hasNext()&&o<=t;){var r=n.peekLength(),i=n.peekType();n.next(),"delete"!==i?("insert"===i&&(o<t||!e)&&(t+=r),o+=r):t-=Math.min(r,t-o)}return t},t.exports=l},function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,c=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===i.call(t)},l=function(t){if(!t||"[object Object]"!==i.call(t))return!1;var e,n=r.call(t,"constructor"),o=t.constructor&&t.constructor.prototype&&r.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!o)return!1;for(e in t);return void 0===e||r.call(t,e)},p=function(t,e){s&&"__proto__"===e.name?s(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},u=function(t,e){if("__proto__"===e){if(!r.call(t,e))return;if(a)return a(t,e).value}return t[e]};t.exports=function t(){var e,n,r,i,s,a,d=arguments[0],f=1,h=arguments.length,y=!1;for("boolean"==typeof d&&(y=d,d=arguments[1]||{},f=2),(null==d||"object"!==o(d)&&"function"!=typeof d)&&(d={});f<h;++f)if(null!=(e=arguments[f]))for(n in e)r=u(d,n),d!==(i=u(e,n))&&(y&&i&&(l(i)||(s=c(i)))?(s?(s=!1,a=r&&c(r)?r:[]):a=r&&l(r)?r:{},p(d,{name:n,newValue:t(y,a,i)})):void 0!==i&&p(d,{name:n,newValue:i}));return d}},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){var n=this;return e="[Parchment] "+e,(n=t.call(this,e)||this).message=e,n.name=n.constructor.name,n}return r(e,t),e}(Error);e.ParchmentError=i;var s,a={},c={},l={},p={};function u(t,e){var n;if(void 0===e&&(e=s.ANY),"string"==typeof t)n=p[t]||a[t];else if(t instanceof Text||t.nodeType===Node.TEXT_NODE)n=p.text;else if("number"==typeof t)t&s.LEVEL&s.BLOCK?n=p.block:t&s.LEVEL&s.INLINE&&(n=p.inline);else if(t instanceof HTMLElement){var o=(t.getAttribute("class")||"").split(/\s+/);for(var r in o)if(n=c[o[r]])break;n=n||l[t.tagName]}return null==n?null:e&s.LEVEL&n.scope&&e&s.TYPE&n.scope?n:null}e.DATA_KEY="__blot",function(t){t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY"}(s=e.Scope||(e.Scope={})),e.create=function(t,e){var n=u(t);if(null==n)throw new i("Unable to create "+t+" blot");var o=n,r=t instanceof Node||t.nodeType===Node.TEXT_NODE?t:o.create(e);return new o(r,e)},e.find=function t(n,o){return void 0===o&&(o=!1),null==n?null:null!=n[e.DATA_KEY]?n[e.DATA_KEY].blot:o?t(n.parentNode,o):null},e.query=u,e.register=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(e.length>1)return e.map((function(e){return t(e)}));var o=e[0];if("string"!=typeof o.blotName&&"string"!=typeof o.attrName)throw new i("Invalid definition");if("abstract"===o.blotName)throw new i("Cannot register abstract class");if(p[o.blotName||o.attrName]=o,"string"==typeof o.keyName)a[o.keyName]=o;else if(null!=o.className&&(c[o.className]=o),null!=o.tagName){Array.isArray(o.tagName)?o.tagName=o.tagName.map((function(t){return t.toUpperCase()})):o.tagName=o.tagName.toUpperCase();var r=Array.isArray(o.tagName)?o.tagName:[o.tagName];r.forEach((function(t){null!=l[t]&&null!=o.className||(l[t]=o)}))}return o}},function(t,e,n){(function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=function(){"use strict";function e(t,e){return null!=e&&t instanceof e}var o,r,i;try{o=Map}catch(t){o=function(){}}try{r=Set}catch(t){r=function(){}}try{i=Promise}catch(t){i=function(){}}function s(a,l,p,u,d){"object"===n(l)&&(p=l.depth,u=l.prototype,d=l.includeNonEnumerable,l=l.circular);var f=[],h=[],y=void 0!==t;return void 0===l&&(l=!0),void 0===p&&(p=1/0),function a(p,m){if(null===p)return null;if(0===m)return p;var b,g;if("object"!=n(p))return p;if(e(p,o))b=new o;else if(e(p,r))b=new r;else if(e(p,i))b=new i((function(t,e){p.then((function(e){t(a(e,m-1))}),(function(t){e(a(t,m-1))}))}));else if(s.__isArray(p))b=[];else if(s.__isRegExp(p))b=new RegExp(p.source,c(p)),p.lastIndex&&(b.lastIndex=p.lastIndex);else if(s.__isDate(p))b=new Date(p.getTime());else{if(y&&t.isBuffer(p))return b=t.allocUnsafe?t.allocUnsafe(p.length):new t(p.length),p.copy(b),b;e(p,Error)?b=Object.create(p):void 0===u?(g=Object.getPrototypeOf(p),b=Object.create(g)):(b=Object.create(u),g=u)}if(l){var v=f.indexOf(p);if(-1!=v)return h[v];f.push(p),h.push(b)}for(var C in e(p,o)&&p.forEach((function(t,e){var n=a(e,m-1),o=a(t,m-1);b.set(n,o)})),e(p,r)&&p.forEach((function(t){var e=a(t,m-1);b.add(e)})),p){var T;g&&(T=Object.getOwnPropertyDescriptor(g,C)),T&&null==T.set||(b[C]=a(p[C],m-1))}if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(p);for(C=0;C<O.length;C++){var x=O[C];(!(P=Object.getOwnPropertyDescriptor(p,x))||P.enumerable||d)&&(b[x]=a(p[x],m-1),P.enumerable||Object.defineProperty(b,x,{enumerable:!1}))}}if(d){var S=Object.getOwnPropertyNames(p);for(C=0;C<S.length;C++){var P,E=S[C];(P=Object.getOwnPropertyDescriptor(p,E))&&P.enumerable||(b[E]=a(p[E],m-1),Object.defineProperty(b,E,{enumerable:!1}))}}return b}(a,p)}function a(t){return Object.prototype.toString.call(t)}function c(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return s.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},s.__objToStr=a,s.__isDate=function(t){return"object"===n(t)&&"[object Date]"===a(t)},s.__isArray=function(t){return"object"===n(t)&&"[object Array]"===a(t)},s.__isRegExp=function(t){return"object"===n(t)&&"[object RegExp]"===a(t)},s.__getRegExpFlags=c,s}();"object"===n(e)&&e.exports&&(e.exports=o)}).call(this,n(46).Buffer,n(50)(t))},function(t,e,n){function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=n(16),i=n(36),s=n(37),a=n(42),c=n(43),l=n(45),p=Date.prototype.getTime;function u(t){return null==t}function d(t){return!(!t||"object"!==o(t)||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}t.exports=function t(e,n,f){var h=f||{};return!!(h.strict?s(e,n):e===n)||(!e||!n||"object"!==o(e)&&"object"!==o(n)?h.strict?s(e,n):e==n:function(e,n,s){var f,h;if(o(e)!==o(n))return!1;if(u(e)||u(n))return!1;if(e.prototype!==n.prototype)return!1;if(i(e)!==i(n))return!1;var y=a(e),m=a(n);if(y!==m)return!1;if(y||m)return e.source===n.source&&c(e)===c(n);if(l(e)&&l(n))return p.call(e)===p.call(n);var b=d(e),g=d(n);if(b!==g)return!1;if(b||g){if(e.length!==n.length)return!1;for(f=0;f<e.length;f++)if(e[f]!==n[f])return!1;return!0}if(o(e)!==o(n))return!1;try{var v=r(e),C=r(n)}catch(e){return!1}if(v.length!==C.length)return!1;for(v.sort(),C.sort(),f=v.length-1;f>=0;f--)if(v[f]!=C[f])return!1;for(f=v.length-1;f>=0;f--)if(!t(e[h=v[f]],n[h],s))return!1;return!0}(e,n,h))}},function(t,e,n){function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=n(5),i=n(2),s={attributes:{compose:function(t,e,n){"object"!==o(t)&&(t={}),"object"!==o(e)&&(e={});var r=i(!0,{},e);for(var s in n||(r=Object.keys(r).reduce((function(t,e){return null!=r[e]&&(t[e]=r[e]),t}),{})),t)void 0!==t[s]&&void 0===e[s]&&(r[s]=t[s]);return Object.keys(r).length>0?r:void 0},diff:function(t,e){"object"!==o(t)&&(t={}),"object"!==o(e)&&(e={});var n=Object.keys(t).concat(Object.keys(e)).reduce((function(n,o){return r(t[o],e[o])||(n[o]=void 0===e[o]?null:e[o]),n}),{});return Object.keys(n).length>0?n:void 0},transform:function(t,e,n){if("object"!==o(t))return e;if("object"===o(e)){if(!n)return e;var r=Object.keys(e).reduce((function(n,o){return void 0===t[o]&&(n[o]=e[o]),n}),{});return Object.keys(r).length>0?r:void 0}}},iterator:function(t){return new a(t)},length:function(t){return"number"==typeof t.delete?t.delete:"number"==typeof t.retain?t.retain:"string"==typeof t.insert?t.insert.length:1}};function a(t){this.ops=t,this.index=0,this.offset=0}a.prototype.hasNext=function(){return this.peekLength()<1/0},a.prototype.next=function(t){t||(t=1/0);var e=this.ops[this.index];if(e){var n=this.offset,o=s.length(e);if(t>=o-n?(t=o-n,this.index+=1,this.offset=0):this.offset+=t,"number"==typeof e.delete)return{delete:t};var r={};return e.attributes&&(r.attributes=e.attributes),"number"==typeof e.retain?r.retain=t:"string"==typeof e.insert?r.insert=e.insert.substr(n,t):r.insert=e.insert,r}return{retain:1/0}},a.prototype.peek=function(){return this.ops[this.index]},a.prototype.peekLength=function(){return this.ops[this.index]?s.length(this.ops[this.index])-this.offset:1/0},a.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},a.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var t=this.offset,e=this.index,n=this.next(),o=this.ops.slice(this.index);return this.offset=t,this.index=e,[n].concat(o)}return[]},t.exports=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=function(){function t(t,e,n){void 0===n&&(n={}),this.attrName=t,this.keyName=e;var r=o.Scope.TYPE&o.Scope.ATTRIBUTE;null!=n.scope?this.scope=n.scope&o.Scope.LEVEL|r:this.scope=o.Scope.ATTRIBUTE,null!=n.whitelist&&(this.whitelist=n.whitelist)}return t.keys=function(t){return[].map.call(t.attributes,(function(t){return t.name}))},t.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)},t.prototype.canAdd=function(t,e){return null!=o.query(t,o.Scope.BLOT&(this.scope|o.Scope.TYPE))&&(null==this.whitelist||("string"==typeof e?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1))},t.prototype.remove=function(t){t.removeAttribute(this.keyName)},t.prototype.value=function(t){var e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""},t}();e.default=r},function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=n(16),i="function"==typeof Symbol&&"symbol"===o(Symbol("foo")),s=Object.prototype.toString,a=Array.prototype.concat,c=Object.defineProperty,l=c&&function(){var t={};try{for(var e in c(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}(),p=function(t,e,n,o){var r;(!(e in t)||"function"==typeof(r=o)&&"[object Function]"===s.call(r)&&o())&&(l?c(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},u=function(t,e){var n=arguments.length>2?arguments[2]:{},o=r(e);i&&(o=a.call(o,Object.getOwnPropertySymbols(e)));for(var s=0;s<o.length;s+=1)p(t,o[s],e[o[s]],n[o[s]])};u.supportsDescriptors=!!l,t.exports=u},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(27),s=n(12),a=n(3),c=function(t){function e(e){var n=t.call(this,e)||this;return n.build(),n}return r(e,t),e.prototype.appendChild=function(t){this.insertBefore(t)},e.prototype.attach=function(){t.prototype.attach.call(this),this.children.forEach((function(t){t.attach()}))},e.prototype.build=function(){var t=this;this.children=new i.default,[].slice.call(this.domNode.childNodes).reverse().forEach((function(e){try{var n=l(e);t.insertBefore(n,t.children.head||void 0)}catch(t){if(t instanceof a.ParchmentError)return;throw t}}))},e.prototype.deleteAt=function(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,(function(t,e,n){t.deleteAt(e,n)}))},e.prototype.descendant=function(t,n){var o=this.children.find(n),r=o[0],i=o[1];return null==t.blotName&&t(r)||null!=t.blotName&&r instanceof t?[r,i]:r instanceof e?r.descendant(t,i):[null,-1]},e.prototype.descendants=function(t,n,o){void 0===n&&(n=0),void 0===o&&(o=Number.MAX_VALUE);var r=[],i=o;return this.children.forEachAt(n,o,(function(n,o,s){(null==t.blotName&&t(n)||null!=t.blotName&&n instanceof t)&&r.push(n),n instanceof e&&(r=r.concat(n.descendants(t,o,i))),i-=s})),r},e.prototype.detach=function(){this.children.forEach((function(t){t.detach()})),t.prototype.detach.call(this)},e.prototype.formatAt=function(t,e,n,o){this.children.forEachAt(t,e,(function(t,e,r){t.formatAt(e,r,n,o)}))},e.prototype.insertAt=function(t,e,n){var o=this.children.find(t),r=o[0],i=o[1];if(r)r.insertAt(i,e,n);else{var s=null==n?a.create("text",e):a.create(e,n);this.appendChild(s)}},e.prototype.insertBefore=function(t,e){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some((function(e){return t instanceof e})))throw new a.ParchmentError("Cannot insert "+t.statics.blotName+" into "+this.statics.blotName);t.insertInto(this,e)},e.prototype.length=function(){return this.children.reduce((function(t,e){return t+e.length()}),0)},e.prototype.moveChildren=function(t,e){this.children.forEach((function(n){t.insertBefore(n,e)}))},e.prototype.optimize=function(e){if(t.prototype.optimize.call(this,e),0===this.children.length)if(null!=this.statics.defaultChild){var n=a.create(this.statics.defaultChild);this.appendChild(n),n.optimize(e)}else this.remove()},e.prototype.path=function(t,n){void 0===n&&(n=!1);var o=this.children.find(t,n),r=o[0],i=o[1],s=[[this,t]];return r instanceof e?s.concat(r.path(i,n)):(null!=r&&s.push([r,i]),s)},e.prototype.removeChild=function(t){this.children.remove(t)},e.prototype.replace=function(n){n instanceof e&&n.moveChildren(this),t.prototype.replace.call(this,n)},e.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var n=this.clone();return this.parent.insertBefore(n,this.next),this.children.forEachAt(t,this.length(),(function(t,o,r){t=t.split(o,e),n.appendChild(t)})),n},e.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},e.prototype.update=function(t,e){var n=this,o=[],r=[];t.forEach((function(t){t.target===n.domNode&&"childList"===t.type&&(o.push.apply(o,t.addedNodes),r.push.apply(r,t.removedNodes))})),r.forEach((function(t){if(!(null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var e=a.find(t);null!=e&&(null!=e.domNode.parentNode&&e.domNode.parentNode!==n.domNode||e.detach())}})),o.filter((function(t){return t.parentNode==n.domNode})).sort((function(t,e){return t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1})).forEach((function(t){var e=null;null!=t.nextSibling&&(e=a.find(t.nextSibling));var o=l(t);o.next==e&&null!=o.next||(null!=o.parent&&o.parent.removeChild(n),n.insertBefore(o,e||void 0))}))},e}(s.default);function l(t){var e=a.find(t);if(null==e)try{e=a.create(t)}catch(n){e=a.create(a.Scope.INLINE),[].slice.call(t.childNodes).forEach((function(t){e.domNode.appendChild(t)})),t.parentNode&&t.parentNode.replaceChild(e.domNode,t),e.attach()}return e}e.default=c},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),s=n(13),a=n(9),c=n(3),l=function(t){function e(e){var n=t.call(this,e)||this;return n.attributes=new s.default(n.domNode),n}return r(e,t),e.formats=function(t){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?t.tagName.toLowerCase():void 0)},e.prototype.format=function(t,e){var n=c.query(t);n instanceof i.default?this.attributes.attribute(n,e):e&&(null==n||t===this.statics.blotName&&this.formats()[t]===e||this.replaceWith(t,e))},e.prototype.formats=function(){var t=this.attributes.values(),e=this.statics.formats(this.domNode);return null!=e&&(t[this.statics.blotName]=e),t},e.prototype.replaceWith=function(e,n){var o=t.prototype.replaceWith.call(this,e,n);return this.attributes.copy(o),o},e.prototype.update=function(e,n){var o=this;t.prototype.update.call(this,e,n),e.some((function(t){return t.target===o.domNode&&"attributes"===t.type}))&&this.attributes.build()},e.prototype.wrap=function(n,o){var r=t.prototype.wrap.call(this,n,o);return r instanceof e&&r.statics.scope===this.statics.scope&&this.attributes.move(r),r},e}(a.default);e.default=l},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(12),s=n(3),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.value=function(t){return!0},e.prototype.index=function(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1},e.prototype.position=function(t,e){var n=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return t>0&&(n+=1),[this.parent.domNode,n]},e.prototype.value=function(){var t;return(t={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,t},e.scope=s.Scope.INLINE_BLOT,e}(i.default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=function(){function t(t){this.domNode=t,this.domNode[o.DATA_KEY]={blot:this}}return Object.defineProperty(t.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),t.create=function(t){if(null==this.tagName)throw new o.ParchmentError("Blot definition missing tagName");var e;return Array.isArray(this.tagName)?("string"==typeof t&&(t=t.toUpperCase(),parseInt(t).toString()===t&&(t=parseInt(t))),e="number"==typeof t?document.createElement(this.tagName[t-1]):this.tagName.indexOf(t)>-1?document.createElement(t):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e},t.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},t.prototype.clone=function(){var t=this.domNode.cloneNode(!1);return o.create(t)},t.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[o.DATA_KEY]},t.prototype.deleteAt=function(t,e){this.isolate(t,e).remove()},t.prototype.formatAt=function(t,e,n,r){var i=this.isolate(t,e);if(null!=o.query(n,o.Scope.BLOT)&&r)i.wrap(n,r);else if(null!=o.query(n,o.Scope.ATTRIBUTE)){var s=o.create(this.statics.scope);i.wrap(s),s.format(n,r)}},t.prototype.insertAt=function(t,e,n){var r=null==n?o.create("text",e):o.create(e,n),i=this.split(t);this.parent.insertBefore(r,i)},t.prototype.insertInto=function(t,e){void 0===e&&(e=null),null!=this.parent&&this.parent.children.remove(this);var n=null;t.children.insertBefore(this,e),null!=e&&(n=e.domNode),this.domNode.parentNode==t.domNode&&this.domNode.nextSibling==n||t.domNode.insertBefore(this.domNode,n),this.parent=t,this.attach()},t.prototype.isolate=function(t,e){var n=this.split(t);return n.split(e),n},t.prototype.length=function(){return 1},t.prototype.offset=function(t){return void 0===t&&(t=this.parent),null==this.parent||this==t?0:this.parent.children.offset(this)+this.parent.offset(t)},t.prototype.optimize=function(t){null!=this.domNode[o.DATA_KEY]&&delete this.domNode[o.DATA_KEY].mutations},t.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},t.prototype.replace=function(t){null!=t.parent&&(t.parent.insertBefore(this,t.next),t.remove())},t.prototype.replaceWith=function(t,e){var n="string"==typeof t?o.create(t,e):t;return n.replace(this),n},t.prototype.split=function(t,e){return 0===t?this:this.next},t.prototype.update=function(t,e){},t.prototype.wrap=function(t,e){var n="string"==typeof t?o.create(t,e):t;return null!=this.parent&&this.parent.insertBefore(n,this.next),n.appendChild(this),n},t.blotName="abstract",t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(7),r=n(14),i=n(15),s=n(3),a=function(){function t(t){this.attributes={},this.domNode=t,this.build()}return t.prototype.attribute=function(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])},t.prototype.build=function(){var t=this;this.attributes={};var e=o.default.keys(this.domNode),n=r.default.keys(this.domNode),a=i.default.keys(this.domNode);e.concat(n).concat(a).forEach((function(e){var n=s.query(e,s.Scope.ATTRIBUTE);n instanceof o.default&&(t.attributes[n.attrName]=n)}))},t.prototype.copy=function(t){var e=this;Object.keys(this.attributes).forEach((function(n){var o=e.attributes[n].value(e.domNode);t.format(n,o)}))},t.prototype.move=function(t){var e=this;this.copy(t),Object.keys(this.attributes).forEach((function(t){e.attributes[t].remove(e.domNode)})),this.attributes={}},t.prototype.values=function(){var t=this;return Object.keys(this.attributes).reduce((function(e,n){return e[n]=t.attributes[n].value(t.domNode),e}),{})},t}();e.default=a},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function i(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter((function(t){return 0===t.indexOf(e+"-")}))}Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.keys=function(t){return(t.getAttribute("class")||"").split(/\s+/).map((function(t){return t.split("-").slice(0,-1).join("-")}))},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(this.keyName+"-"+e),!0)},e.prototype.remove=function(t){i(t,this.keyName).forEach((function(e){t.classList.remove(e)})),0===t.classList.length&&t.removeAttribute("class")},e.prototype.value=function(t){var e=(i(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""},e}(n(7).default);e.default=s},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function i(t){var e=t.split("-"),n=e.slice(1).map((function(t){return t[0].toUpperCase()+t.slice(1)})).join("");return e[0]+n}Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.keys=function(t){return(t.getAttribute("style")||"").split(";").map((function(t){return t.split(":")[0].trim()}))},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.style[i(this.keyName)]=e,!0)},e.prototype.remove=function(t){t.style[i(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")},e.prototype.value=function(t){var e=t.style[i(this.keyName)];return this.canAdd(t,e)?e:""},e}(n(7).default);e.default=s},function(t,e,n){"use strict";var o=Array.prototype.slice,r=n(17),i=Object.keys,s=i?function(t){return i(t)}:n(35),a=Object.keys;s.shim=function(){return Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return r(t)?a(o.call(t)):a(t)}):Object.keys=s,Object.keys||s},t.exports=s},function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=Object.prototype.toString;t.exports=function(t){var e=r.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"===o(t)&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===r.call(t.callee)),n}},function(t,e,n){"use strict";var o=n(19),r=n(39),i=r("%Function.prototype.apply%"),s=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||o.call(s,i);t.exports=function(){return a(o,s,arguments)},t.exports.apply=function(){return a(o,i,arguments)}},function(t,e,n){"use strict";var o=n(38);t.exports=Function.prototype.bind||o},function(t,e,n){"use strict";(function(e){function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=e.Symbol,i=n(40);t.exports=function(){return"function"==typeof r&&"function"==typeof Symbol&&"symbol"===o(r("foo"))&&"symbol"===o(Symbol("bar"))&&i()}}).call(this,n(21))},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":n(window))&&(o=window)}t.exports=o},function(t,e,n){"use strict";var o=function(t){return t!=t};t.exports=function(t,e){return 0===t&&0===e?1/t==1/e:t===e||!(!o(t)||!o(e))}},function(t,e,n){"use strict";var o=n(22);t.exports=function(){return"function"==typeof Object.is?Object.is:o}},function(t,e,n){"use strict";var o=Object,r=TypeError;t.exports=function(){if(null!=this&&this!==o(this))throw new r("RegExp.prototype.flags getter called on non-object");var t="";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t}},function(t,e,n){"use strict";var o=n(24),r=n(8).supportsDescriptors,i=Object.getOwnPropertyDescriptor,s=TypeError;t.exports=function(){if(!r)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var t=i(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof/a/.dotAll)return t.get}return o}},function(t,e,n){"use strict";var o=Object.prototype.hasOwnProperty,r="~";function i(){}function s(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),a.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)o.call(t,e)&&n.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t,e){var n=r?r+t:t,o=this._events[n];if(e)return!!o;if(!o)return[];if(o.fn)return[o.fn];for(var i=0,s=o.length,a=new Array(s);i<s;i++)a[i]=o[i].fn;return a},a.prototype.emit=function(t,e,n,o,i,s){var a=r?r+t:t;if(!this._events[a])return!1;var c,l,p=this._events[a],u=arguments.length;if(p.fn){switch(p.once&&this.removeListener(t,p.fn,void 0,!0),u){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,e),!0;case 3:return p.fn.call(p.context,e,n),!0;case 4:return p.fn.call(p.context,e,n,o),!0;case 5:return p.fn.call(p.context,e,n,o,i),!0;case 6:return p.fn.call(p.context,e,n,o,i,s),!0}for(l=1,c=new Array(u-1);l<u;l++)c[l-1]=arguments[l];p.fn.apply(p.context,c)}else{var d,f=p.length;for(l=0;l<f;l++)switch(p[l].once&&this.removeListener(t,p[l].fn,void 0,!0),u){case 1:p[l].fn.call(p[l].context);break;case 2:p[l].fn.call(p[l].context,e);break;case 3:p[l].fn.call(p[l].context,e,n);break;case 4:p[l].fn.call(p[l].context,e,n,o);break;default:if(!c)for(d=1,c=new Array(u-1);d<u;d++)c[d-1]=arguments[d];p[l].fn.apply(p[l].context,c)}}return!0},a.prototype.on=function(t,e,n){var o=new s(e,n||this),i=r?r+t:t;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],o]:this._events[i].push(o):(this._events[i]=o,this._eventsCount++),this},a.prototype.once=function(t,e,n){var o=new s(e,n||this,!0),i=r?r+t:t;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],o]:this._events[i].push(o):(this._events[i]=o,this._eventsCount++),this},a.prototype.removeListener=function(t,e,n,o){var s=r?r+t:t;if(!this._events[s])return this;if(!e)return 0==--this._eventsCount?this._events=new i:delete this._events[s],this;var a=this._events[s];if(a.fn)a.fn!==e||o&&!a.once||n&&a.context!==n||(0==--this._eventsCount?this._events=new i:delete this._events[s]);else{for(var c=0,l=[],p=a.length;c<p;c++)(a[c].fn!==e||o&&!a[c].once||n&&a[c].context!==n)&&l.push(a[c]);l.length?this._events[s]=1===l.length?l[0]:l:0==--this._eventsCount?this._events=new i:delete this._events[s]}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new i:delete this._events[e])):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prototype.setMaxListeners=function(){return this},a.prefixed=r,a.EventEmitter=a,t.exports=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.head=this.tail=null,this.length=0}return t.prototype.append=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.insertBefore(t[0],null),t.length>1&&this.append.apply(this,t.slice(1))},t.prototype.contains=function(t){for(var e,n=this.iterator();e=n();)if(e===t)return!0;return!1},t.prototype.insertBefore=function(t,e){t&&(t.next=e,null!=e?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)},t.prototype.offset=function(t){for(var e=0,n=this.head;null!=n;){if(n===t)return e;e+=n.length(),n=n.next}return-1},t.prototype.remove=function(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)},t.prototype.iterator=function(t){return void 0===t&&(t=this.head),function(){var e=t;return null!=t&&(t=t.next),e}},t.prototype.find=function(t,e){void 0===e&&(e=!1);for(var n,o=this.iterator();n=o();){var r=n.length();if(t<r||e&&t===r&&(null==n.next||0!==n.next.length()))return[n,t];t-=r}return[null,0]},t.prototype.forEach=function(t){for(var e,n=this.iterator();e=n();)t(e)},t.prototype.forEachAt=function(t,e,n){if(!(e<=0))for(var o,r=this.find(t),i=r[0],s=t-r[1],a=this.iterator(i);(o=a())&&s<t+e;){var c=o.length();t>s?n(o,t-s,Math.min(e,s+c-t)):n(o,0,Math.min(c,t+e-s)),s+=c}},t.prototype.map=function(t){return this.reduce((function(e,n){return e.push(t(n)),e}),[])},t.prototype.reduce=function(t,e){for(var n,o=this.iterator();n=o();)e=t(e,n);return e},t}();e.default=o},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),s=n(3),a={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},c=function(t){function e(e){var n=t.call(this,e)||this;return n.scroll=n,n.observer=new MutationObserver((function(t){n.update(t)})),n.observer.observe(n.domNode,a),n.attach(),n}return r(e,t),e.prototype.detach=function(){t.prototype.detach.call(this),this.observer.disconnect()},e.prototype.deleteAt=function(e,n){this.update(),0===e&&n===this.length()?this.children.forEach((function(t){t.remove()})):t.prototype.deleteAt.call(this,e,n)},e.prototype.formatAt=function(e,n,o,r){this.update(),t.prototype.formatAt.call(this,e,n,o,r)},e.prototype.insertAt=function(e,n,o){this.update(),t.prototype.insertAt.call(this,e,n,o)},e.prototype.optimize=function(e,n){var o=this;void 0===e&&(e=[]),void 0===n&&(n={}),t.prototype.optimize.call(this,n);for(var r=[].slice.call(this.observer.takeRecords());r.length>0;)e.push(r.pop());for(var a=function(t,e){void 0===e&&(e=!0),null!=t&&t!==o&&null!=t.domNode.parentNode&&(null==t.domNode[s.DATA_KEY].mutations&&(t.domNode[s.DATA_KEY].mutations=[]),e&&a(t.parent))},c=function(t){null!=t.domNode[s.DATA_KEY]&&null!=t.domNode[s.DATA_KEY].mutations&&(t instanceof i.default&&t.children.forEach(c),t.optimize(n))},l=e,p=0;l.length>0;p+=1){if(p>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(l.forEach((function(t){var e=s.find(t.target,!0);null!=e&&(e.domNode===t.target&&("childList"===t.type?(a(s.find(t.previousSibling,!1)),[].forEach.call(t.addedNodes,(function(t){var e=s.find(t,!1);a(e,!1),e instanceof i.default&&e.children.forEach((function(t){a(t,!1)}))}))):"attributes"===t.type&&a(e.prev)),a(e))})),this.children.forEach(c),r=(l=[].slice.call(this.observer.takeRecords())).slice();r.length>0;)e.push(r.pop())}},e.prototype.update=function(e,n){var o=this;void 0===n&&(n={}),(e=e||this.observer.takeRecords()).map((function(t){var e=s.find(t.target,!0);return null==e?null:null==e.domNode[s.DATA_KEY].mutations?(e.domNode[s.DATA_KEY].mutations=[t],e):(e.domNode[s.DATA_KEY].mutations.push(t),null)})).forEach((function(t){null!=t&&t!==o&&null!=t.domNode[s.DATA_KEY]&&t.update(t.domNode[s.DATA_KEY].mutations||[],n)})),null!=this.domNode[s.DATA_KEY].mutations&&t.prototype.update.call(this,this.domNode[s.DATA_KEY].mutations,n),this.optimize(e,n)},e.blotName="scroll",e.defaultChild="block",e.scope=s.Scope.BLOCK_BLOT,e.tagName="DIV",e}(i.default);e.default=c},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),s=n(3),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.formats=function(n){if(n.tagName!==e.tagName)return t.formats.call(this,n)},e.prototype.format=function(n,o){var r=this;n!==this.statics.blotName||o?t.prototype.format.call(this,n,o):(this.children.forEach((function(t){t instanceof i.default||(t=t.wrap(e.blotName,!0)),r.attributes.copy(t)})),this.unwrap())},e.prototype.formatAt=function(e,n,o,r){null!=this.formats()[o]||s.query(o,s.Scope.ATTRIBUTE)?this.isolate(e,n).format(o,r):t.prototype.formatAt.call(this,e,n,o,r)},e.prototype.optimize=function(n){t.prototype.optimize.call(this,n);var o=this.formats();if(0===Object.keys(o).length)return this.unwrap();var r=this.next;r instanceof e&&r.prev===this&&function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(t[n]!==e[n])return!1;return!0}(o,r.formats())&&(r.moveChildren(this),r.remove())},e.blotName="inline",e.scope=s.Scope.INLINE_BLOT,e.tagName="SPAN",e}(i.default);e.default=a},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),s=n(3),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.formats=function(n){var o=s.query(e.blotName).tagName;if(n.tagName!==o)return t.formats.call(this,n)},e.prototype.format=function(n,o){null!=s.query(n,s.Scope.BLOCK)&&(n!==this.statics.blotName||o?t.prototype.format.call(this,n,o):this.replaceWith(e.blotName))},e.prototype.formatAt=function(e,n,o,r){null!=s.query(o,s.Scope.BLOCK)?this.format(o,r):t.prototype.formatAt.call(this,e,n,o,r)},e.prototype.insertAt=function(e,n,o){if(null==o||null!=s.query(n,s.Scope.INLINE))t.prototype.insertAt.call(this,e,n,o);else{var r=this.split(e),i=s.create(n,o);r.parent.insertBefore(i,r)}},e.prototype.update=function(e,n){navigator.userAgent.match(/Trident/)?this.build():t.prototype.update.call(this,e,n)},e.blotName="block",e.scope=s.Scope.BLOCK_BLOT,e.tagName="P",e}(i.default);e.default=a},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.formats=function(t){},e.prototype.format=function(e,n){t.prototype.formatAt.call(this,0,this.length(),e,n)},e.prototype.formatAt=function(e,n,o,r){0===e&&n===this.length()?this.format(o,r):t.prototype.formatAt.call(this,e,n,o,r)},e.prototype.formats=function(){return this.statics.formats(this.domNode)},e}(n(11).default);e.default=i},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(11),s=n(3),a=function(t){function e(e){var n=t.call(this,e)||this;return n.text=n.statics.value(n.domNode),n}return r(e,t),e.create=function(t){return document.createTextNode(t)},e.value=function(t){var e=t.data;return e.normalize&&(e=e.normalize()),e},e.prototype.deleteAt=function(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)},e.prototype.index=function(t,e){return this.domNode===t?e:-1},e.prototype.insertAt=function(e,n,o){null==o?(this.text=this.text.slice(0,e)+n+this.text.slice(e),this.domNode.data=this.text):t.prototype.insertAt.call(this,e,n,o)},e.prototype.length=function(){return this.text.length},e.prototype.optimize=function(n){t.prototype.optimize.call(this,n),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof e&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},e.prototype.position=function(t,e){return void 0===e&&(e=!1),[this.domNode,t]},e.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var n=s.create(this.domNode.splitText(t));return this.parent.insertBefore(n,this.next),this.text=this.statics.value(this.domNode),n},e.prototype.update=function(t,e){var n=this;t.some((function(t){return"characterData"===t.type&&t.target===n.domNode}))&&(this.text=this.statics.value(this.domNode))},e.prototype.value=function(){return this.text},e.blotName="text",e.scope=s.Scope.INLINE_BLOT,e}(i.default);e.default=a},function(t,e){var n=document.createElement("div");if(n.classList.toggle("test-class",!1),n.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return arguments.length>1&&!this.contains(t)==!e?e:o.call(this,t)}}String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.substr(e,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){var n=this.toString();("number"!=typeof e||!isFinite(e)||Math.floor(e)!==e||e>n.length)&&(e=n.length),e-=t.length;var o=n.indexOf(t,e);return-1!==o&&o===e}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),o=n.length>>>0,r=arguments[1],i=0;i<o;i++)if(e=n[i],t.call(r,e,i,n))return e}}),document.addEventListener("DOMContentLoaded",(function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)}))},function(t,e){function n(t,e,s){if(t==e)return t?[[0,t]]:[];(s<0||t.length<s)&&(s=null);var c=r(t,e),l=t.substring(0,c);c=i(t=t.substring(c),e=e.substring(c));var p=t.substring(t.length-c),u=function(t,e){var s;if(!t)return[[1,e]];if(!e)return[[-1,t]];var a=t.length>e.length?t:e,c=t.length>e.length?e:t,l=a.indexOf(c);if(-1!=l)return s=[[1,a.substring(0,l)],[0,c],[1,a.substring(l+c.length)]],t.length>e.length&&(s[0][0]=s[2][0]=-1),s;if(1==c.length)return[[-1,t],[1,e]];var p=function(t,e){var n=t.length>e.length?t:e,o=t.length>e.length?e:t;if(n.length<4||2*o.length<n.length)return null;function s(t,e,n){for(var o,s,a,c,l=t.substring(n,n+Math.floor(t.length/4)),p=-1,u="";-1!=(p=e.indexOf(l,p+1));){var d=r(t.substring(n),e.substring(p)),f=i(t.substring(0,n),e.substring(0,p));u.length<f+d&&(u=e.substring(p-f,p)+e.substring(p,p+d),o=t.substring(0,n-f),s=t.substring(n+d),a=e.substring(0,p-f),c=e.substring(p+d))}return 2*u.length>=t.length?[o,s,a,c,u]:null}var a,c,l,p,u,d=s(n,o,Math.ceil(n.length/4)),f=s(n,o,Math.ceil(n.length/2));return d||f?(a=f?d&&d[4].length>f[4].length?d:f:d,t.length>e.length?(c=a[0],l=a[1],p=a[2],u=a[3]):(p=a[0],u=a[1],c=a[2],l=a[3]),[c,l,p,u,a[4]]):null}(t,e);if(p){var u=p[0],d=p[1],f=p[2],h=p[3],y=p[4],m=n(u,f),b=n(d,h);return m.concat([[0,y]],b)}return function(t,e){for(var n=t.length,r=e.length,i=Math.ceil((n+r)/2),s=i,a=2*i,c=new Array(a),l=new Array(a),p=0;p<a;p++)c[p]=-1,l[p]=-1;c[s+1]=0,l[s+1]=0;for(var u=n-r,d=u%2!=0,f=0,h=0,y=0,m=0,b=0;b<i;b++){for(var g=-b+f;g<=b-h;g+=2){for(var v=s+g,C=(P=g==-b||g!=b&&c[v-1]<c[v+1]?c[v+1]:c[v-1]+1)-g;P<n&&C<r&&t.charAt(P)==e.charAt(C);)P++,C++;if(c[v]=P,P>n)h+=2;else if(C>r)f+=2;else if(d&&(x=s+u-g)>=0&&x<a&&-1!=l[x]){var T=n-l[x];if(P>=T)return o(t,e,P,C)}}for(var O=-b+y;O<=b-m;O+=2){for(var x=s+O,S=(T=O==-b||O!=b&&l[x-1]<l[x+1]?l[x+1]:l[x-1]+1)-O;T<n&&S<r&&t.charAt(n-T-1)==e.charAt(r-S-1);)T++,S++;if(l[x]=T,T>n)m+=2;else if(S>r)y+=2;else if(!d&&(v=s+u-O)>=0&&v<a&&-1!=c[v]){var P=c[v];if(C=s+P-v,P>=(T=n-T))return o(t,e,P,C)}}}return[[-1,t],[1,e]]}(t,e)}(t=t.substring(0,t.length-c),e=e.substring(0,e.length-c));return l&&u.unshift([0,l]),p&&u.push([0,p]),function t(e){e.push([0,""]);for(var n,o=0,s=0,a=0,c="",l="";o<e.length;)switch(e[o][0]){case 1:a++,l+=e[o][1],o++;break;case-1:s++,c+=e[o][1],o++;break;case 0:s+a>1?(0!==s&&0!==a&&(0!==(n=r(l,c))&&(o-s-a>0&&0==e[o-s-a-1][0]?e[o-s-a-1][1]+=l.substring(0,n):(e.splice(0,0,[0,l.substring(0,n)]),o++),l=l.substring(n),c=c.substring(n)),0!==(n=i(l,c))&&(e[o][1]=l.substring(l.length-n)+e[o][1],l=l.substring(0,l.length-n),c=c.substring(0,c.length-n))),0===s?e.splice(o-a,s+a,[1,l]):0===a?e.splice(o-s,s+a,[-1,c]):e.splice(o-s-a,s+a,[-1,c],[1,l]),o=o-s-a+(s?1:0)+(a?1:0)+1):0!==o&&0==e[o-1][0]?(e[o-1][1]+=e[o][1],e.splice(o,1)):o++,a=0,s=0,c="",l=""}""===e[e.length-1][1]&&e.pop();var p=!1;for(o=1;o<e.length-1;)0==e[o-1][0]&&0==e[o+1][0]&&(e[o][1].substring(e[o][1].length-e[o-1][1].length)==e[o-1][1]?(e[o][1]=e[o-1][1]+e[o][1].substring(0,e[o][1].length-e[o-1][1].length),e[o+1][1]=e[o-1][1]+e[o+1][1],e.splice(o-1,1),p=!0):e[o][1].substring(0,e[o+1][1].length)==e[o+1][1]&&(e[o-1][1]+=e[o+1][1],e[o][1]=e[o][1].substring(e[o+1][1].length)+e[o+1][1],e.splice(o+1,1),p=!0)),o++;p&&t(e)}(u),null!=s&&(u=function(t,e){var n=function(t,e){if(0===e)return[0,t];for(var n=0,o=0;o<t.length;o++){var r=t[o];if(-1===r[0]||0===r[0]){var i=n+r[1].length;if(e===i)return[o+1,t];if(e<i){t=t.slice();var s=e-n,a=[r[0],r[1].slice(0,s)],c=[r[0],r[1].slice(s)];return t.splice(o,1,a,c),[o+1,t]}n=i}}throw new Error("cursor_pos is out of bounds!")}(t,e),o=n[1],r=n[0],i=o[r],s=o[r+1];if(null==i)return t;if(0!==i[0])return t;if(null!=s&&i[1]+s[1]===s[1]+i[1])return o.splice(r,2,s,i),a(o,r,2);if(null!=s&&0===s[1].indexOf(i[1])){o.splice(r,2,[s[0],i[1]],[0,i[1]]);var c=s[1].slice(i[1].length);return c.length>0&&o.splice(r+2,0,[s[0],c]),a(o,r,3)}return t}(u,s)),function(t){for(var e=!1,n=function(t){return t.charCodeAt(0)>=56320&&t.charCodeAt(0)<=57343},o=2;o<t.length;o+=1)0===t[o-2][0]&&(r=t[o-2][1]).charCodeAt(r.length-1)>=55296&&r.charCodeAt(r.length-1)<=56319&&-1===t[o-1][0]&&n(t[o-1][1])&&1===t[o][0]&&n(t[o][1])&&(e=!0,t[o-1][1]=t[o-2][1].slice(-1)+t[o-1][1],t[o][1]=t[o-2][1].slice(-1)+t[o][1],t[o-2][1]=t[o-2][1].slice(0,-1));var r;if(!e)return t;var i=[];for(o=0;o<t.length;o+=1)t[o][1].length>0&&i.push(t[o]);return i}(u)}function o(t,e,o,r){var i=t.substring(0,o),s=e.substring(0,r),a=t.substring(o),c=e.substring(r),l=n(i,s),p=n(a,c);return l.concat(p)}function r(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,o=Math.min(t.length,e.length),r=o,i=0;n<r;)t.substring(i,r)==e.substring(i,r)?i=n=r:o=r,r=Math.floor((o-n)/2+n);return r}function i(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,o=Math.min(t.length,e.length),r=o,i=0;n<r;)t.substring(t.length-r,t.length-i)==e.substring(e.length-r,e.length-i)?i=n=r:o=r,r=Math.floor((o-n)/2+n);return r}var s=n;function a(t,e,n){for(var o=e+n-1;o>=0&&o>=e-1;o--)if(o+1<t.length){var r=t[o],i=t[o+1];r[0]===i[1]&&t.splice(o,2,[r[0],r[1]+i[1]])}return t}s.INSERT=1,s.DELETE=-1,s.EQUAL=0,t.exports=s},function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,s=Object.prototype.toString,a=n(17),c=Object.prototype.propertyIsEnumerable,l=!c.call({toString:null},"toString"),p=c.call((function(){}),"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(t){var e=t.constructor;return e&&e.prototype===t},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!f["$"+t]&&i.call(window,t)&&null!==window[t]&&"object"===o(window[t]))try{d(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();r=function(t){var e=null!==t&&"object"===o(t),n="[object Function]"===s.call(t),r=a(t),c=e&&"[object String]"===s.call(t),f=[];if(!e&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var y=p&&n;if(c&&t.length>0&&!i.call(t,0))for(var m=0;m<t.length;++m)f.push(String(m));if(r&&t.length>0)for(var b=0;b<t.length;++b)f.push(String(b));else for(var g in t)y&&"prototype"===g||!i.call(t,g)||f.push(String(g));if(l)for(var v=function(t){if("undefined"==typeof window||!h)return d(t);try{return d(t)}catch(t){return!1}}(t),C=0;C<u.length;++C)v&&"constructor"===u[C]||!i.call(t,u[C])||f.push(u[C]);return f}}t.exports=r},function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r="function"==typeof Symbol&&"symbol"===o(Symbol.toStringTag),i=Object.prototype.toString,s=function(t){return!(r&&t&&"object"===o(t)&&Symbol.toStringTag in t)&&"[object Arguments]"===i.call(t)},a=function(t){return!!s(t)||null!==t&&"object"===o(t)&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==i.call(t)&&"[object Function]"===i.call(t.callee)},c=function(){return s(arguments)}();s.isLegacyArguments=a,t.exports=c?s:a},function(t,e,n){"use strict";var o=n(8),r=n(18),i=n(22),s=n(23),a=n(41),c=r(s(),Object);o(c,{getPolyfill:s,implementation:i,shim:a}),t.exports=c},function(t,e,n){"use strict";var o="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,i=Object.prototype.toString;t.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==i.call(e))throw new TypeError(o+e);for(var n,s=r.call(arguments,1),a=function(){if(this instanceof n){var o=e.apply(this,s.concat(r.call(arguments)));return Object(o)===o?o:this}return e.apply(t,s.concat(r.call(arguments)))},c=Math.max(0,e.length-s.length),l=[],p=0;p<c;p++)l.push("$"+p);if(n=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(a),e.prototype){var u=function(){};u.prototype=e.prototype,n.prototype=new u,u.prototype=null}return n}},function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=TypeError,i=Object.getOwnPropertyDescriptor;if(i)try{i({},"")}catch(t){i=null}var s=function(){throw new r},a=i?function(){try{return s}catch(t){try{return i(arguments,"callee").get}catch(t){return s}}}():s,c=n(20)(),l=Object.getPrototypeOf||function(t){return t.__proto__},p="undefined"==typeof Uint8Array?void 0:l(Uint8Array),u={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":c?l([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":c?l(l([][Symbol.iterator]())):void 0,"%JSON%":"object"===("undefined"==typeof JSON?"undefined":o(JSON))?JSON:void 0,"%JSONParse%":"object"===("undefined"==typeof JSON?"undefined":o(JSON))?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&c?l((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&c?l((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":c?l(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":c?Symbol:void 0,"%SymbolPrototype%":c?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":a,"%TypedArray%":p,"%TypedArrayPrototype%":p?p.prototype:void 0,"%TypeError%":r,"%TypeErrorPrototype%":r.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},d=n(19).call(Function.call,String.prototype.replace),f=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,h=/\\(\\)?/g,y=function(t){var e=[];return d(t,f,(function(t,n,o,r){e[e.length]=o?d(r,h,"$1"):n||t})),e},m=function(t,e){if(!(t in u))throw new SyntaxError("intrinsic "+t+" does not exist!");if(void 0===u[t]&&!e)throw new r("intrinsic "+t+" exists, but is not available. Please file an issue!");return u[t]};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');for(var n=y(t),o=m("%"+(n.length>0?n[0]:"")+"%",e),s=1;s<n.length;s+=1)if(null!=o)if(i&&s+1>=n.length){var a=i(o,n[s]);if(!e&&!(n[s]in o))throw new r("base intrinsic for "+t+" exists, but the property is not available.");o=a?a.get||a.value:o[n[s]]}else o=o[n[s]];return o}},function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"===o(Symbol.iterator))return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},function(t,e,n){"use strict";var o=n(23),r=n(8);t.exports=function(){var t=o();return r(Object,{is:t},{is:function(){return Object.is!==t}}),t}},function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r,i,s,a=n(20)()&&"symbol"===o(Symbol.toStringTag);if(a){r=Function.call.bind(RegExp.prototype.exec),i={};var c=function(){throw i};s={toString:c,valueOf:c},"symbol"===o(Symbol.toPrimitive)&&(s[Symbol.toPrimitive]=c)}var l=Object.prototype.toString;t.exports=a?function(t){if(!t||"object"!==o(t))return!1;try{r(t,s)}catch(t){return t===i}}:function(t){return!(!t||"object"!==o(t)&&"function"!=typeof t)&&"[object RegExp]"===l.call(t)}},function(t,e,n){"use strict";var o=n(8),r=n(18),i=n(24),s=n(25),a=n(44),c=r(i);o(c,{getPolyfill:s,implementation:i,shim:a}),t.exports=c},function(t,e,n){"use strict";var o=n(8).supportsDescriptors,r=n(25),i=Object.getOwnPropertyDescriptor,s=Object.defineProperty,a=TypeError,c=Object.getPrototypeOf,l=/a/;t.exports=function(){if(!o||!c)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=r(),e=c(l),n=i(e,"flags");return n&&n.get===t||s(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}},function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=Date.prototype.getDay,i=Object.prototype.toString,s="function"==typeof Symbol&&"symbol"===o(Symbol.toStringTag);t.exports=function(t){return"object"===o(t)&&null!==t&&(s?function(t){try{return r.call(t),!0}catch(t){return!1}}(t):"[object Date]"===i.call(t))}},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var o=n(47),r=n(48),i=n(49);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}return l(this,t,e,n)}function l(t,e,n,o){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,o){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(o||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===o?new Uint8Array(e):void 0===o?new Uint8Array(e,n):new Uint8Array(e,n,o),c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=d(t,e),t}(t,e,n,o):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var o=0|h(e,n),r=(t=a(t,o)).write(e,n);return r!==o&&(t=t.slice(0,r)),t}(t,e,n):function(t,e){if(c.isBuffer(e)){var n=0|f(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(o=e.length)!=o?a(t,0):d(t,e);if("Buffer"===e.type&&i(e.data))return d(t,e.data)}var o;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function p(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e){if(p(e),t=a(t,e<0?0:0|f(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function d(t,e){var n=e.length<0?0:0|f(e.length);t=a(t,n);for(var o=0;o<n;o+=1)t[o]=255&e[o];return t}function f(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function h(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var o=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(t).length;default:if(o)return F(t).length;e=(""+e).toLowerCase(),o=!0}}function y(t,e,n){var o=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return A(this,e,n);case"utf8":case"utf-8":return E(this,e,n);case"ascii":return k(this,e,n);case"latin1":case"binary":return w(this,e,n);case"base64":return P(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,n);default:if(o)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),o=!0}}function m(t,e,n){var o=t[e];t[e]=t[n],t[n]=o}function b(t,e,n,o,r){if(0===t.length)return-1;if("string"==typeof n?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=c.from(e,o)),c.isBuffer(e))return 0===e.length?-1:g(t,e,n,o,r);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,o,r);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,o,r){var i,s=1,a=t.length,c=e.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,n/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var p=-1;for(i=n;i<a;i++)if(l(t,i)===l(e,-1===p?0:i-p)){if(-1===p&&(p=i),i-p+1===c)return p*s}else-1!==p&&(i-=i-p),p=-1}else for(n+c>a&&(n=a-c),i=n;i>=0;i--){for(var u=!0,d=0;d<c;d++)if(l(t,i+d)!==l(e,d)){u=!1;break}if(u)return i}return-1}function v(t,e,n,o){n=Number(n)||0;var r=t.length-n;o?(o=Number(o))>r&&(o=r):o=r;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");o>i/2&&(o=i/2);for(var s=0;s<o;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function C(t,e,n,o){return z(F(e,t.length-n),t,n,o)}function T(t,e,n,o){return z(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,o)}function O(t,e,n,o){return T(t,e,n,o)}function x(t,e,n,o){return z(U(e),t,n,o)}function S(t,e,n,o){return z(function(t,e){for(var n,o,r,i=[],s=0;s<t.length&&!((e-=2)<0);++s)o=(n=t.charCodeAt(s))>>8,r=n%256,i.push(r),i.push(o);return i}(e,t.length-n),t,n,o)}function P(t,e,n){return 0===e&&n===t.length?o.fromByteArray(t):o.fromByteArray(t.slice(e,n))}function E(t,e,n){n=Math.min(t.length,n);for(var o=[],r=e;r<n;){var i,s,a,c,l=t[r],p=null,u=l>239?4:l>223?3:l>191?2:1;if(r+u<=n)switch(u){case 1:l<128&&(p=l);break;case 2:128==(192&(i=t[r+1]))&&(c=(31&l)<<6|63&i)>127&&(p=c);break;case 3:i=t[r+1],s=t[r+2],128==(192&i)&&128==(192&s)&&(c=(15&l)<<12|(63&i)<<6|63&s)>2047&&(c<55296||c>57343)&&(p=c);break;case 4:i=t[r+1],s=t[r+2],a=t[r+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(c=(15&l)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(p=c)}null===p?(p=65533,u=1):p>65535&&(p-=65536,o.push(p>>>10&1023|55296),p=56320|1023&p),o.push(p),r+=u}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var n="",o=0;o<e;)n+=String.fromCharCode.apply(String,t.slice(o,o+=4096));return n}(o)}function k(t,e,n){var o="";n=Math.min(t.length,n);for(var r=e;r<n;++r)o+=String.fromCharCode(127&t[r]);return o}function w(t,e,n){var o="";n=Math.min(t.length,n);for(var r=e;r<n;++r)o+=String.fromCharCode(t[r]);return o}function A(t,e,n){var o=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>o)&&(n=o);for(var r="",i=e;i<n;++i)r+=H(t[i]);return r}function I(t,e,n){for(var o=t.slice(e,n),r="",i=0;i<o.length;i+=2)r+=String.fromCharCode(o[i]+256*o[i+1]);return r}function R(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function j(t,e,n,o,r,i){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<i)throw new RangeError('"value" argument is out of bounds');if(n+o>t.length)throw new RangeError("Index out of range")}function _(t,e,n,o){e<0&&(e=65535+e+1);for(var r=0,i=Math.min(t.length-n,2);r<i;++r)t[n+r]=(e&255<<8*(o?r:1-r))>>>8*(o?r:1-r)}function D(t,e,n,o){e<0&&(e=4294967295+e+1);for(var r=0,i=Math.min(t.length-n,4);r<i;++r)t[n+r]=e>>>8*(o?r:3-r)&255}function N(t,e,n,o,r,i){if(n+o>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(t,e,n,o,i){return i||N(t,0,n,4),r.write(t,e,n,o,23,4),n+4}function B(t,e,n,o,i){return i||N(t,0,n,8),r.write(t,e,n,o,52,8),n+8}e.Buffer=c,e.SlowBuffer=function(t){return+t!=t&&(t=0),c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return l(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return function(t,e,n,o){return p(e),e<=0?a(t,e):void 0!==n?"string"==typeof o?a(t,e).fill(n,o):a(t,e).fill(n):a(t,e)}(null,t,e,n)},c.allocUnsafe=function(t){return u(null,t)},c.allocUnsafeSlow=function(t){return u(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,o=e.length,r=0,i=Math.min(n,o);r<i;++r)if(t[r]!==e[r]){n=t[r],o=e[r];break}return n<o?-1:o<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var o=c.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var s=t[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(o,r),r+=s.length}return o},c.byteLength=h,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?E(this,0,t):y.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,o,r){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===o&&(o=0),void 0===r&&(r=this.length),e<0||n>t.length||o<0||r>this.length)throw new RangeError("out of range index");if(o>=r&&e>=n)return 0;if(o>=r)return-1;if(e>=n)return 1;if(this===t)return 0;for(var i=(r>>>=0)-(o>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(i,s),l=this.slice(o,r),p=t.slice(e,n),u=0;u<a;++u)if(l[u]!==p[u]){i=l[u],s=p[u];break}return i<s?-1:s<i?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return b(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return b(this,t,e,n,!1)},c.prototype.write=function(t,e,n,o){if(void 0===e)o="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)o=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===o&&(o="utf8")):(o=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var i=!1;;)switch(o){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return C(this,t,e,n);case"ascii":return T(this,t,e,n);case"latin1":case"binary":return O(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},c.prototype.slice=function(t,e){var n,o=this.length;if((t=~~t)<0?(t+=o)<0&&(t=0):t>o&&(t=o),(e=void 0===e?o:~~e)<0?(e+=o)<0&&(e=0):e>o&&(e=o),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=c.prototype;else{var r=e-t;n=new c(r,void 0);for(var i=0;i<r;++i)n[i]=this[i+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var o=this[t],r=1,i=0;++i<e&&(r*=256);)o+=this[t+i]*r;return o},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var o=this[t+--e],r=1;e>0&&(r*=256);)o+=this[t+--e]*r;return o},c.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var o=this[t],r=1,i=0;++i<e&&(r*=256);)o+=this[t+i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var o=e,r=1,i=this[t+--o];o>0&&(r*=256);)i+=this[t+--o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},c.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),r.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),r.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),r.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),r.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,o){t=+t,e|=0,n|=0,o||j(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,i=0;for(this[e]=255&t;++i<n&&(r*=256);)this[e+i]=t/r&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,o){t=+t,e|=0,n|=0,o||j(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,i=1;for(this[e+r]=255&t;--r>=0&&(i*=256);)this[e+r]=t/i&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):_(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):_(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):D(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,o){if(t=+t,e|=0,!o){var r=Math.pow(2,8*n-1);j(this,t,e,n,r-1,-r)}var i=0,s=1,a=0;for(this[e]=255&t;++i<n&&(s*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+n},c.prototype.writeIntBE=function(t,e,n,o){if(t=+t,e|=0,!o){var r=Math.pow(2,8*n-1);j(this,t,e,n,r-1,-r)}var i=n-1,s=1,a=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):_(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):_(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):D(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return M(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return M(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return B(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return B(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,o){if(n||(n=0),o||0===o||(o=this.length),e>=t.length&&(e=t.length),e||(e=0),o>0&&o<n&&(o=n),o===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-e<o-n&&(o=t.length-e+n);var r,i=o-n;if(this===t&&n<e&&e<o)for(r=i-1;r>=0;--r)t[r+e]=this[r+n];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(r=0;r<i;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},c.prototype.fill=function(t,e,n,o){if("string"==typeof t){if("string"==typeof e?(o=e,e=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!c.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{var s=c.isBuffer(t)?t:F(new c(t,o).toString()),a=s.length;for(i=0;i<n-e;++i)this[i+e]=s[i%a]}return this};var L=/[^+\/0-9A-Za-z-_]/g;function H(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,e){var n;e=e||1/0;for(var o=t.length,r=null,i=[],s=0;s<o;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===o){(e-=3)>-1&&i.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&i.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function U(t){return o.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(L,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,n,o){for(var r=0;r<o&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}}).call(this,n(21))},function(t,e,n){"use strict";e.byteLength=function(t){var e=l(t),n=e[0],o=e[1];return 3*(n+o)/4-o},e.toByteArray=function(t){var e,n,o=l(t),s=o[0],a=o[1],c=new i(function(t,e,n){return 3*(e+n)/4-n}(0,s,a)),p=0,u=a>0?s-4:s;for(n=0;n<u;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],c[p++]=e>>16&255,c[p++]=e>>8&255,c[p++]=255&e;return 2===a&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,c[p++]=255&e),1===a&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,c[p++]=e>>8&255,c[p++]=255&e),c},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,i=[],s=0,a=n-r;s<a;s+=16383)i.push(p(t,s,s+16383>a?a:s+16383));return 1===r?(e=t[n-1],i.push(o[e>>2]+o[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],i.push(o[e>>10]+o[e>>4&63]+o[e<<2&63]+"=")),i.join("")};for(var o=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)o[a]=s[a],r[s.charCodeAt(a)]=a;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function p(t,e,n){for(var r,i,s=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(o[(i=r)>>18&63]+o[i>>12&63]+o[i>>6&63]+o[63&i]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,o,r){var i,s,a=8*r-o-1,c=(1<<a)-1,l=c>>1,p=-7,u=n?r-1:0,d=n?-1:1,f=t[e+u];for(u+=d,i=f&(1<<-p)-1,f>>=-p,p+=a;p>0;i=256*i+t[e+u],u+=d,p-=8);for(s=i&(1<<-p)-1,i>>=-p,p+=o;p>0;s=256*s+t[e+u],u+=d,p-=8);if(0===i)i=1-l;else{if(i===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,o),i-=l}return(f?-1:1)*s*Math.pow(2,i-o)},e.write=function(t,e,n,o,r,i){var s,a,c,l=8*i-r-1,p=(1<<l)-1,u=p>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=o?0:i-1,h=o?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=p):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+u>=1?d/c:d*Math.pow(2,1-u))*c>=2&&(s++,c/=2),s+u>=p?(a=0,s=p):s+u>=1?(a=(e*c-1)*Math.pow(2,r),s+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,r),s=0));r>=8;t[n+f]=255&a,f+=h,a/=256,r-=8);for(s=s<<r|a,l+=r;l>0;t[n+f]=255&s,f+=h,s/=256,l-=8);t[n+f-h]|=128*y}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";n.r(e);var o=n(0),r=n.n(o),i=(n(33),n(1)),s=n.n(i),a=n(6),c=n.n(a),l=n(2),p=n.n(l);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function h(t,e,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(i,t);var e,n,o,r=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=b(t);if(e){var r=b(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return m(this,n)}}(i);function i(){return d(this,i),r.apply(this,arguments)}return e=i,o=[{key:"value",value:function(){}}],(n=[{key:"insertInto",value:function(t,e){0===t.children.length?h(b(i.prototype),"insertInto",this).call(this,t,e):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}])&&f(e.prototype,n),o&&f(e,o),i}(r.a.Embed);g.blotName="break",g.tagName="BR";var v=g;function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t,e){return!e||"object"!==C(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=S(t);if(e){var r=S(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return x(this,n)}}(n);function n(){return T(this,n),e.apply(this,arguments)}return n}(r.a.Text);function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function A(t,e,n){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=j(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function I(t,e){return(I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t,e){return!e||"object"!==E(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}(s,t);var e,n,o,i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=j(t);if(e){var r=j(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return R(this,n)}}(s);function s(){return k(this,s),i.apply(this,arguments)}return e=s,o=[{key:"compare",value:function(t,e){var n=s.order.indexOf(t),o=s.order.indexOf(e);return n>=0||o>=0?n-o:t===e?0:t<e?-1:1}}],(n=[{key:"formatAt",value:function(t,e,n,o){if(s.compare(this.statics.blotName,n)<0&&r.a.query(n,r.a.Scope.BLOT)){var i=this.isolate(t,e);o&&i.wrap(n,o)}else A(j(s.prototype),"formatAt",this).call(this,t,e,n,o)}},{key:"optimize",value:function(t){if(A(j(s.prototype),"optimize",this).call(this,t),this.parent instanceof s&&s.compare(this.statics.blotName,this.parent.statics.blotName)>0){var e=this.parent.isolate(this.offset(),this.length());this.moveChildren(e),e.wrap(this)}}}])&&w(e.prototype,n),o&&w(e,o),s}(r.a.Inline);_.allowedChildren=[_,r.a.Embed,P],_.order=["cursor","inline","underline","strike","italic","bold","script","link","code"];var D=_;function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function L(t,e,n){return e&&B(t.prototype,e),n&&B(t,n),t}function H(t,e,n){return(H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=K(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function F(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function U(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=K(t);if(e){var r=K(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return z(this,n)}}function z(t,e){return!e||"object"!==N(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function K(t){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var V=function(t){F(n,t);var e=U(n);function n(){return M(this,n),e.apply(this,arguments)}return L(n,[{key:"attach",value:function(){H(K(n.prototype),"attach",this).call(this),this.attributes=new r.a.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new s.a).insert(this.value(),p()(this.formats(),this.attributes.values()))}},{key:"format",value:function(t,e){var n=r.a.query(t,r.a.Scope.BLOCK_ATTRIBUTE);null!=n&&this.attributes.attribute(n,e)}},{key:"formatAt",value:function(t,e,n,o){this.format(n,o)}},{key:"insertAt",value:function(t,e,o){if("string"==typeof e&&e.endsWith("\n")){var i=r.a.create(q.blotName);this.parent.insertBefore(i,0===t?this:this.next),i.insertAt(0,e.slice(0,-1))}else H(K(n.prototype),"insertAt",this).call(this,t,e,o)}}]),n}(r.a.Embed);V.scope=r.a.Scope.BLOCK_BLOT;var q=function(t){F(n,t);var e=U(n);function n(t){var o;return M(this,n),(o=e.call(this,t)).cache={},o}return L(n,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(r.a.Leaf).reduce((function(t,e){return 0===e.length()?t:t.insert(e.value(),W(e))}),new s.a).insert("\n",W(this))),this.cache.delta}},{key:"deleteAt",value:function(t,e){H(K(n.prototype),"deleteAt",this).call(this,t,e),this.cache={}}},{key:"formatAt",value:function(t,e,o,i){e<=0||(r.a.query(o,r.a.Scope.BLOCK)?t+e===this.length()&&this.format(o,i):H(K(n.prototype),"formatAt",this).call(this,t,Math.min(e,this.length()-t-1),o,i),this.cache={})}},{key:"insertAt",value:function(t,e,o){if(null!=o)return H(K(n.prototype),"insertAt",this).call(this,t,e,o);if(0!==e.length){var r=e.split("\n"),i=r.shift();i.length>0&&(t<this.length()-1||null==this.children.tail?H(K(n.prototype),"insertAt",this).call(this,Math.min(t,this.length()-1),i):this.children.tail.insertAt(this.children.tail.length(),i),this.cache={});var s=this;r.reduce((function(t,e){return(s=s.split(t,!0)).insertAt(0,e),e.length}),t+i.length)}}},{key:"insertBefore",value:function(t,e){var o=this.children.head;H(K(n.prototype),"insertBefore",this).call(this,t,e),o instanceof v&&o.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=H(K(n.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(t,e){H(K(n.prototype),"moveChildren",this).call(this,t,e),this.cache={}}},{key:"optimize",value:function(t){H(K(n.prototype),"optimize",this).call(this,t),this.cache={}}},{key:"path",value:function(t){return H(K(n.prototype),"path",this).call(this,t,!0)}},{key:"removeChild",value:function(t){H(K(n.prototype),"removeChild",this).call(this,t),this.cache={}}},{key:"split",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&(0===t||t>=this.length()-1)){var o=this.clone();return 0===t?(this.parent.insertBefore(o,this),this):(this.parent.insertBefore(o,this.next),o)}var r=H(K(n.prototype),"split",this).call(this,t,e);return this.cache={},r}}]),n}(r.a.Block);function W(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==t?e:("function"==typeof t.formats&&(e=p()(e,t.formats())),null==t.parent||"scroll"==t.parent.blotName||t.parent.statics.scope!==t.statics.scope?e:W(t.parent,e))}function G(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function Q(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function J(t,e,n){return(J="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nt(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function $(t){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=nt(t);if(e){var r=nt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return et(this,n)}}function et(t,e){return!e||"object"!==$(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function nt(t){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}q.blotName="block",q.tagName="P",q.defaultChild="break",q.allowedChildren=[D,r.a.Embed,P];var ot=function(t){Z(n,t);var e=tt(n);function n(){return X(this,n),e.apply(this,arguments)}return n}(D);ot.blotName="code",ot.tagName="CODE";var rt=function(t){Z(a,t);var e,n,o,i=tt(a);function a(){return X(this,a),i.apply(this,arguments)}return e=a,o=[{key:"create",value:function(t){var e=J(nt(a),"create",this).call(this,t);return e.setAttribute("spellcheck",!1),e}},{key:"formats",value:function(){return!0}}],(n=[{key:"delta",value:function(){var t=this,e=this.domNode.textContent;return e.endsWith("\n")&&(e=e.slice(0,-1)),e.split("\n").reduce((function(e,n){return e.insert(n).insert("\n",t.formats())}),new s.a)}},{key:"format",value:function(t,e){if(t!==this.statics.blotName||!e){var n=G(this.descendant(P,this.length()-1),1)[0];null!=n&&n.deleteAt(n.length()-1,1),J(nt(a.prototype),"format",this).call(this,t,e)}}},{key:"formatAt",value:function(t,e,n,o){if(0!==e&&null!=r.a.query(n,r.a.Scope.BLOCK)&&(n!==this.statics.blotName||o!==this.statics.formats(this.domNode))){var i=this.newlineIndex(t);if(!(i<0||i>=t+e)){var s=this.newlineIndex(t,!0)+1,c=i-s+1,l=this.isolate(s,c),p=l.next;l.format(n,o),p instanceof a&&p.formatAt(0,t-s+e-c,n,o)}}}},{key:"insertAt",value:function(t,e,n){if(null==n){var o=G(this.descendant(P,t),2),r=o[0],i=o[1];r.insertAt(i,e)}}},{key:"length",value:function(){var t=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?t:t+1}},{key:"newlineIndex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)return this.domNode.textContent.slice(0,t).lastIndexOf("\n");var n=this.domNode.textContent.slice(t).indexOf("\n");return n>-1?t+n:-1}},{key:"optimize",value:function(t){this.domNode.textContent.endsWith("\n")||this.appendChild(r.a.create("text","\n")),J(nt(a.prototype),"optimize",this).call(this,t);var e=this.next;null!=e&&e.prev===this&&e.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===e.statics.formats(e.domNode)&&(e.optimize(t),e.moveChildren(this),e.remove())}},{key:"replace",value:function(t){J(nt(a.prototype),"replace",this).call(this,t),[].slice.call(this.domNode.querySelectorAll("*")).forEach((function(t){var e=r.a.find(t);null==e?t.parentNode.removeChild(t):e instanceof r.a.Embed?e.remove():e.unwrap()}))}}])&&Q(e.prototype,n),o&&Q(e,o),a}(q);function it(t){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function st(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function at(t,e,n){return(at="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dt(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function ct(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function lt(t,e,n){return e&&ct(t.prototype,e),n&&ct(t,n),t}function pt(t,e){return(pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ut(t,e){return!e||"object"!==it(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dt(t){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}rt.blotName="code-block",rt.tagName="PRE",rt.TAB="  ";var ft=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pt(t,e)}(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=dt(t);if(e){var r=dt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return ut(this,n)}}(n);function n(t,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(r=e.call(this,t)).selection=o,r.textNode=document.createTextNode(n.CONTENTS),r.domNode.appendChild(r.textNode),r._length=0,r}return lt(n,null,[{key:"value",value:function(){}}]),lt(n,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(t,e){if(0!==this._length)return at(dt(n.prototype),"format",this).call(this,t,e);for(var o=this,i=0;null!=o&&o.statics.scope!==r.a.Scope.BLOCK_BLOT;)i+=o.offset(o.parent),o=o.parent;null!=o&&(this._length=n.CONTENTS.length,o.optimize(),o.formatAt(i,n.CONTENTS.length,t,e),this._length=0)}},{key:"index",value:function(t,e){return t===this.textNode?0:at(dt(n.prototype),"index",this).call(this,t,e)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){at(dt(n.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var t,e,o,i=this.textNode,s=this.selection.getNativeRange();if(null!=s&&s.start.node===i&&s.end.node===i){var a=[i,s.start.offset,s.end.offset];t=a[0],e=a[1],o=a[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==n.CONTENTS){var c=this.textNode.data.split(n.CONTENTS).join("");this.next instanceof P?(t=this.next.domNode,this.next.insertAt(0,c),this.textNode.data=n.CONTENTS):(this.textNode.data=c,this.parent.insertBefore(r.a.create(this.textNode),this),this.textNode=document.createTextNode(n.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=e){var l=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return st(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?st(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}([e,o].map((function(e){return Math.max(0,Math.min(t.data.length,e-1))})),2);return e=l[0],o=l[1],{startNode:t,startOffset:e,endNode:t,endOffset:o}}}}},{key:"update",value:function(t,e){var n=this;if(t.some((function(t){return"characterData"===t.type&&t.target===n.textNode}))){var o=this.restore();o&&(e.range=o)}}},{key:"value",value:function(){return""}}]),n}(r.a.Embed);ft.blotName="cursor",ft.className="ql-cursor",ft.tagName="span",ft.CONTENTS="\ufeff";var ht=ft,yt=n(4),mt=n.n(yt),bt=n(5),gt=n.n(bt);function vt(t){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ct(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Tt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function Ot(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var xt=/^[ -~]*$/;function St(t,e){return Object.keys(e).reduce((function(n,o){return null==t[o]||(e[o]===t[o]?n[o]=e[o]:Array.isArray(e[o])?e[o].indexOf(t[o])<0&&(n[o]=e[o].concat([t[o]])):n[o]=[e[o],t[o]]),n}),{})}var Pt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scroll=e,this.delta=this.getDelta()}var e,n;return e=t,(n=[{key:"applyDelta",value:function(t){var e=this,n=!1;this.scroll.update();var o=this.scroll.length();return this.scroll.batchStart(),(t=function(t){return t.reduce((function(t,e){if(1===e.insert){var n=mt()(e.attributes);return delete n.image,t.insert({image:e.attributes.image},n)}if(null==e.attributes||!0!==e.attributes.list&&!0!==e.attributes.bullet||((e=mt()(e)).attributes.list?e.attributes.list="ordered":(e.attributes.list="bullet",delete e.attributes.bullet)),"string"==typeof e.insert){var o=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return t.insert(o,e.attributes)}return t.push(e)}),new s.a)}(t)).reduce((function(t,i){var s=i.retain||i.delete||i.insert.length||1,a=i.attributes||{};if(null!=i.insert){if("string"==typeof i.insert){var l=i.insert;l.endsWith("\n")&&n&&(n=!1,l=l.slice(0,-1)),t>=o&&!l.endsWith("\n")&&(n=!0),e.scroll.insertAt(t,l);var u=Ct(e.scroll.line(t),2),d=u[0],f=u[1],h=p()({},W(d));if(d instanceof q){var y=Ct(d.descendant(r.a.Leaf,f),1)[0];h=p()(h,W(y))}a=c.a.attributes.diff(h,a)||{}}else if("object"===vt(i.insert)){var m=Object.keys(i.insert)[0];if(null==m)return t;e.scroll.insertAt(t,m,i.insert[m])}o+=s}return Object.keys(a).forEach((function(n){e.scroll.formatAt(t,s,n,a[n])})),t+s}),0),t.reduce((function(t,n){return"number"==typeof n.delete?(e.scroll.deleteAt(t,n.delete),t):t+(n.retain||n.insert.length||1)}),0),this.scroll.batchEnd(),this.update(t)}},{key:"deleteText",value:function(t,e){return this.scroll.deleteAt(t,e),this.update((new s.a).retain(t).delete(e))}},{key:"formatLine",value:function(t,e){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(o).forEach((function(r){if(null==n.scroll.whitelist||n.scroll.whitelist[r]){var i=n.scroll.lines(t,Math.max(e,1)),s=e;i.forEach((function(e){var i=e.length();if(e instanceof rt){var a=t-e.offset(n.scroll),c=e.newlineIndex(a+s)-a+1;e.formatAt(a,c,r,o[r])}else e.format(r,o[r]);s-=i}))}})),this.scroll.optimize(),this.update((new s.a).retain(t).retain(e,mt()(o)))}},{key:"formatText",value:function(t,e){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(o).forEach((function(r){n.scroll.formatAt(t,e,r,o[r])})),this.update((new s.a).retain(t).retain(e,mt()(o)))}},{key:"getContents",value:function(t,e){return this.delta.slice(t,t+e)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce((function(t,e){return t.concat(e.delta())}),new s.a)}},{key:"getFormat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],o=[];0===e?this.scroll.path(t).forEach((function(t){var e=Ct(t,1)[0];e instanceof q?n.push(e):e instanceof r.a.Leaf&&o.push(e)})):(n=this.scroll.lines(t,e),o=this.scroll.descendants(r.a.Leaf,t,e));var i=[n,o].map((function(t){if(0===t.length)return{};for(var e=W(t.shift());Object.keys(e).length>0;){var n=t.shift();if(null==n)return e;e=St(W(n),e)}return e}));return p.a.apply(p.a,i)}},{key:"getText",value:function(t,e){return this.getContents(t,e).filter((function(t){return"string"==typeof t.insert})).map((function(t){return t.insert})).join("")}},{key:"insertEmbed",value:function(t,e,n){return this.scroll.insertAt(t,e,n),this.update((new s.a).retain(t).insert(function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},e,n)))}},{key:"insertText",value:function(t,e){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(t,e),Object.keys(o).forEach((function(r){n.scroll.formatAt(t,e.length,r,o[r])})),this.update((new s.a).retain(t).insert(e,mt()(o)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var t=this.scroll.children.head;return t.statics.blotName===q.blotName&&!(t.children.length>1)&&t.children.head instanceof v}},{key:"removeFormat",value:function(t,e){var n=this.getText(t,e),o=Ct(this.scroll.line(t+e),2),r=o[0],i=o[1],a=0,c=new s.a;null!=r&&(a=r instanceof rt?r.newlineIndex(i)-i+1:r.length()-i,c=r.delta().slice(i,i+a-1).insert("\n"));var l=this.getContents(t,e+a).diff((new s.a).insert(n).concat(c)),p=(new s.a).retain(t).concat(l);return this.applyDelta(p)}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=this.delta;if(1===e.length&&"characterData"===e[0].type&&e[0].target.data.match(xt)&&r.a.find(e[0].target)){var i=r.a.find(e[0].target),a=W(i),c=i.offset(this.scroll),l=e[0].oldValue.replace(ht.CONTENTS,""),p=(new s.a).insert(l),u=(new s.a).insert(i.value()),d=(new s.a).retain(c).concat(p.diff(u,n));t=d.reduce((function(t,e){return e.insert?t.insert(e.insert,a):t.push(e)}),new s.a),this.delta=o.compose(t)}else this.delta=this.getDelta(),t&&gt()(o.compose(t),this.delta)||(t=o.diff(this.delta,n));return t}}])&&Ot(e.prototype,n),t}(),Et=n(26),kt=n.n(Et),wt=["error","warn","log","info"],At="warn";function It(t){if(wt.indexOf(t)<=wt.indexOf(At)){for(var e,n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];(e=console)[t].apply(e,o)}}function Rt(t){return wt.reduce((function(e,n){return e[n]=It.bind(console,n,t),e}),{})}It.level=Rt.level=function(t){At=t};var jt=Rt;function _t(t){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Nt(t,e,n){return(Nt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Lt(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Mt(t,e){return(Mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bt(t,e){return!e||"object"!==_t(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Lt(t){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ht=jt("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((function(t){document.addEventListener(t,(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];[].slice.call(document.querySelectorAll(".ql-container")).forEach((function(t){var n;t.__quill&&t.__quill.emitter&&(n=t.__quill.emitter).handleDOM.apply(n,e)}))}))}));var Ft=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mt(t,e)}(r,t);var e,n,o=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Lt(t);if(e){var r=Lt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Bt(this,n)}}(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this)).listeners={},t.on("error",Ht.error),t}return e=r,(n=[{key:"emit",value:function(){Ht.log.apply(Ht,arguments),Nt(Lt(r.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];(this.listeners[t.type]||[]).forEach((function(e){var o=e.node,r=e.handler;(t.target===o||o.contains(t.target))&&r.apply(void 0,[t].concat(n))}))}},{key:"listenDOM",value:function(t,e,n){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({node:e,handler:n})}}])&&Dt(e.prototype,n),r}(kt.a);Ft.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},Ft.sources={API:"api",SILENT:"silent",USER:"user"};var Ut=Ft;function zt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Kt=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};zt(this,t),this.quill=e,this.options=n};Kt.DEFAULTS={};var Vt=Kt;function qt(t){return function(t){if(Array.isArray(t))return Yt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Gt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}}(t,e)||Gt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(t,e){if(t){if("string"==typeof t)return Yt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yt(t,e):void 0}}function Yt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function Qt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Jt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var $t=jt("quill:selection"),Xt=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Jt(this,t),this.index=e,this.length=n},Zt=function(){function t(e,n){var o=this;Jt(this,t),this.emitter=n,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=r.a.create("cursor",this),this.lastRange=this.savedRange=new Xt(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(function(){o.mouseDown||setTimeout(o.update.bind(o,Ut.sources.USER),1)})),this.emitter.on(Ut.events.EDITOR_CHANGE,(function(t,e){t===Ut.events.TEXT_CHANGE&&e.length()>0&&o.update(Ut.sources.SILENT)})),this.emitter.on(Ut.events.SCROLL_BEFORE_UPDATE,(function(){if(o.hasFocus()){var t=o.getNativeRange();null!=t&&t.start.node!==o.cursor.textNode&&o.emitter.once(Ut.events.SCROLL_UPDATE,(function(){try{o.setNativeRange(t.start.node,t.start.offset,t.end.node,t.end.offset)}catch(t){}}))}})),this.emitter.on(Ut.events.SCROLL_OPTIMIZE,(function(t,e){if(e.range){var n=e.range,r=n.startNode,i=n.startOffset,s=n.endNode,a=n.endOffset;o.setNativeRange(r,i,s,a)}})),this.update(Ut.sources.SILENT)}var e,n;return e=t,(n=[{key:"handleComposition",value:function(){var t=this;this.root.addEventListener("compositionstart",(function(){t.composing=!0})),this.root.addEventListener("compositionend",(function(){if(t.composing=!1,t.cursor.parent){var e=t.cursor.restore();if(!e)return;setTimeout((function(){t.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)}),1)}}))}},{key:"handleDragging",value:function(){var t=this;this.emitter.listenDOM("mousedown",document.body,(function(){t.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(function(){t.mouseDown=!1,t.update(Ut.sources.USER)}))}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(t,e){if(null==this.scroll.whitelist||this.scroll.whitelist[t]){this.scroll.update();var n=this.getNativeRange();if(null!=n&&n.native.collapsed&&!r.a.query(t,r.a.Scope.BLOCK)){if(n.start.node!==this.cursor.textNode){var o=r.a.find(n.start.node,!1);if(null==o)return;if(o instanceof r.a.Leaf){var i=o.split(n.start.offset);o.parent.insertBefore(this.cursor,i)}else o.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.scroll.length();t=Math.min(t,n-1),e=Math.min(t+e,n-1)-t;var o,r=this.scroll.leaf(t),i=Wt(r,2),s=i[0],a=i[1];if(null==s)return null;var c=s.position(a,!0),l=Wt(c,2);o=l[0],a=l[1];var p=document.createRange();if(e>0){p.setStart(o,a);var u=this.scroll.leaf(t+e),d=Wt(u,2);if(s=d[0],a=d[1],null==s)return null;var f=s.position(a,!0),h=Wt(f,2);return o=h[0],a=h[1],p.setEnd(o,a),p.getBoundingClientRect()}var y,m="left";return o instanceof Text?(a<o.data.length?(p.setStart(o,a),p.setEnd(o,a+1)):(p.setStart(o,a-1),p.setEnd(o,a),m="right"),y=p.getBoundingClientRect()):(y=s.domNode.getBoundingClientRect(),a>0&&(m="right")),{bottom:y.top+y.height,height:y.height,left:y[m],right:y[m],top:y.top,width:0}}},{key:"getNativeRange",value:function(){var t=document.getSelection();if(null==t||t.rangeCount<=0)return null;var e=t.getRangeAt(0);if(null==e)return null;var n=this.normalizeNative(e);return $t.info("getNativeRange",n),n}},{key:"getRange",value:function(){var t=this.getNativeRange();return null==t?[null,null]:[this.normalizedToRange(t),t]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(t){var e=this,n=[[t.start.node,t.start.offset]];t.native.collapsed||n.push([t.end.node,t.end.offset]);var o=n.map((function(t){var n=Wt(t,2),o=n[0],i=n[1],s=r.a.find(o,!0),a=s.offset(e.scroll);return 0===i?a:s instanceof r.a.Container?a+s.length():a+s.index(o,i)})),i=Math.min(Math.max.apply(Math,qt(o)),this.scroll.length()-1),s=Math.min.apply(Math,[i].concat(qt(o)));return new Xt(s,i-s)}},{key:"normalizeNative",value:function(t){if(!te(this.root,t.startContainer)||!t.collapsed&&!te(this.root,t.endContainer))return null;var e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach((function(t){for(var e=t.node,n=t.offset;!(e instanceof Text)&&e.childNodes.length>0;)if(e.childNodes.length>n)e=e.childNodes[n],n=0;else{if(e.childNodes.length!==n)break;n=(e=e.lastChild)instanceof Text?e.data.length:e.childNodes.length+1}t.node=e,t.offset=n})),e}},{key:"rangeToNative",value:function(t){var e=this,n=t.collapsed?[t.index]:[t.index,t.index+t.length],o=[],r=this.scroll.length();return n.forEach((function(t,n){t=Math.min(r-1,t);var i,s=Wt(e.scroll.leaf(t),2),a=s[0],c=s[1],l=Wt(a.position(c,0!==n),2);i=l[0],c=l[1],o.push(i,c)})),o.length<2&&(o=o.concat(o)),o}},{key:"scrollIntoView",value:function(t){var e=this.lastRange;if(null!=e){var n=this.getBounds(e.index,e.length);if(null!=n){var o=this.scroll.length()-1,r=Wt(this.scroll.line(Math.min(e.index,o)),1)[0],i=r;if(e.length>0&&(i=Wt(this.scroll.line(Math.min(e.index+e.length,o)),1)[0]),null!=r&&null!=i){var s=t.getBoundingClientRect();n.top<s.top?t.scrollTop-=s.top-n.top:n.bottom>s.bottom&&(t.scrollTop+=n.bottom-s.bottom)}}}}},{key:"setNativeRange",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if($t.info("setNativeRange",t,e,n,o),null==t||null!=this.root.parentNode&&null!=t.parentNode&&null!=n.parentNode){var i=document.getSelection();if(null!=i)if(null!=t){this.hasFocus()||this.root.focus();var s=(this.getNativeRange()||{}).native;if(null==s||r||t!==s.startContainer||e!==s.startOffset||n!==s.endContainer||o!==s.endOffset){"BR"==t.tagName&&(e=[].indexOf.call(t.parentNode.childNodes,t),t=t.parentNode),"BR"==n.tagName&&(o=[].indexOf.call(n.parentNode.childNodes,n),n=n.parentNode);var a=document.createRange();a.setStart(t,e),a.setEnd(n,o),i.removeAllRanges(),i.addRange(a)}}else i.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ut.sources.API;if("string"==typeof e&&(n=e,e=!1),$t.info("setRange",t),null!=t){var o=this.rangeToNative(t);this.setNativeRange.apply(this,qt(o).concat([e]))}else this.setNativeRange(null);this.update(n)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut.sources.USER,e=this.lastRange,n=this.getRange(),o=Wt(n,2),r=o[0],i=o[1];if(this.lastRange=r,null!=this.lastRange&&(this.savedRange=this.lastRange),!gt()(e,this.lastRange)){var s;!this.composing&&null!=i&&i.native.collapsed&&i.start.node!==this.cursor.textNode&&this.cursor.restore();var a,c=[Ut.events.SELECTION_CHANGE,mt()(this.lastRange),mt()(e),t];(s=this.emitter).emit.apply(s,[Ut.events.EDITOR_CHANGE].concat(c)),t!==Ut.sources.SILENT&&(a=this.emitter).emit.apply(a,c)}}}])&&Qt(e.prototype,n),t}();function te(t,e){try{e.parentNode}catch(t){return!1}return e instanceof Text&&(e=e.parentNode),t.contains(e)}function ee(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var ne=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.quill=e,this.options=n,this.modules={}}var e,n;return e=t,(n=[{key:"init",value:function(){var t=this;Object.keys(this.options.modules).forEach((function(e){null==t.modules[e]&&t.addModule(e)}))}},{key:"addModule",value:function(t){var e=this.quill.constructor.import("modules/".concat(t));return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}}])&&ee(e.prototype,n),t}();ne.DEFAULTS={modules:{}},ne.themes={default:ne};var oe=ne;function re(t){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ie(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function se(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ae(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function ce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function le(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function pe(t,e,n){return e&&le(t.prototype,e),n&&le(t,n),t}var ue=jt("quill"),de=function(){function t(e){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(ce(this,t),this.options=fe(e,o),this.container=this.options.container,null==this.container)return ue.error("Invalid Quill container",e);this.options.debug&&t.debug(this.options.debug);var i=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new Ut,this.scroll=r.a.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new Pt(this.scroll),this.selection=new Zt(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(Ut.events.EDITOR_CHANGE,(function(t){t===Ut.events.TEXT_CHANGE&&n.root.classList.toggle("ql-blank",n.editor.isBlank())})),this.emitter.on(Ut.events.SCROLL_UPDATE,(function(t,e){var o=n.selection.lastRange,r=o&&0===o.length?o.index:void 0;he.call(n,(function(){return n.editor.update(null,e,r)}),t)}));var s=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">".concat(i,"<p><br></p></div>"));this.setContents(s),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return pe(t,null,[{key:"debug",value:function(t){!0===t&&(t="log"),jt.level(t)}},{key:"find",value:function(t){return t.__quill||r.a.find(t)}},{key:"import",value:function(t){return null==this.imports[t]&&ue.error("Cannot import ".concat(t,". Are you sure it was registered?")),this.imports[t]}},{key:"register",value:function(t,e){var n=this,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof t){var i=t.attrName||t.blotName;"string"==typeof i?this.register("formats/"+i,t,e):Object.keys(t).forEach((function(o){n.register(o,t[o],e)}))}else null==this.imports[t]||o||ue.warn("Overwriting ".concat(t," with"),e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&"abstract"!==e.blotName?r.a.register(e):t.startsWith("modules")&&"function"==typeof e.register&&e.register()}}]),pe(t,[{key:"addContainer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof t){var n=t;(t=document.createElement("div")).classList.add(n)}return this.container.insertBefore(t,e),t}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(t,e,n){var o=this,r=se(ye(t,e,n),4);return t=r[0],e=r[1],n=r[3],he.call(this,(function(){return o.editor.deleteText(t,e)}),n,t,-1*e)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}},{key:"focus",value:function(){var t=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=t,this.scrollIntoView()}},{key:"format",value:function(t,e){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ut.sources.API;return he.call(this,(function(){var o=n.getSelection(!0),i=new s.a;if(null==o)return i;if(r.a.query(t,r.a.Scope.BLOCK))i=n.editor.formatLine(o.index,o.length,ie({},t,e));else{if(0===o.length)return n.selection.format(t,e),i;i=n.editor.formatText(o.index,o.length,ie({},t,e))}return n.setSelection(o,Ut.sources.SILENT),i}),o)}},{key:"formatLine",value:function(t,e,n,o,r){var i,s=this,a=se(ye(t,e,n,o,r),4);return t=a[0],e=a[1],i=a[2],r=a[3],he.call(this,(function(){return s.editor.formatLine(t,e,i)}),r,t,0)}},{key:"formatText",value:function(t,e,n,o,r){var i,s=this,a=se(ye(t,e,n,o,r),4);return t=a[0],e=a[1],i=a[2],r=a[3],he.call(this,(function(){return s.editor.formatText(t,e,i)}),r,t,0)}},{key:"getBounds",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e="number"==typeof t?this.selection.getBounds(t,n):this.selection.getBounds(t.index,t.length);var o=this.container.getBoundingClientRect();return{bottom:e.bottom-o.top,height:e.height,left:e.left-o.left,right:e.right-o.left,top:e.top-o.top,width:e.width}}},{key:"getContents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,n=ye(t,e),o=se(n,2);return t=o[0],e=o[1],this.editor.getContents(t,e)}},{key:"getFormat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof t?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}},{key:"getIndex",value:function(t){return t.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(t){return this.scroll.leaf(t)}},{key:"getLine",value:function(t){return this.scroll.line(t)}},{key:"getLines",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof t?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}},{key:"getModule",value:function(t){return this.theme.modules[t]}},{key:"getSelection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,n=ye(t,e),o=se(n,2);return t=o[0],e=o[1],this.editor.getText(t,e)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(e,n,o){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.sources.API;return he.call(this,(function(){return r.editor.insertEmbed(e,n,o)}),i,e)}},{key:"insertText",value:function(t,e,n,o,r){var i,s=this,a=se(ye(t,0,n,o,r),4);return t=a[0],i=a[2],r=a[3],he.call(this,(function(){return s.editor.insertText(t,e,i)}),r,t,e.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(t,e,n){this.clipboard.dangerouslyPasteHTML(t,e,n)}},{key:"removeFormat",value:function(t,e,n){var o=this,r=se(ye(t,e,n),4);return t=r[0],e=r[1],n=r[3],he.call(this,(function(){return o.editor.removeFormat(t,e)}),n,t)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ut.sources.API;return he.call(this,(function(){t=new s.a(t);var n=e.getLength(),o=e.editor.deleteText(0,n),r=e.editor.applyDelta(t),i=r.ops[r.ops.length-1];return null!=i&&"string"==typeof i.insert&&"\n"===i.insert[i.insert.length-1]&&(e.editor.deleteText(e.getLength()-1,1),r.delete(1)),o.compose(r)}),n)}},{key:"setSelection",value:function(e,n,o){if(null==e)this.selection.setRange(null,n||t.sources.API);else{var r=se(ye(e,n,o),4);e=r[0],n=r[1],o=r[3],this.selection.setRange(new Xt(e,n),o),o!==Ut.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ut.sources.API,n=(new s.a).insert(t);return this.setContents(n,e)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut.sources.USER,e=this.scroll.update(t);return this.selection.update(t),e}},{key:"updateContents",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ut.sources.API;return he.call(this,(function(){return t=new s.a(t),e.editor.applyDelta(t,n)}),n,!0)}}]),t}();function fe(t,e){if((e=p()(!0,{container:t,modules:{clipboard:!0,keyboard:!0,history:!0}},e)).theme&&e.theme!==de.DEFAULTS.theme){if(e.theme=de.import("themes/".concat(e.theme)),null==e.theme)throw new Error("Invalid theme ".concat(e.theme,". Did you register it?"))}else e.theme=oe;var n=p()(!0,{},e.theme.DEFAULTS);[n,e].forEach((function(t){t.modules=t.modules||{},Object.keys(t.modules).forEach((function(e){!0===t.modules[e]&&(t.modules[e]={})}))}));var o=Object.keys(n.modules).concat(Object.keys(e.modules)).reduce((function(t,e){var n=de.import("modules/".concat(e));return null==n?ue.error("Cannot load ".concat(e," module. Are you sure you registered it?")):t[e]=n.DEFAULTS||{},t}),{});return null!=e.modules&&e.modules.toolbar&&e.modules.toolbar.constructor!==Object&&(e.modules.toolbar={container:e.modules.toolbar}),e=p()(!0,{},de.DEFAULTS,{modules:o},n,e),["bounds","container","scrollingContainer"].forEach((function(t){"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))})),e.modules=Object.keys(e.modules).reduce((function(t,n){return e.modules[n]&&(t[n]=e.modules[n]),t}),{}),e}function he(t,e,n,o){if(this.options.strict&&!this.isEnabled()&&e===Ut.sources.USER)return new s.a;var r=null==n?null:this.getSelection(),i=this.editor.delta,a=t();if(null!=r&&(!0===n&&(n=r.index),null==o?r=me(r,a,e):0!==o&&(r=me(r,n,o,e)),this.setSelection(r,Ut.sources.SILENT)),a.length()>0){var c,l,p=[Ut.events.TEXT_CHANGE,a,i,e];(c=this.emitter).emit.apply(c,[Ut.events.EDITOR_CHANGE].concat(p)),e!==Ut.sources.SILENT&&(l=this.emitter).emit.apply(l,p)}return a}function ye(t,e,n,o,r){var i={};return"number"==typeof t.index&&"number"==typeof t.length?"number"!=typeof e?(r=o,o=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):"number"!=typeof e&&(r=o,o=n,n=e,e=0),"object"===re(n)?(i=n,r=o):"string"==typeof n&&(null!=o?i[n]=o:r=n),[t,e,i,r=r||Ut.sources.API]}function me(t,e,n,o){if(null==t)return null;var r,i;if(e instanceof s.a){var a=se([t.index,t.index+t.length].map((function(t){return e.transformPosition(t,o!==Ut.sources.USER)})),2);r=a[0],i=a[1]}else{var c=se([t.index,t.index+t.length].map((function(t){return t<e||t===e&&o===Ut.sources.USER?t:n>=0?t+n:Math.max(e,t+n)})),2);r=c[0],i=c[1]}return new Xt(r,i-r)}function be(t){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ve(t,e){return(ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ce(t,e){return!e||"object"!==be(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Te(t){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}de.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},de.events=Ut.events,de.sources=Ut.sources,de.version="undefined"==typeof QUILL_VERSION?"dev":QUILL_VERSION,de.imports={delta:s.a,parchment:r.a,"core/module":Vt,"core/theme":oe};var Oe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ve(t,e)}(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Te(t);if(e){var r=Te(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Ce(this,n)}}(n);function n(){return ge(this,n),e.apply(this,arguments)}return n}(r.a.Container);Oe.allowedChildren=[q,V,Oe];var xe=Oe;function Se(t){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pe(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ee(t,e,n){return(Ee="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ae(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function ke(t,e){return(ke=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function we(t,e){return!e||"object"!==Se(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ae(t){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ie=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ke(t,e)}(i,t);var e,n,o=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Ae(t);if(e){var r=Ae(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return we(this,n)}}(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).contentNode=document.createElement("span"),e.contentNode.setAttribute("contenteditable",!1),[].slice.call(e.domNode.childNodes).forEach((function(t){e.contentNode.appendChild(t)})),e.leftGuard=document.createTextNode("\ufeff"),e.rightGuard=document.createTextNode("\ufeff"),e.domNode.appendChild(e.leftGuard),e.domNode.appendChild(e.contentNode),e.domNode.appendChild(e.rightGuard),e}return e=i,(n=[{key:"index",value:function(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:Ee(Ae(i.prototype),"index",this).call(this,t,e)}},{key:"restore",value:function(t){var e,n,o=t.data.split("\ufeff").join("");if(t===this.leftGuard)if(this.prev instanceof P){var i=this.prev.length();this.prev.insertAt(i,o),e={startNode:this.prev.domNode,startOffset:i+o.length}}else n=document.createTextNode(o),this.parent.insertBefore(r.a.create(n),this),e={startNode:n,startOffset:o.length};else t===this.rightGuard&&(this.next instanceof P?(this.next.insertAt(0,o),e={startNode:this.next.domNode,startOffset:o.length}):(n=document.createTextNode(o),this.parent.insertBefore(r.a.create(n),this.next),e={startNode:n,startOffset:o.length}));return t.data="\ufeff",e}},{key:"update",value:function(t,e){var n=this;t.forEach((function(t){if("characterData"===t.type&&(t.target===n.leftGuard||t.target===n.rightGuard)){var o=n.restore(t.target);o&&(e.range=o)}}))}}])&&Pe(e.prototype,n),i}(r.a.Embed);function Re(t){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function je(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return _e(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_e(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function De(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ne(t,e,n){return(Ne="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Le(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Me(t,e){return(Me=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Be(t,e){return!e||"object"!==Re(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Le(t){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function He(t){return t instanceof q||t instanceof V}var Fe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Me(t,e)}(i,t);var e,n,o=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Le(t);if(e){var r=Le(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Be(this,n)}}(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t)).emitter=e.emitter,Array.isArray(e.whitelist)&&(n.whitelist=e.whitelist.reduce((function(t,e){return t[e]=!0,t}),{})),n.domNode.addEventListener("DOMNodeInserted",(function(){})),n.optimize(),n.enable(),n}return e=i,(n=[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(t,e){var n=je(this.line(t),2),o=n[0],r=n[1],s=je(this.line(t+e),1)[0];if(Ne(Le(i.prototype),"deleteAt",this).call(this,t,e),null!=s&&o!==s&&r>0){if(o instanceof V||s instanceof V)return void this.optimize();if(o instanceof rt){var a=o.newlineIndex(o.length(),!0);if(a>-1&&(o=o.split(a+1))===s)return void this.optimize()}else if(s instanceof rt){var c=s.newlineIndex(0);c>-1&&s.split(c+1)}var l=s.children.head instanceof v?null:s.children.head;o.moveChildren(s,l),o.remove()}this.optimize()}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",t)}},{key:"formatAt",value:function(t,e,n,o){(null==this.whitelist||this.whitelist[n])&&(Ne(Le(i.prototype),"formatAt",this).call(this,t,e,n,o),this.optimize())}},{key:"insertAt",value:function(t,e,n){if(null==n||null==this.whitelist||this.whitelist[e]){if(t>=this.length())if(null==n||null==r.a.query(e,r.a.Scope.BLOCK)){var o=r.a.create(this.statics.defaultChild);this.appendChild(o),null==n&&e.endsWith("\n")&&(e=e.slice(0,-1)),o.insertAt(0,e,n)}else{var s=r.a.create(e,n);this.appendChild(s)}else Ne(Le(i.prototype),"insertAt",this).call(this,t,e,n);this.optimize()}}},{key:"insertBefore",value:function(t,e){if(t.statics.scope===r.a.Scope.INLINE_BLOT){var n=r.a.create(this.statics.defaultChild);n.appendChild(t),t=n}Ne(Le(i.prototype),"insertBefore",this).call(this,t,e)}},{key:"leaf",value:function(t){return this.path(t).pop()||[null,-1]}},{key:"line",value:function(t){return t===this.length()?this.line(t-1):this.descendant(He,t)}},{key:"lines",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,n=function t(e,n,o){var i=[],s=o;return e.children.forEachAt(n,o,(function(e,n,o){He(e)?i.push(e):e instanceof r.a.Container&&(i=i.concat(t(e,n,s))),s-=o})),i};return n(this,t,e)}},{key:"optimize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(Ne(Le(i.prototype),"optimize",this).call(this,t,e),t.length>0&&this.emitter.emit(Ut.events.SCROLL_OPTIMIZE,t,e))}},{key:"path",value:function(t){return Ne(Le(i.prototype),"path",this).call(this,t).slice(1)}},{key:"update",value:function(t){if(!0!==this.batch){var e=Ut.sources.USER;"string"==typeof t&&(e=t),Array.isArray(t)||(t=this.observer.takeRecords()),t.length>0&&this.emitter.emit(Ut.events.SCROLL_BEFORE_UPDATE,e,t),Ne(Le(i.prototype),"update",this).call(this,t.concat([])),t.length>0&&this.emitter.emit(Ut.events.SCROLL_UPDATE,e,t)}}}])&&De(e.prototype,n),i}(r.a.Scroll);Fe.blotName="scroll",Fe.className="ql-editor",Fe.tagName="DIV",Fe.defaultChild="block",Fe.allowedChildren=[q,V,xe];var Ue=Fe;function ze(t){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ve(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function qe(t,e,n){return(qe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ye(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function We(t,e){return(We=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ge(t,e){return!e||"object"!==ze(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ye(t){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Qe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&We(t,e)}(r,t);var e,n,o=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Ye(t);if(e){var r=Ye(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Ge(this,n)}}(r);function r(){return Ke(this,r),o.apply(this,arguments)}return e=r,(n=[{key:"value",value:function(t){var e=qe(Ye(r.prototype),"value",this).call(this,t);return e.startsWith("rgb(")?"#"+(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map((function(t){return("00"+parseInt(t).toString(16)).slice(-2)})).join(""):e}}])&&Ve(e.prototype,n),r}(r.a.Attributor.Style),Je=(new r.a.Attributor.Class("color","ql-color",{scope:r.a.Scope.INLINE}),new Qe("color","color",{scope:r.a.Scope.INLINE})),$e=(new r.a.Attributor.Class("background","ql-bg",{scope:r.a.Scope.INLINE}),new Qe("background","background-color",{scope:r.a.Scope.INLINE}));function Xe(t){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function en(t,e,n){return(en="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rn(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function nn(t,e){return(nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function on(t,e){return!e||"object"!==Xe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rn(t){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var sn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nn(t,e)}(i,t);var e,n,o,r=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=rn(t);if(e){var r=rn(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return on(this,n)}}(i);function i(){return Ze(this,i),r.apply(this,arguments)}return e=i,o=[{key:"create",value:function(){return en(rn(i),"create",this).call(this)}},{key:"formats",value:function(){return!0}}],(n=[{key:"optimize",value:function(t){en(rn(i.prototype),"optimize",this).call(this,t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}])&&tn(e.prototype,n),o&&tn(e,o),i}(D);sn.blotName="bold",sn.tagName=["STRONG","B"];var an=sn;function cn(t){return(cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ln(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function un(t,e,n){return(un="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hn(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function dn(t,e){return(dn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fn(t,e){return!e||"object"!==cn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hn(t){return(hn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yn={scope:r.a.Scope.INLINE,whitelist:["serif","monospace"]},mn=(new r.a.Attributor.Class("font","ql-font",yn),new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dn(t,e)}(r,t);var e,n,o=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=hn(t);if(e){var r=hn(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return fn(this,n)}}(r);function r(){return ln(this,r),o.apply(this,arguments)}return e=r,(n=[{key:"value",value:function(t){return un(hn(r.prototype),"value",this).call(this,t).replace(/["']/g,"")}}])&&pn(e.prototype,n),r}(r.a.Attributor.Style))("font","font-family",yn));function bn(t){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vn(t,e){return(vn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Cn(t,e){return!e||"object"!==bn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Tn(t){return(Tn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var On=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vn(t,e)}(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Tn(t);if(e){var r=Tn(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Cn(this,n)}}(n);function n(){return gn(this,n),e.apply(this,arguments)}return n}(an);On.blotName="italic",On.tagName=["EM","I"];var xn=On;function Sn(t){return(Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function En(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function kn(t,e,n){return(kn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=In(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function wn(t,e){return(wn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function An(t,e){return!e||"object"!==Sn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function In(t){return(In=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Rn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wn(t,e)}(i,t);var e,n,o,r=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=In(t);if(e){var r=In(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return An(this,n)}}(i);function i(){return Pn(this,i),r.apply(this,arguments)}return e=i,o=[{key:"create",value:function(t){var e=kn(In(i),"create",this).call(this,t);return t=this.sanitize(t),e.setAttribute("href",t),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}},{key:"formats",value:function(t){return t.getAttribute("href")}},{key:"sanitize",value:function(t){return function(t,e){var n=document.createElement("a");n.href=t;var o=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(o)>-1}(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}}],(n=[{key:"format",value:function(t,e){if(t!==this.statics.blotName||!e)return kn(In(i.prototype),"format",this).call(this,t,e);e=this.constructor.sanitize(e),this.domNode.setAttribute("href",e)}}])&&En(e.prototype,n),o&&En(e,o),i}(D);function jn(t){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Nn(t,e,n){return(Nn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ln(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Mn(t,e){return(Mn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bn(t,e){return!e||"object"!==jn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ln(t){return(Ln=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Rn.blotName="link",Rn.tagName="A",Rn.SANITIZED_URL="about:blank",Rn.PROTOCOL_WHITELIST=["http","https","mailto","tel"];var Hn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mn(t,e)}(r,t);var e,n,o=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Ln(t);if(e){var r=Ln(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Bn(this,n)}}(r);function r(){return _n(this,r),o.apply(this,arguments)}return e=r,(n=[{key:"create",value:function(t){return"super"===t?document.createElement("sup"):"sub"===t?document.createElement("sub"):Nn(Ln(r),"create",this).call(this,t)}},{key:"formats",value:function(t){return"SUB"===t.tagName?"sub":"SUP"===t.tagName?"super":void 0}}])&&Dn(e,n),r}(D);Hn.blotName="script",Hn.tagName=["SUB","SUP"];var Fn=Hn,Un=(new r.a.Attributor.Class("size","ql-size",{scope:r.a.Scope.INLINE,whitelist:["small","large","huge"]}),new r.a.Attributor.Style("size","font-size",{scope:r.a.Scope.INLINE,whitelist:["10px","18px","32px"]}));function zn(t){return(zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vn(t,e){return(Vn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qn(t,e){return!e||"object"!==zn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wn(t){return(Wn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Gn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vn(t,e)}(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Wn(t);if(e){var r=Wn(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return qn(this,n)}}(n);function n(){return Kn(this,n),e.apply(this,arguments)}return n}(D);Gn.blotName="strike",Gn.tagName="S";var Yn=Gn;function Qn(t){return(Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $n(t,e){return($n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xn(t,e){return!e||"object"!==Qn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zn(t){return(Zn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var to=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$n(t,e)}(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Zn(t);if(e){var r=Zn(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Xn(this,n)}}(n);function n(){return Jn(this,n),e.apply(this,arguments)}return n}(D);to.blotName="underline",to.tagName="U";var eo=to,no={scope:r.a.Scope.BLOCK,whitelist:["right","center","justify"]},oo=new r.a.Attributor.Attribute("align","align",no),ro=(new r.a.Attributor.Class("align","ql-align",no),new r.a.Attributor.Style("align","text-align",no)),io={scope:r.a.Scope.BLOCK,whitelist:["rtl"]},so=new r.a.Attributor.Attribute("direction","dir",io),ao=(new r.a.Attributor.Class("direction","ql-direction",io),new r.a.Attributor.Style("direction","direction",io));function co(t){return(co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function po(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return uo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uo(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function fo(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ho(t,e){return(ho=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yo(t,e){return!e||"object"!==co(e)&&"function"!=typeof e?mo(t):e}function mo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bo(t){return(bo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var go=jt("quill:clipboard"),vo="__ql-matcher",Co=[[Node.TEXT_NODE,function(t,e){var n=t.data;if("O:P"===t.parentNode.tagName)return e.insert(n.trim());if(0===n.trim().length&&t.parentNode.classList.contains("ql-clipboard"))return e;if(!Po(t.parentNode).whiteSpace.startsWith("pre")){var o=function(t,e){return(e=e.replace(/[^\u00a0]/g,"")).length<1&&t?" ":e};n=(n=n.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,o.bind(o,!0)),(null==t.previousSibling&&ko(t.parentNode)||null!=t.previousSibling&&ko(t.previousSibling))&&(n=n.replace(/^\s+/,o.bind(o,!1))),(null==t.nextSibling&&ko(t.parentNode)||null!=t.nextSibling&&ko(t.nextSibling))&&(n=n.replace(/\s+$/,o.bind(o,!1)))}return e.insert(n)}],[Node.TEXT_NODE,Ao],["br",function(t,e){return Eo(e,"\n")||e.insert("\n"),e}],[Node.ELEMENT_NODE,Ao],[Node.ELEMENT_NODE,function(t,e){var n=r.a.query(t);if(null==n)return e;if(n.prototype instanceof r.a.Embed){var o={},i=n.value(t);null!=i&&(o[n.blotName]=i,e=(new s.a).insert(o,n.formats(t)))}else"function"==typeof n.formats&&(e=So(e,n.blotName,n.formats(t)));return e}],[Node.ELEMENT_NODE,Io],[Node.ELEMENT_NODE,function(t,e){var n=r.a.Attributor.Attribute.keys(t),o=r.a.Attributor.Class.keys(t),i=r.a.Attributor.Style.keys(t),s={};return n.concat(o).concat(i).forEach((function(e){var n=r.a.query(e,r.a.Scope.ATTRIBUTE);null!=n&&(s[n.attrName]=n.value(t),s[n.attrName])||(null==(n=To[e])||n.attrName!==e&&n.keyName!==e||(s[n.attrName]=n.value(t)||void 0),null==(n=Oo[e])||n.attrName!==e&&n.keyName!==e||(n=Oo[e],s[n.attrName]=n.value(t)||void 0))})),Object.keys(s).length>0&&(e=So(e,s)),e}],[Node.ELEMENT_NODE,function(t,e){var n={},o=t.style||{};return o.fontStyle&&"italic"===Po(t).fontStyle&&(n.italic=!0),o.fontWeight&&(Po(t).fontWeight.startsWith("bold")||parseInt(Po(t).fontWeight)>=700)&&(n.bold=!0),Object.keys(n).length>0&&(e=So(e,n)),parseFloat(o.textIndent||0)>0&&(e=(new s.a).insert("\t").concat(e)),e}],["li",function(t,e){var n=r.a.query(t);if(null==n||"list-item"!==n.blotName||!Eo(e,"\n"))return e;for(var o=-1,i=t.parentNode;!i.classList.contains("ql-clipboard");)"list"===(r.a.query(i)||{}).blotName&&(o+=1),i=i.parentNode;return o<=0?e:e.compose((new s.a).retain(e.length()-1).retain(1,{indent:o}))}],["b",wo.bind(wo,"bold")],["i",wo.bind(wo,"italic")],["style",function(){return new s.a}]],To=[oo,so].reduce((function(t,e){return t[e.keyName]=e,t}),{}),Oo=[ro,$e,Je,ao,mn,Un].reduce((function(t,e){return t[e.keyName]=e,t}),{}),xo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ho(t,e)}(r,t);var e,n,o=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=bo(t);if(e){var r=bo(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return yo(this,n)}}(r);function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=o.call(this,t,e)).quill.root.addEventListener("paste",n.onPaste.bind(mo(n))),n.container=n.quill.addContainer("ql-clipboard"),n.container.setAttribute("contenteditable",!0),n.container.setAttribute("tabindex",-1),n.matchers=[],Co.concat(n.options.matchers).forEach((function(t){var o=po(t,2),r=o[0],i=o[1];(e.matchVisual||i!==Io)&&n.addMatcher(r,i)})),n}return e=r,(n=[{key:"addMatcher",value:function(t,e){this.matchers.push([t,e])}},{key:"convert",value:function(t){if("string"==typeof t)return this.container.innerHTML=t.replace(/\>\r?\n +\</g,"><"),this.convert();var e=this.quill.getFormat(this.quill.selection.savedRange.index);if(e[rt.blotName]){var n=this.container.innerText;return this.container.innerHTML="",(new s.a).insert(n,lo({},rt.blotName,e[rt.blotName]))}var o=po(this.prepareMatching(),2),r=o[0],i=o[1],a=function t(e,n,o){return e.nodeType===e.TEXT_NODE?o.reduce((function(t,n){return n(e,t)}),new s.a):e.nodeType===e.ELEMENT_NODE?[].reduce.call(e.childNodes||[],(function(r,i){var s=t(i,n,o);return i.nodeType===e.ELEMENT_NODE&&(s=n.reduce((function(t,e){return e(i,t)}),s),s=(i[vo]||[]).reduce((function(t,e){return e(i,t)}),s)),r.concat(s)}),new s.a):new s.a}(this.container,r,i);return Eo(a,"\n")&&null==a.ops[a.ops.length-1].attributes&&(a=a.compose((new s.a).retain(a.length()-1).delete(1))),go.log("convert",this.container.innerHTML,a),this.container.innerHTML="",a}},{key:"dangerouslyPasteHTML",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:de.sources.API;if("string"==typeof t)this.quill.setContents(this.convert(t),e),this.quill.setSelection(0,de.sources.SILENT);else{var o=this.convert(e);this.quill.updateContents((new s.a).retain(t).concat(o),n),this.quill.setSelection(t+o.length(),de.sources.SILENT)}}},{key:"onPaste",value:function(t){var e=this;if(!t.defaultPrevented&&this.quill.isEnabled()){var n=this.quill.getSelection(),o=(new s.a).retain(n.index),r=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(de.sources.SILENT),setTimeout((function(){o=o.concat(e.convert()).delete(n.length),e.quill.updateContents(o,de.sources.USER),e.quill.setSelection(o.length()-n.length,de.sources.SILENT),e.quill.scrollingContainer.scrollTop=r,e.quill.focus()}),1)}}},{key:"prepareMatching",value:function(){var t=this,e=[],n=[];return this.matchers.forEach((function(o){var r=po(o,2),i=r[0],s=r[1];switch(i){case Node.TEXT_NODE:n.push(s);break;case Node.ELEMENT_NODE:e.push(s);break;default:[].forEach.call(t.container.querySelectorAll(i),(function(t){t[vo]=t[vo]||[],t[vo].push(s)}))}})),[e,n]}}])&&fo(e.prototype,n),r}(Vt);function So(t,e,n){return"object"===co(e)?Object.keys(e).reduce((function(t,n){return So(t,n,e[n])}),t):t.reduce((function(t,o){return o.attributes&&o.attributes[e]?t.push(o):t.insert(o.insert,p()({},lo({},e,n),o.attributes))}),new s.a)}function Po(t){return t.nodeType!==Node.ELEMENT_NODE?{}:t["__ql-computed-style"]||(t["__ql-computed-style"]=window.getComputedStyle(t))}function Eo(t,e){for(var n="",o=t.ops.length-1;o>=0&&n.length<e.length;--o){var r=t.ops[o];if("string"!=typeof r.insert)break;n=r.insert+n}return n.slice(-1*e.length)===e}function ko(t){if(0===t.childNodes.length)return!1;var e=Po(t);return["block","list-item"].indexOf(e.display)>-1}function wo(t,e,n){return So(n,t,!0)}function Ao(t,e){return Eo(e,"\n")||(ko(t)||e.length()>0&&t.nextSibling&&ko(t.nextSibling))&&e.insert("\n"),e}function Io(t,e){if(ko(t)&&null!=t.nextElementSibling&&!Eo(e,"\n\n")){var n=t.offsetHeight+parseFloat(Po(t).marginTop)+parseFloat(Po(t).marginBottom);t.nextElementSibling.offsetTop>t.offsetTop+1.5*n&&e.insert("\n")}return e}function Ro(t){return(Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jo(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _o(t,e){return(_o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Do(t,e){return!e||"object"!==Ro(e)&&"function"!=typeof e?No(t):e}function No(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mo(t){return(Mo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}xo.DEFAULTS={matchers:[],matchVisual:!0};var Bo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_o(t,e)}(i,t);var e,n,o=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Mo(t);if(e){var r=Mo(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Do(this,n)}}(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t,e)).lastRecorded=0,n.ignoreChange=!1,n.clear(),n.quill.on(de.events.EDITOR_CHANGE,(function(t,e,o,r){t!==de.events.TEXT_CHANGE||n.ignoreChange||(n.options.userOnly&&r!==de.sources.USER?n.transform(e):n.record(e,o))})),n.quill.keyboard.addBinding({key:"Z",shortKey:!0},n.undo.bind(No(n))),n.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},n.redo.bind(No(n))),/Win/i.test(navigator.platform)&&n.quill.keyboard.addBinding({key:"Y",shortKey:!0},n.redo.bind(No(n))),n}return e=i,(n=[{key:"change",value:function(t,e){if(0!==this.stack[t].length){var n=this.stack[t].pop();this.stack[e].push(n),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n[t],de.sources.USER),this.ignoreChange=!1;var o=function(t){var e=t.reduce((function(t,e){return t+(e.delete||0)}),0),n=t.length()-e;return function(t){var e=t.ops[t.ops.length-1];return null!=e&&(null!=e.insert?"string"==typeof e.insert&&e.insert.endsWith("\n"):null!=e.attributes&&Object.keys(e.attributes).some((function(t){return null!=r.a.query(t,r.a.Scope.BLOCK)})))}(t)&&(n-=1),n}(n[t]);this.quill.setSelection(o)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(t,e){if(0!==t.ops.length){this.stack.redo=[];var n=this.quill.getContents().diff(e),o=Date.now();if(this.lastRecorded+this.options.delay>o&&this.stack.undo.length>0){var r=this.stack.undo.pop();n=n.compose(r.undo),t=r.redo.compose(t)}else this.lastRecorded=o;this.stack.undo.push({redo:t,undo:n}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(t){this.stack.undo.forEach((function(e){e.undo=t.transform(e.undo,!0),e.redo=t.transform(e.redo,!0)})),this.stack.redo.forEach((function(e){e.undo=t.transform(e.undo,!0),e.redo=t.transform(e.redo,!0)}))}},{key:"undo",value:function(){this.change("undo","redo")}}])&&jo(e.prototype,n),i}(Vt);function Lo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ho(t){return(Ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Uo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Uo(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function zo(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ko(t,e,n){return e&&zo(t.prototype,e),n&&zo(t,n),t}function Vo(t,e){return(Vo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qo(t,e){return!e||"object"!==Ho(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wo(t){return(Wo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Bo.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};var Go=jt("quill:keyboard"),Yo=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",Qo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vo(t,e)}(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Wo(t);if(e){var r=Wo(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return qo(this,n)}}(n);function n(t,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(r=e.call(this,t,o)).bindings={},Object.keys(r.options.bindings).forEach((function(e){("list autofill"!==e||null==t.scroll.whitelist||t.scroll.whitelist.list)&&r.options.bindings[e]&&r.addBinding(r.options.bindings[e])})),r.addBinding({key:n.keys.ENTER,shiftKey:null},tr),r.addBinding({key:n.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},(function(){})),/Firefox/i.test(navigator.userAgent)?(r.addBinding({key:n.keys.BACKSPACE},{collapsed:!0},$o),r.addBinding({key:n.keys.DELETE},{collapsed:!0},Xo)):(r.addBinding({key:n.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},$o),r.addBinding({key:n.keys.DELETE},{collapsed:!0,suffix:/^.?$/},Xo)),r.addBinding({key:n.keys.BACKSPACE},{collapsed:!1},Zo),r.addBinding({key:n.keys.DELETE},{collapsed:!1},Zo),r.addBinding({key:n.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},$o),r.listen(),r}return Ko(n,null,[{key:"match",value:function(t,e){return e=or(e),!["altKey","ctrlKey","metaKey","shiftKey"].some((function(n){return!!e[n]!==t[n]&&null!==e[n]}))&&e.key===(t.which||t.keyCode)}}]),Ko(n,[{key:"addBinding",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=or(t);if(null==o||null==o.key)return Go.warn("Attempted to add invalid keyboard binding",o);"function"==typeof e&&(e={handler:e}),"function"==typeof n&&(n={handler:n}),o=p()(o,e,n),this.bindings[o.key]=this.bindings[o.key]||[],this.bindings[o.key].push(o)}},{key:"listen",value:function(){var t=this;this.quill.root.addEventListener("keydown",(function(e){if(!e.defaultPrevented){var o=e.which||e.keyCode,i=(t.bindings[o]||[]).filter((function(t){return n.match(e,t)}));if(0!==i.length){var s=t.quill.getSelection();if(null!=s&&t.quill.hasFocus()){var a=Fo(t.quill.getLine(s.index),2),c=a[0],l=a[1],p=Fo(t.quill.getLeaf(s.index),2),u=p[0],d=p[1],f=Fo(0===s.length?[u,d]:t.quill.getLeaf(s.index+s.length),2),h=f[0],y=f[1],m=u instanceof r.a.Text?u.value().slice(0,d):"",b=h instanceof r.a.Text?h.value().slice(y):"",g={collapsed:0===s.length,empty:0===s.length&&c.length()<=1,format:t.quill.getFormat(s),offset:l,prefix:m,suffix:b};i.some((function(e){if(null!=e.collapsed&&e.collapsed!==g.collapsed)return!1;if(null!=e.empty&&e.empty!==g.empty)return!1;if(null!=e.offset&&e.offset!==g.offset)return!1;if(Array.isArray(e.format)){if(e.format.every((function(t){return null==g.format[t]})))return!1}else if("object"===Ho(e.format)&&!Object.keys(e.format).every((function(t){return!0===e.format[t]?null!=g.format[t]:!1===e.format[t]?null==g.format[t]:gt()(e.format[t],g.format[t])})))return!1;return!(null!=e.prefix&&!e.prefix.test(g.prefix)||null!=e.suffix&&!e.suffix.test(g.suffix)||!0===e.handler.call(t,s,g))}))&&e.preventDefault()}}}}))}}]),n}(Vt);function Jo(t,e){var n,o=t===Qo.keys.LEFT?"prefix":"suffix";return Lo(n={key:t,shiftKey:e,altKey:null},o,/^$/),Lo(n,"handler",(function(n){var o=n.index;return t===Qo.keys.RIGHT&&(o+=n.length+1),!(Fo(this.quill.getLeaf(o),1)[0]instanceof r.a.Embed&&(t===Qo.keys.LEFT?e?this.quill.setSelection(n.index-1,n.length+1,de.sources.USER):this.quill.setSelection(n.index-1,de.sources.USER):e?this.quill.setSelection(n.index,n.length+1,de.sources.USER):this.quill.setSelection(n.index+n.length+1,de.sources.USER),1))})),n}function $o(t,e){if(!(0===t.index||this.quill.getLength()<=1)){var n=Fo(this.quill.getLine(t.index),1)[0],o={};if(0===e.offset){var r=Fo(this.quill.getLine(t.index-1),1)[0];if(null!=r&&r.length()>1){var i=n.formats(),s=this.quill.getFormat(t.index-1,1);o=c.a.attributes.diff(i,s)||{}}}var a=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;this.quill.deleteText(t.index-a,a,de.sources.USER),Object.keys(o).length>0&&this.quill.formatLine(t.index-a,a,o,de.sources.USER),this.quill.focus()}}function Xo(t,e){var n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(!(t.index>=this.quill.getLength()-n)){var o={},r=0,i=Fo(this.quill.getLine(t.index),1)[0];if(e.offset>=i.length()-1){var s=Fo(this.quill.getLine(t.index+1),1)[0];if(s){var a=i.formats(),l=this.quill.getFormat(t.index,1);o=c.a.attributes.diff(a,l)||{},r=s.length()}}this.quill.deleteText(t.index,n,de.sources.USER),Object.keys(o).length>0&&this.quill.formatLine(t.index+r-1,n,o,de.sources.USER)}}function Zo(t){var e=this.quill.getLines(t),n={};if(e.length>1){var o=e[0].formats(),r=e[e.length-1].formats();n=c.a.attributes.diff(r,o)||{}}this.quill.deleteText(t,de.sources.USER),Object.keys(n).length>0&&this.quill.formatLine(t.index,1,n,de.sources.USER),this.quill.setSelection(t.index,de.sources.SILENT),this.quill.focus()}function tr(t,e){var n=this;t.length>0&&this.quill.scroll.deleteAt(t.index,t.length);var o=Object.keys(e.format).reduce((function(t,n){return r.a.query(n,r.a.Scope.BLOCK)&&!Array.isArray(e.format[n])&&(t[n]=e.format[n]),t}),{});this.quill.insertText(t.index,"\n",o,de.sources.USER),this.quill.setSelection(t.index+1,de.sources.SILENT),this.quill.focus(),Object.keys(e.format).forEach((function(t){null==o[t]&&(Array.isArray(e.format[t])||"link"!==t&&n.quill.format(t,e.format[t],de.sources.USER))}))}function er(t){return{key:Qo.keys.TAB,shiftKey:!t,format:{"code-block":!0},handler:function(e){var n=r.a.query("code-block"),o=e.index,i=e.length,s=Fo(this.quill.scroll.descendant(n,o),2),a=s[0],c=s[1];if(null!=a){var l=this.quill.getIndex(a),p=a.newlineIndex(c,!0)+1,u=a.newlineIndex(l+c+i),d=a.domNode.textContent.slice(p,u).split("\n");c=0,d.forEach((function(e,r){t?(a.insertAt(p+c,n.TAB),c+=n.TAB.length,0===r?o+=n.TAB.length:i+=n.TAB.length):e.startsWith(n.TAB)&&(a.deleteAt(p+c,n.TAB.length),c-=n.TAB.length,0===r?o-=n.TAB.length:i-=n.TAB.length),c+=e.length+1})),this.quill.update(de.sources.USER),this.quill.setSelection(o,i,de.sources.SILENT)}}}}function nr(t){return{key:t[0].toUpperCase(),shortKey:!0,handler:function(e,n){this.quill.format(t,!n.format[t],de.sources.USER)}}}function or(t){if("string"==typeof t||"number"==typeof t)return or({key:t});if("object"===Ho(t)&&(t=mt()(t,!1)),"string"==typeof t.key)if(null!=Qo.keys[t.key.toUpperCase()])t.key=Qo.keys[t.key.toUpperCase()];else{if(1!==t.key.length)return null;t.key=t.key.toUpperCase().charCodeAt(0)}return t.shortKey&&(t[Yo]=t.shortKey,delete t.shortKey),t}Qo.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},Qo.DEFAULTS={bindings:{bold:nr("bold"),italic:nr("italic"),underline:nr("underline"),indent:{key:Qo.keys.TAB,format:["blockquote","indent","list"],handler:function(t,e){if(e.collapsed&&0!==e.offset)return!0;this.quill.format("indent","+1",de.sources.USER)}},outdent:{key:Qo.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(t,e){if(e.collapsed&&0!==e.offset)return!0;this.quill.format("indent","-1",de.sources.USER)}},"outdent backspace":{key:Qo.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(t,e){null!=e.format.indent?this.quill.format("indent","-1",de.sources.USER):null!=e.format.list&&this.quill.format("list",!1,de.sources.USER)}},"indent code-block":er(!0),"outdent code-block":er(!1),"remove tab":{key:Qo.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(t){this.quill.deleteText(t.index-1,1,de.sources.USER)}},tab:{key:Qo.keys.TAB,handler:function(t){this.quill.history.cutoff();var e=(new s.a).retain(t.index).delete(t.length).insert("\t");this.quill.updateContents(e,de.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,de.sources.SILENT)}},"list empty enter":{key:Qo.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(t,e){this.quill.format("list",!1,de.sources.USER),e.format.indent&&this.quill.format("indent",!1,de.sources.USER)}},"checklist enter":{key:Qo.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(t){var e=Fo(this.quill.getLine(t.index),2),n=e[0],o=e[1],r=p()({},n.formats(),{list:"checked"}),i=(new s.a).retain(t.index).insert("\n",r).retain(n.length()-o-1).retain(1,{list:"unchecked"});this.quill.updateContents(i,de.sources.USER),this.quill.setSelection(t.index+1,de.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:Qo.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(t,e){var n=Fo(this.quill.getLine(t.index),2),o=n[0],r=n[1],i=(new s.a).retain(t.index).insert("\n",e.format).retain(o.length()-r-1).retain(1,{header:null});this.quill.updateContents(i,de.sources.USER),this.quill.setSelection(t.index+1,de.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(t,e){var n,o=e.prefix.length,r=Fo(this.quill.getLine(t.index),2),i=r[0],a=r[1];if(a>o)return!0;switch(e.prefix.trim()){case"[]":case"[ ]":n="unchecked";break;case"[x]":n="checked";break;case"-":case"*":n="bullet";break;default:n="ordered"}this.quill.insertText(t.index," ",de.sources.USER),this.quill.history.cutoff();var c=(new s.a).retain(t.index-a).delete(o+1).retain(i.length()-2-a).retain(1,{list:n});this.quill.updateContents(c,de.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-o,de.sources.SILENT)}},"code exit":{key:Qo.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(t){var e=Fo(this.quill.getLine(t.index),2),n=e[0],o=e[1],r=(new s.a).retain(t.index+n.length()-o-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(r,de.sources.USER)}},"embed left":Jo(Qo.keys.LEFT,!1),"embed left shift":Jo(Qo.keys.LEFT,!0),"embed right":Jo(Qo.keys.RIGHT,!1),"embed right shift":Jo(Qo.keys.RIGHT,!0)}},de.register({"blots/block":q,"blots/block/embed":V,"blots/break":v,"blots/container":xe,"blots/cursor":ht,"blots/embed":Ie,"blots/inline":D,"blots/scroll":Ue,"blots/text":P,"formats/link":Rn,"formats/color":Je,"formats/font":mn,"formats/size":Un,"formats/background":$e,"formats/bold":an,"formats/italic":xn,"formats/underline":eo,"formats/strike":Yn,"formats/script":Fn,"modules/clipboard":xo,"modules/history":Bo,"modules/keyboard":Qo}),r.a.register(q,v,ht,D,Ue,P),e.default=de}])},1613:function(t,e,n){var o=n(1);function r(t){return o.createElement("svg",t,[o.createElement("defs",{key:0},[o.createElement("rect",{id:"path-1",x:"2",y:"1",width:"270",height:"60",key:0}),o.createElement("filter",{x:"-1.3%",y:"-4.2%",width:"102.6%",height:"111.7%",filterUnits:"objectBoundingBox",id:"filter-2",key:1},[o.createElement("feOffset",{dx:"0",dy:"1",in:"SourceAlpha",result:"shadowOffsetOuter1",key:0}),o.createElement("feGaussianBlur",{stdDeviation:"1",in:"shadowOffsetOuter1",result:"shadowBlurOuter1",key:1}),o.createElement("feComposite",{in:"shadowBlurOuter1",in2:"SourceAlpha",operator:"out",result:"shadowBlurOuter1",key:2}),o.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.1 0",type:"matrix",in:"shadowBlurOuter1",key:3})])]),o.createElement("g",{id:"Redlines",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",opacity:"0.718693388",key:1},o.createElement("g",{id:"GhostCard_52px"},[o.createElement("g",{id:"Rectangle-2",key:0},[o.createElement("use",{fill:"black",fillOpacity:"1",filter:"url(#filter-2)",xlinkHref:"#path-1",key:0}),o.createElement("use",{fill:"#FFFFFF",fillRule:"evenodd",xlinkHref:"#path-1",key:1}),o.createElement("rect",{stroke:"#EAEAEA",strokeWidth:"1",x:"2.5",y:"1.5",width:"269",height:"59",key:2})]),o.createElement("circle",{id:"Oval-8",fill:"#EAEAEA",cx:"27",cy:"28",r:"14",key:1}),o.createElement("rect",{id:"Rectangle1",fill:"#EAEAEA",x:"55",y:"16",width:"92",height:"11",rx:"5.5",key:2}),o.createElement("rect",{id:"Rectangle2",fill:"#EAEAEA",x:"55",y:"34",width:"204",height:"11",rx:"5.5",key:3})]))])}r.defaultProps={width:"274px",height:"52px",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 274 52",focusable:"false",version:"1.1"},t.exports=r,r.default=r}}]);
//# sourceMappingURL=sharedCommentsLazy.min.js.map